import{aD as c,af as i}from"./index-ba2685b5.js";const f=c("useCrudSubjectStore",{state:()=>({loading:{form:!1,table:!1},form:{id:null,type_education_id:null,name:null,code:null},subjectData:{},subjects:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,typeEducations:[]}),getters:{},actions:{clearForm(){this.form={id:null,type_education_id:null,name:null,code:null}},async fetchAll(a){var o;this.loading.table=!0;const{data:t,response:e,error:s,isFetching:l}=await i("/subject-list").post(a);this.loading.table=!1,(o=e.value)!=null&&o.ok&&t.value&&(this.subjects=t.value.subjects,this.totalData=t.value.totalData,this.totalPage=t.value.totalPage,this.currentPage=t.value.currentPage,this.lastPage=t.value.lastPage)},async fetchDataForm(a,t="create"){var r,n;this.loading.form=!0;const e=a?`/subject-dataForm/${t}/${a}`:`/subject-dataForm/${t}`,{data:s,response:l,error:o,isFetching:u}=await i(e).get();this.loading.form=!1,(r=l.value)!=null&&r.ok&&s.value&&(this.typeEducations=s.value.typeEducations),(n=l.value)!=null&&n.ok&&s.value.form&&(this.form=s.value.form)},async fetchSave(){var o;const a=new FormData;for(const u in this.form)a.append(u,this.form[u]);this.loading.form=!0;const{data:t,response:e,error:s,isFetching:l}=await i("/subject-create").post(a);return this.loading.form=!1,(o=e.value)!=null&&o.ok&&t.value&&(this.form=t.value.data),t.value},async fetchDelete(a){this.loading.table=!0,await i("/subject-delete/"+a).delete(),this.loading.table=!1},async changeState(a){var l;this.loading.table=!0;const{data:t,response:e,isFetching:s}=await i("/subject-changeState").post(a);return this.loading.table=!1,(l=e.value)!=null&&l.ok&&t.value&&(this.form=t.value.data),t.value}}});export{f as u};

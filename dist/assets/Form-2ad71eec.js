import{V as R,r as c}from"./VForm-493e76e9.js";import{_ as z}from"./AppSelect.vue_vue_type_script_setup_true_lang-883cedbb.js";import{_ as K}from"./AppTextField.vue_vue_type_script_setup_true_lang-fe09e9fd.js";import{d as P,r as _,j as H,$ as L,E as h,a6 as J,w as O,o as g,c as w,b as e,f as a,t as v,n as r,g as D,e as q,a9 as F,F as Q,i as W,aw as X,ax as Y,a1 as Z,a7 as x}from"./index-f0a17608.js";import{u as ee}from"./useCrudCompanyStore-8ff1bca8.js";import{u as ae}from"./useImageUpload-1064981f.js";import{b as $,V as k}from"./VCard-31e36cbf.js";import{V as I}from"./VCardText-37c4b6af.js";import{V as p}from"./VRow-7e12a5b8.js";import{V as s}from"./VCol-bdf28fe9.js";import{V as le}from"./VFileInput-5161e7f2.js";import{V as re}from"./VImg-3a55bcec.js";import"./helpers-3edea678.js";import"./VField-af121a13.js";import"./VSelect-3aaa4446.js";import"./VTextField-53f47265.js";import"./VList-a35ac4d8.js";import"./ssrBoot-0dd9127e.js";import"./VAvatar-4fea0b0d.js";import"./VDivider-27341778.js";import"./dialog-transition-a173f696.js";import"./VMenu-c2e94613.js";import"./VChip-7c5af708.js";import"./sweetalert2.all-ae952bba.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */const oe=q("b",{class:"text-warning"},"*",-1),te={class:"d-flex justify-space-between"},ie=q("span",null,"Información de adicional",-1),Ae=P({__name:"Form",setup(ne){const u=_(ae()),b=H(),{toast:T}=Y(),y=_(),f=ee(),{form:i,loading:B,typeDetails:S}=L(f),m=_({}),C=_([]),N=async()=>{var o,V;const l=await((o=y.value)==null?void 0:o.validate());if(l!=null&&l.valid){const n=await f.fetchSave();(n==null?void 0:n.code)===200&&(C.value=[],m.value={},u.value.clearData(),await((V=y.value)==null?void 0:V.resetValidation())),(n==null?void 0:n.code)===422&&(m.value=n.errors??{})}else T("Faltan Campos Por Diligenciar","","danger")};h(async()=>{f.clearForm(),b.params.id&&await f.fetchDataForm(Number(b.params.id),b.params.action)});const A=J(()=>i.value.arrayDetails.filter(l=>l.delete!=1)),E=()=>{i.value.arrayDetails.push({type_detail_id:null,icon:null,color:null,content:null,delete:0})},G=l=>{i.value.arrayDetails[l].id?i.value.arrayDetails[l].delete=1:i.value.arrayDetails.splice(l,1)};O(i,(l,o)=>{l.id?C.value.image_principal=[]:C.value.image_principal=[c(u.value.imageUrl)]},{deep:!0});const M=l=>{u.value.handleImageSelected(l),setTimeout(()=>{i.value.image_principal=u.value.imageFile},1e3)};return(l,o)=>{const V=X,n=K,j=z;return g(),w("div",null,[e(V,{"sub-title":"Formulario de compañia",action:String(l.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:l.$router.back},null,8,["action","onChangeScreenBack"]),e(k,null,{default:a(()=>[e($,{"primary-title":""},{default:a(()=>[v("Información principal")]),_:1}),e(I,null,{default:a(()=>[e(p,null,{default:a(()=>[e(s)]),_:1}),e(r(R),{ref_key:"formValidation",ref:y,"lazy-validation":""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,{cols:"12",md:"4"},{default:a(()=>[e(n,{clearable:"",modelValue:r(i).name,"onUpdate:modelValue":o[0]||(o[0]=t=>r(i).name=t),rules:["requiredValidator"in l?l.requiredValidator:r(c)],"error-messages":r(m).name,label:"Nombre",onKeypress:o[1]||(o[1]=t=>r(m).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),e(s,{cols:"12",md:"4"},{default:a(()=>[e(n,{clearable:"",modelValue:r(i).slogan,"onUpdate:modelValue":o[2]||(o[2]=t=>r(i).slogan=t),rules:["requiredValidator"in l?l.requiredValidator:r(c)],"error-messages":r(m).slogan,label:"Eslogan",onKeypress:o[3]||(o[3]=t=>r(m).slogan=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),e(s,{cols:"12",md:"4"},{default:a(()=>[e(n,{clearable:"",modelValue:r(i).iframeGoogleMap,"onUpdate:modelValue":o[4]||(o[4]=t=>r(i).iframeGoogleMap=t),label:"iframeGoogleMap",requiredField:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{cols:"12",sm:"3"},{default:a(()=>[(g(),D(le,{accept:"image/*",key:r(u).key,onChange:o[5]||(o[5]=t=>M(t)),"onClick:clear":r(u).clearData},{label:a(()=>[v(" Imagen Principal "),oe]),_:1},8,["onClick:clear"]))]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(k,{width:"400"},{default:a(()=>[e(re,{src:r(u).imageUrl??r(i).image_principal},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}),e(k,{class:"mt-5"},{default:a(()=>[e($,{"primary-title":""},{default:a(()=>[q("div",te,[ie,e(F,{color:"success",onClick:o[6]||(o[6]=t=>E())},{default:a(()=>[v("Agregar")]),_:1})])]),_:1}),e(I,null,{default:a(()=>[(g(!0),w(Q,null,W(r(A),(t,U)=>(g(),D(p,{key:U},{default:a(()=>[e(s,{cols:"12",md:"2"},{default:a(()=>[e(j,{items:r(S),modelValue:t.type_detail_id,"onUpdate:modelValue":d=>t.type_detail_id=d,label:"Tipo",requiredField:!0},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{cols:"12",md:"2"},{default:a(()=>[e(n,{clearable:"",modelValue:t.icon,"onUpdate:modelValue":d=>t.icon=d,rules:["requiredValidator"in l?l.requiredValidator:r(c)],label:"Icono",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"2"},{default:a(()=>[e(n,{clearable:"",modelValue:t.color,"onUpdate:modelValue":d=>t.color=d,rules:["requiredValidator"in l?l.requiredValidator:r(c)],label:"Color",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"5"},{default:a(()=>[e(n,{clearable:"",modelValue:t.content,"onUpdate:modelValue":d=>t.content=d,rules:["requiredValidator"in l?l.requiredValidator:r(c)],label:"Contenido",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"1"},{default:a(()=>[e(F,{icon:"",size:"x-small",color:"error",variant:"text",class:"mt-6",onClick:d=>G(U)},{default:a(()=>[e(Z,{icon:"tabler-trash"}),e(x,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(p,{class:"mt-5"},{default:a(()=>[e(s,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(F,{loading:r(B).form,color:"primary",onClick:o[7]||(o[7]=t=>N())},{default:a(()=>[v(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})])}}});export{Ae as default};

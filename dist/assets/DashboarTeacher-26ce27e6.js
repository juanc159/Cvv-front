import{a as W}from"./formatters-1588bd0d.js";import{a as X,d as Y}from"./helpers-53221d8d.js";import{_ as Z}from"./ModalChangePassword.vue_vue_type_script_setup_true_lang-bd79b9ce.js";import{V as ee,r as L}from"./VForm-4d49c1be.js";import{_ as ae}from"./AppSelect.vue_vue_type_script_setup_true_lang-1079265a.js";import{_ as le}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-ae6cffed.js";import{d as H,R as J,r as g,aF as P,o as u,c as N,b as e,f as a,k as o,g as b,E as j,e as i,B as D,C as p,ae as S,af as B,aA as oe,Q as te,ab as ne,L as se,a6 as $,F as z,m as R,V as ie}from"./index-77212f31.js";import{u as re}from"./useImageUpload-86a92f0a.js";import{V as de,a as ue}from"./VToolbar-cd58a2cb.js";import{V as A,b as M,a as me}from"./VCard-361c560a.js";import{V as k}from"./VCardText-9bfba233.js";import{V as C}from"./VRow-ebf9c426.js";import{V}from"./VCol-ba01f7e5.js";import{V as ce}from"./VField-5ee14dd0.js";import{V as fe}from"./VFileInput-182a5e9d.js";import{V as pe}from"./VDialog-6546badb.js";import{V as _e}from"./VImg-dc235749.js";import{V as G}from"./VAvatar-c03b23a0.js";import{V as Q}from"./VDivider-68b338a1.js";import{V as ve}from"./VDataTable-0c608ed4.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-fec26226.js";import"./VTextField-8989d56a.js";import"./VSelect-fa3a52a1.js";import"./VList-f5c84533.js";import"./ssrBoot-440b5260.js";import"./dialog-transition-4887f6bb.js";import"./VMenu-da80d115.js";import"./VChip-68c712f3.js";import"./sweetalert2.esm.all-562d67d8.js";/* empty css              */const ge=H({__name:"ModalUploadExcelNomina",emits:["execute"],setup(K,{expose:_,emit:O}){const h=J(),E=g({}),{toast:U}=oe(),d=P({titleDialog:"Subir Nómina",isDialogVisible:!1,isLoading:!1}),c=()=>{d.isDialogVisible=!d.isDialogVisible},q=async()=>{c(),t()},w=g(),v=g({company_id:null,type_education_id:null,archive:null}),f=g(re());f.value.allowedExtensions=["xls","xlsx"];const F=g([]),n=P({form:!1}),t=async()=>{var r;n.form=!0;const{data:s,response:l}=await B("note-dataForm").get();n.form=!1,(r=l.value)!=null&&r.ok&&s.value&&(F.value=s.value.typeEducations)},x=async()=>{var l,r;v.value.archive=f.value.imageFile,v.value.company_id=h.user.company_id;const s=await((l=w.value)==null?void 0:l.validate());if(s!=null&&s.valid){const y=new FormData;for(const I in v.value)y.append(I,v.value[I]);n.form=!0;const{data:m,response:T}=await B("note-store").post(y);n.form=!1,(r=T.value)!=null&&r.ok&&m.value&&c()}else U("Faltan Campos Por Diligenciar","","danger")};return _({openDialog:q}),(s,l)=>{const r=le,y=ae;return u(),N("div",null,[e(pe,{modelValue:o(d).isDialogVisible,"onUpdate:modelValue":l[4]||(l[4]=m=>o(d).isDialogVisible=m),persistent:"","max-width":"40rem",transition:"dialog-transition"},{default:a(()=>[o(n).form?j("",!0):(u(),b(r,{key:0,onClick:l[0]||(l[0]=m=>c())})),i("div",null,[e(de,{color:"primary"},{default:a(()=>[e(ue,null,{default:a(()=>[D(p(o(d).titleDialog),1)]),_:1})]),_:1})]),e(A,null,{default:a(()=>[e(k,null,{default:a(()=>[e(ee,{ref_key:"formValidation",ref:w,"lazy-validation":""},{default:a(()=>[e(C,null,{default:a(()=>[e(V,{cols:"12",sm:"6"},{default:a(()=>[e(y,{clearable:"",modelValue:o(v).type_education_id,"onUpdate:modelValue":l[1]||(l[1]=m=>o(v).type_education_id=m),rules:["requiredValidator"in s?s.requiredValidator:o(L)],"error-messages":o(E).type_education_id,label:"Tipo",onChange:l[2]||(l[2]=m=>o(E).type_education_id=""),requiredField:!0,items:o(F)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:a(()=>[e(ce,null,{default:a(()=>l[5]||(l[5]=[D("Archivo "),i("b",{class:"text-warning"},"*",-1)])),_:1}),(u(),b(fe,{key:o(f).key,onChange:o(f).handleImageSelected,"onClick:clear":o(f).clearData,rules:["requiredValidator"in s?s.requiredValidator:o(L)]},null,8,["onChange","onClick:clear","rules"]))]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(V,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(S,{loading:o(n).form,disbaled:o(n).form,color:"primary",onClick:l[3]||(l[3]=m=>x())},{default:a(()=>l[6]||(l[6]=[D(" Cargar información ")])),_:1},8,["loading","disbaled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Ve={class:"title-text"},ye={class:"membership-pricing d-flex flex-column align-center h-100 justify-center"},be={class:"me-auto"},xe={class:"d-flex align-center mb-6"},ke={class:"d-flex align-center mb-0"},Ce={class:"ms-auto ps-4"},De={class:"d-flex align-center mb-0"},he={class:"d-flex align-center py-1"},we=["onClick"],Te=H({__name:"DashboarTeacher",setup(K){const _=J(),{company:O,user:h}=te(_),E=ne(()=>{var t;const n=((t=_.user)==null?void 0:t.full_name)||"";return n||"S/N"}),U=[{title:"Título",key:"name",sortable:!1}],d=P({form:!1,excel:!1}),c=g();se(async()=>{var s,l;d.form=!0;const{data:n,response:t,error:x}=await B("/teacher-planningShow/"+((s=_.user)==null?void 0:s.id)).get();d.form=!1,(l=t.value)!=null&&l.ok&&n.value&&(c.value=n.value.data)});const q=async n=>{var s;d.excel=!0;const{data:t,response:x}=await B("/teacher-downloadConsolidated/"+n.id).get();if(d.excel=!1,(s=x.value)!=null&&s.ok&&t.value){const l="Nómina "+n.full_name;X(t.value.excel,l)}},w=g(),v=()=>{w.value.openDialog()},f=g(),F=()=>{f.value.componentData.module="Teacher",f.value.openDialog(h.value.id,!1)};return(n,t)=>{const x=ge,s=Z;return u(),N("div",null,[e(A,{class:"mb-6"},{default:a(()=>[e(M,{class:"d-flex justify-center align-center title-container"},{default:a(()=>[i("h3",Ve,p(o(h).full_name),1)]),_:1}),e(C,null,{default:a(()=>[e(V,{cols:"12",sm:"4",md:"12",lg:"5",class:"member-pricing-bg text-center"},{default:a(()=>{var l;return[i("div",ye,[(l=o(_).user)!=null&&l.photo?(u(),b(G,{key:0,color:"primary",variant:"tonal",size:"250"},{default:a(()=>{var r;return[e(_e,{src:(r=o(_).user)==null?void 0:r.photo},null,8,["src"])]}),_:1})):(u(),b(G,{key:1,color:"primary",variant:"tonal",size:"50"},{default:a(()=>[D(p(("avatarText"in n?n.avatarText:o(W))(o(E))),1)]),_:1}))])]}),_:1}),e(V,{cols:"12",sm:"8",md:"12",lg:"7"},{default:a(()=>[e(me,null,{default:a(()=>[e(M,null,{default:a(()=>t[3]||(t[3]=[D("¡Bienvenido! 🎉")])),_:1})]),_:1}),e(k,null,{default:a(()=>t[4]||(t[4]=[D(" Estimado profesor, En esta sección puede consultar todo lo relacionado con su planificación. Se agradece que revise cuidadosamente y, ante cualquier novedad, informe. Muchas gracias. ")])),_:1}),e(k,null,{default:a(()=>[e(Q)]),_:1}),e(k,{class:"d-flex justify-center"},{default:a(()=>[i("div",be,[i("p",xe,[e(S,{variant:"outlined",disabled:o(d).excel,loading:o(d).excel,onClick:t[0]||(t[0]=l=>q(o(_).user))},{default:a(()=>[e($,{icon:"tabler-download"}),t[5]||(t[5]=i("span",null,"Descargar Nómina",-1))]),_:1},8,["disabled","loading"])]),i("p",ke,[e(S,{disabled:o(h).blockData,variant:"outlined",onClick:t[1]||(t[1]=l=>v())},{default:a(()=>[e($,{icon:"tabler-download"}),t[6]||(t[6]=i("span",null,"Subir Nómina",-1))]),_:1},8,["disabled"])])]),n.$vuetify.display.smAndUp?(u(),b(Q,{key:0,vertical:"",inset:""})):j("",!0),i("div",Ce,[i("p",De,[e(S,{variant:"outlined",onClick:t[2]||(t[2]=l=>F())},{default:a(()=>[e($,{icon:"tabler-lock-open"}),t[7]||(t[7]=i("span",null,"Cambiar contraseña",-1))]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{class:"mb-6",outlined:""},{default:a(()=>[e(M,{class:"d-flex justify-center"},{default:a(()=>t[8]||(t[8]=[i("h2",null,"Planificaciones ",-1)])),_:1}),o(c)?(u(),b(k,{key:0},{default:a(()=>[e(C,null,{default:a(()=>[e(V,{cols:"12",sm:"6"},{default:a(()=>{var l,r;return[i("h2",null,p((l=o(c))==null?void 0:l.name)+" "+p((r=o(c))==null?void 0:r.last_name),1)]}),_:1})]),_:1}),e(C,null,{default:a(()=>[(u(!0),N(z,null,R(o(c).complementaries,(l,r)=>(u(),b(V,{cols:"12",key:r},{default:a(()=>[e(A,null,{default:a(()=>[e(M,{"primary-title":""},{default:a(()=>[i("h2",null,"Grado: "+p(l.grade_name)+" "+p(l.section_name),1)]),_:2},1024),e(k,null,{default:a(()=>[(u(!0),N(z,null,R(l.subjects,(y,m)=>(u(),N("div",{key:m},[i("h3",null,"Planificacion: "+p(y.title),1),e(C,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(o(ve),{headers:U,items:y.files,"items-per-page":999},{"item.name":a(({item:T,index:I})=>[i("div",he,[e($,{icon:"tabler-file",color:"primary"}),i("a",{href:"#",onClick:Ne=>("descargarArchivo"in n?n.descargarArchivo:o(Y))(T.file,T.name)},[i("b",null,p(T.name),1)],8,we)])]),bottom:a(()=>t[9]||(t[9]=[])),_:2},1032,["items"])]),_:2},1024)]),_:2},1024)]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):j("",!0)]),_:1}),e(x,{ref_key:"refModalUploadExcelNomina",ref:w},null,512),e(s,{ref_key:"refModalChangePassword",ref:f},null,512)])}}});const na=ie(Te,[["__scopeId","data-v-24d7ef86"]]);export{na as default};

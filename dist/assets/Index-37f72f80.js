import{a as R}from"./formatters-1588bd0d.js";import{u as F}from"./useCrudTeacherStore-c7c74060.js";import{d as M,R as O,Q,r as U,L as q,w as b,aB as G,ab as H,a as J,o as d,c as y,b as e,f as o,B as V,k as r,aC as K,e as i,a9 as T,ae as u,D as W,g as w,C as g,F as D,m as X,a6 as h,ac as x,q as Y,E as Z}from"./index-aa5d3caf.js";import{S as ee}from"./sweetalert2.esm.all-562d67d8.js";import{b as te,V as ae}from"./VCard-7e854c2d.js";import{V as S}from"./VCardText-3a66a74a.js";import{V as z}from"./VContainer-3f476ced.js";import{V as oe}from"./VSelect-c5364f97.js";import{V as se}from"./VSpacer-68db2230.js";import{V as ne}from"./VAvatar-31d2b53a.js";import{V as re}from"./VImg-82190d0d.js";import{V as le,a as ie,b as ce}from"./VList-8e5a8f01.js";import{V as de}from"./VChip-912b787d.js";import{V as ue}from"./VRow-ef83ed33.js";import{V as pe}from"./VPagination-62fd104f.js";import{V as me}from"./VDataTable-03929f8a.js";import{V as fe}from"./VDivider-6e8c4f39.js";/* empty css              */import"./VTextField-a473323b.js";import"./VField-60417c4f.js";import"./dialog-transition-19068789.js";import"./VMenu-129fda55.js";import"./ssrBoot-35f8d448.js";const ve={class:"me-3",style:{"inline-size":"80px"}},ye={class:"app-teacher-search-filter d-flex align-center flex-wrap gap-4"},Ve={key:1},ge={colspan:"10"},he={style:{"inline-size":"100"},class:"d-flex justify-center"},xe={class:"text-sm text-disabled"},qe=M({__name:"Index",setup(_e){const p=F(),B=O(),_=Y(),{currentPage:n,totalPage:m,lastPage:P,totalData:I,teachers:k,loading:$}=Q(p),l=U(10),C=async(s=[])=>{await p.fetchAll({company_id:B.company.id,perPage:l.value,page:n.value,searchQuery:s})};q(async()=>{await C()}),b(n,async()=>{n.value>m.value&&(n.value=m.value)}),b(l,async()=>{n.value=1}),G([n,l],async()=>{await C()});const A=H(()=>{const s=k.value.length?(n.value-1)*m.value+1:0,a=k.value.length+(n.value-1)*m.value;return`Mostrando ${s} a ${a} de ${I.value} registros`}),f=async(s="create",a)=>{if(s=="order")return _.push({name:"Teacher-Order"}),!1;if(s=="planning")return _.push({name:"Teacher-Planning",params:{id:a}}),!1;_.push({name:"Teacher-Form",params:{action:s,id:a}})},E=async(s,a)=>{const v=!s[a];(await p.changeState({id:s.id,value:v,field:a})).code==200&&(s.state=v)},L=async s=>{ee.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await p.fetchDelete(s),await C()):a.isDenied})},N=[{title:"Acciones",key:"actions"},{title:"Estado",key:"state"},{title:"Foto",key:"photo"},{title:"Tipo de educación",key:"type_education_name"},{title:"Cargo",key:"job_position_name"},{title:"Nombre(s)",key:"name"},{title:"Apellido(s)",key:"last_name"},{title:"Correo",key:"email"},{title:"Telefono",key:"phone"},{title:"Materias",key:"subjects"}];return(s,a)=>{const v=J("PreloadInterno");return d(),y("div",null,[e(ae,null,{default:o(()=>[e(te,{"primary-title":""},{default:o(()=>a[4]||(a[4]=[V("Listado de docentes")])),_:1}),e(S,null,{default:o(()=>[e(r(me),{headers:N,items:r(k),"items-per-page":r(l)},K({top:o(()=>[e(z,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[i("div",ve,[e(oe,{modelValue:r(l),"onUpdate:modelValue":a[0]||(a[0]=t=>T(l)?l.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(se),i("div",ye,[e(u,{color:"primary",onClick:a[1]||(a[1]=t=>f("order"))},{default:o(()=>a[5]||(a[5]=[V(" Ordenar Docentes ")])),_:1}),e(u,{color:"primary",onClick:a[2]||(a[2]=t=>f())},{default:o(()=>a[6]||(a[6]=[V(" Crear Docente ")])),_:1})])]),_:1})]),"item.photo":o(({item:t})=>[e(ne,{color:t.photo?"":"primary",class:W(t.photo?null:"v-avatar-light-bg primary--text"),variant:t.photo?void 0:"tonal"},{default:o(()=>[t.photo?(d(),w(re,{key:0,src:t.photo},null,8,["src"])):(d(),y("span",Ve,g(("avatarText"in s?s.avatarText:r(R))(t.name+" "+t.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.subjects":o(({item:t})=>[e(le,{border:""},{default:o(()=>[(d(!0),y(D,null,X(t.subjects,(c,j)=>(d(),y(D,{key:c.name},[e(ie,null,{default:o(()=>[e(ce,null,{default:o(()=>[V(g(c),1)]),_:2},1024)]),_:2},1024),j!==t.subjects.length-1?(d(),w(fe,{key:0})):Z("",!0)],64))),128))]),_:2},1024)]),"item.state":o(({item:t})=>[e(de,{color:t.state==1?"success":"error",onClick:c=>E(t,"state")},{default:o(()=>[e(h,{start:"",size:"16",icon:t.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),i("span",null,g(t.state==1?"Activo":"Inactivo"),1),e(x,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":o(({item:t})=>[e(u,{icon:"",size:"x-small",color:"error",variant:"text",onClick:c=>L(t.id)},{default:o(()=>[e(h,{size:"22",icon:"tabler-trash"}),e(x,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),e(u,{icon:"",size:"x-small",color:"default",variant:"text",onClick:c=>f("edit",t.id)},{default:o(()=>[e(h,{size:"22",icon:"tabler-edit"}),e(x,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),e(u,{icon:"",size:"x-small",color:"default",variant:"text",onClick:c=>f("planning",t.id)},{default:o(()=>[e(h,{size:"22",icon:"tabler-file"}),e(x,{location:"top",transition:"scale-transition",activator:"parent",text:"Planificación"})]),_:2},1032,["onClick"])]),bottom:o(()=>[e(S,{class:"pt-2"},{default:o(()=>[e(ue,null,{default:o(()=>[e(z,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[i("span",xe,g(r(A)),1),e(pe,{modelValue:r(n),"onUpdate:modelValue":a[3]||(a[3]=t=>T(n)?n.value=t:null),size:"small","total-visible":5,length:r(P)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[r($).table?{name:"body",fn:o(()=>[i("tr",null,[i("td",ge,[i("div",he,[e(v)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]),_:1})]),_:1})])}}});export{qe as default};

import{d as B,R as E,q as R,Q as N,r as _,ad as Q,w as q,aC as L,L as M,a as U,o as F,c as O,b as t,f as a,B as j,k as l,aD as G,e as i,ab as h,a8 as m,C as x,ae as u,ag as C,O as H,P as J}from"./index-a70c310d.js";import{u as K}from"./useCrudCompanyStore-602a4cc1.js";import{b as W,V as X}from"./VCard-d61c3423.js";import{V as w}from"./VCardText-a04b16cb.js";import{V as b}from"./VContainer-5bc86c48.js";import{V as Y}from"./VSelect-0806c770.js";import{V as Z}from"./VSpacer-ffee46a3.js";import{V as tt}from"./VChip-9a337289.js";import{V as at}from"./VRow-4f083af2.js";import{V as et}from"./VPagination-d1470645.js";import{V as ot}from"./VDataTable-9384d645.js";import"./VAvatar-22f50111.js";import"./VImg-b4a62fd2.js";/* empty css              */import"./VTextField-8ddf2a14.js";import"./VField-2ed8a089.js";import"./VList-4ee0ffd8.js";import"./ssrBoot-7b1f0168.js";import"./VDivider-1ec40492.js";import"./dialog-transition-3794d2d4.js";import"./VMenu-40ddb4d3.js";const st={class:"me-3",style:{"inline-size":"80px"}},nt=i("div",{class:"app-Company-search-filter d-flex align-center flex-wrap gap-4"},null,-1),lt={colspan:"4"},rt={style:{"inline-size":"100"},class:"d-flex justify-center"},it={class:"text-sm text-disabled"},Tt=B({__name:"Index",setup(ct){const p=K(),f=E(),v=R(),{currentPage:n,totalPage:y,lastPage:k,totalData:S,companies:d,loading:P}=N(p),z=[{title:"Nombre",key:"name"},{title:"Eslogan",key:"slogan"},{title:"Estado",key:"state"},{title:"Acciones",key:"actions"}],r=_(10),I=_(),D=Q(()=>{const o=d.value.length?(n.value-1)*y.value+1:0,s=d.value.length+(n.value-1)*y.value;return`Mostrando ${o} a ${s} de ${S.value} registros`});q(r,async()=>{n.value=1}),L([n,I,r],async()=>{await V()});const V=async(o=[])=>{await p.fetchAll({company_id:f.company.id,perPage:r.value,page:n.value,searchQuery:o})};M(async()=>{await V()});const T=async(o="create",s)=>{v.push({name:"Company-Form",params:{action:o,id:s}})},$=async(o,s)=>{const c=!o[s];(await p.changeState({id:o.id,value:c,field:s})).code==200&&(o.state=c)},A=o=>{f.company=o,v.push({name:"root"})};return(o,s)=>{const c=U("PreloadInterno");return F(),O("div",null,[t(X,null,{default:a(()=>[t(W,{"primary-title":""},{default:a(()=>[j("Listado de compaÃ±ias")]),_:1}),t(w,null,{default:a(()=>[t(l(ot),{headers:z,items:l(d),"items-per-page":l(r)},G({top:a(()=>[t(b,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[i("div",st,[t(Y,{modelValue:l(r),"onUpdate:modelValue":s[0]||(s[0]=e=>h(r)?r.value=e:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(Z),nt]),_:1})]),"item.state":a(({item:e})=>[t(tt,{color:e.state==1?"success":"error",onClick:g=>$(e,"state")},{default:a(()=>[t(m,{start:"",size:"16",icon:e.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),i("span",null,x(e.state==1?"Activo":"Inactivo"),1),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":a(({item:e})=>[t(C,{icon:"",size:"x-small",color:"default",variant:"text",onClick:g=>T("edit",e.id)},{default:a(()=>[t(m,{size:"22",icon:"tabler-edit"}),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),H(t(C,{size:"x-small",color:"default",icon:"",variant:"text",onClick:g=>A(e)},{default:a(()=>[t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Ingresar"}),t(m,{size:"22",icon:"tabler-square-rounded-arrow-right"})]),_:2},1032,["onClick"]),[[J,e.state==1]])]),bottom:a(()=>[t(w,{class:"pt-2"},{default:a(()=>[t(at,null,{default:a(()=>[t(b,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[i("span",it,x(l(D)),1),t(et,{modelValue:l(n),"onUpdate:modelValue":s[1]||(s[1]=e=>h(n)?n.value=e:null),size:"small","total-visible":5,length:l(k)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[l(P).table?{name:"body",fn:a(()=>[i("tr",null,[i("td",lt,[i("div",rt,[t(c)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]),_:1})]),_:1})])}}});export{Tt as default};

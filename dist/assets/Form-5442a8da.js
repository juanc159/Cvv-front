import{V as h,r as I}from"./VForm-20c44a87.js";import{d as x,r as s,R as T,Q as q,L as D,o as g,c as N,b as a,f as e,k as n,g as R,B as v,e as $,ae as j,p as A,ay as E,az as z,aA as U}from"./index-8d8d413c.js";import{u as _}from"./useImageUpload-2559d352.js";import{u as G}from"./useCrudBannerStore-69a611eb.js";import{V as H}from"./VCardText-a8b788ae.js";import{V as m}from"./VRow-a67fa24a.js";import{V as c}from"./VCol-06d5136a.js";import{V as L}from"./VFileInput-5ed4c205.js";import{V as M}from"./VImg-b4fd338d.js";import{V as P}from"./VCard-78fe1c41.js";import"./helpers-53221d8d.js";import"./VField-3d967249.js";import"./sweetalert2.esm.all-562d67d8.js";/* empty css              */import"./VChip-587d8c15.js";import"./VAvatar-8ba78597.js";const ua=x({__name:"Form",setup(Q){const d=A(),{toast:k}=U(),f=s(),i=G(),C=T(),{form:p,loading:y}=q(i),V=s({}),B=s(_()),F=s([]),l=s(_()),b=["jpg","jpeg","png"];l.value.allowedExtensions=b;const w=async()=>{var t,u;p.value.company_id=C.company.id;const o=await((t=f.value)==null?void 0:t.validate());if(o!=null&&o.valid){const r=await i.fetchSave();(r==null?void 0:r.code)===200&&(F.value=[],V.value={},B.value.clearData(),await((u=f.value)==null?void 0:u.resetValidation()),E.push({name:"Banner-Index"})),(r==null?void 0:r.code)===422&&(V.value=r.errors??{})}else k("Faltan Campos Por Diligenciar","","danger")},S=o=>{l.value.handleImageSelected(o),setTimeout(()=>{p.value.path=l.value.imageFile},1e3)};return D(async()=>{i.clearForm(),d.params.id&&await i.fetchDataForm(Number(d.params.id),d.params.action)}),(o,t)=>{const u=z;return g(),N("div",null,[a(P,null,{default:e(()=>[a(H,null,{default:e(()=>[a(m,null,{default:e(()=>[a(c,null,{default:e(()=>[a(u,{"sub-title":"Formulario Banner",action:String(o.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:o.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),a(n(h),{ref_key:"formValidation",ref:f,"lazy-validation":""},{default:e(()=>[a(m,null,{default:e(()=>[a(c,{cols:"12",sm:"3"},{default:e(()=>[(g(),R(L,{accept:"image/*",rules:["requiredValidator"in o?o.requiredValidator:n(I)],key:n(l).key,onChange:t[0]||(t[0]=r=>S(r)),"onClick:clear":n(l).clearData,requiredField:!0},{label:e(()=>t[2]||(t[2]=[v(" ImagenÂ "),$("b",{class:"text-warning"},"*",-1)])),_:1},8,["rules","onClick:clear"]))]),_:1})]),_:1}),a(m,null,{default:e(()=>[a(c,{cols:"12"},{default:e(()=>[a(M,{src:n(l).imageUrl??n(p).path},null,8,["src"])]),_:1})]),_:1}),a(m,null,{default:e(()=>[a(c,{cols:"12",class:"d-flex justify-center"},{default:e(()=>[a(j,{loading:n(y).form,color:"primary",onClick:t[1]||(t[1]=r=>w())},{default:e(()=>t[3]||(t[3]=[v(" Guardar ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])}}});export{ua as default};

import{V as S,r as c,e as U}from"./VForm-0125f40e.js";import{_ as A}from"./AppTextField.vue_vue_type_script_setup_true_lang-550b8754.js";import{d as N,R as T,r as d,Q as I,L as K,o as w,c as R,b as o,f as l,k as a,B as F,e as z,g as D,ae as P,p as _,az as E,aA as L}from"./index-45124b2c.js";import{u as j}from"./useImageUpload-568a4ec9.js";import{u as x}from"./useCrudUserStore-b15051be.js";import{V as G}from"./VCardText-bc141056.js";import{V as v}from"./VRow-3e28075c.js";import{V as m}from"./VCol-fa442cdc.js";import{V as H}from"./VField-9e33ebe8.js";import{V as M}from"./VFileInput-c15a09ac.js";import{V as Q}from"./VImg-f16b99f3.js";import{V as J}from"./VCard-5fd62cdf.js";import"./helpers-53221d8d.js";import"./VTextField-a51272e9.js";import"./sweetalert2.esm.all-562d67d8.js";/* empty css              */import"./VChip-021ef7bf.js";import"./VAvatar-197de976.js";const fe=N({__name:"Form",setup(O){const k=T(),b=_(),{toast:C}=L(),g=d(),p=x(),{form:i,loading:q}=I(p),n=d({}),u=d(j()),f=d(!1),y=d([]),$=r=>{u.value.handleImageSelected(r)},B=async()=>{var e,V;const r=await((e=g.value)==null?void 0:e.validate());if(r!=null&&r.valid){u.value.imageFile&&(i.value.photo=u.value.imageFile),i.value.company_id=k.company.id;const s=await p.fetchSave();(s==null?void 0:s.code)===200&&(y.value=[],n.value={},u.value.clearData(),await((V=g.value)==null?void 0:V.resetValidation())),(s==null?void 0:s.code)===422&&(n.value=s.errors??{})}else C("Faltan Campos Por Diligenciar","","danger")};return K(async()=>{p.clearForm(),await p.fetchDataForm(Number(b.params.id),b.params.action)}),(r,e)=>{const V=E,s=A;return w(),R("div",null,[o(J,null,{default:l(()=>[o(G,null,{default:l(()=>[o(v,null,{default:l(()=>[o(m,null,{default:l(()=>[o(V,{"sub-title":"form de usuario",action:String(r.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:r.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),o(a(S),{ref_key:"formValidation",ref:g,"lazy-validation":""},{default:l(()=>[o(v,null,{default:l(()=>[o(m,{cols:"12",md:"4"},{default:l(()=>[o(s,{clearable:"",modelValue:a(i).email,"onUpdate:modelValue":e[0]||(e[0]=t=>a(i).email=t),rules:["requiredValidator"in r?r.requiredValidator:a(c),"emailValidator"in r?r.emailValidator:a(U)],autocomplete:"off","error-messages":a(n).email,label:"Email",onKeypress:e[1]||(e[1]=t=>a(n).email=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),o(m,{cols:"12",md:"4"},{default:l(()=>[o(s,{clearable:"",modelValue:a(i).password,"onUpdate:modelValue":e[2]||(e[2]=t=>a(i).password=t),rules:a(y).password,autocomplete:"off",type:a(f)?"text":"password","append-icon":a(f)?"mdi-eye":"mdi-eye-off","error-messages":a(n).password,label:"Contraseña","onClick:append":e[3]||(e[3]=t=>f.value=!a(f)),onKeypress:e[4]||(e[4]=t=>a(n).password=""),requiredField:!0},null,8,["modelValue","rules","type","append-icon","error-messages"])]),_:1}),o(m,{cols:"12",md:"4"},{default:l(()=>[o(s,{clearable:"",modelValue:a(i).name,"onUpdate:modelValue":e[5]||(e[5]=t=>a(i).name=t),rules:["requiredValidator"in r?r.requiredValidator:a(c)],"error-messages":a(n).name,label:"Nombre",onKeypress:e[6]||(e[6]=t=>a(n).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),o(m,{cols:"12",md:"4"},{default:l(()=>[o(s,{clearable:"",modelValue:a(i).last_name,"onUpdate:modelValue":e[7]||(e[7]=t=>a(i).last_name=t),rules:["requiredValidator"in r?r.requiredValidator:a(c)],"error-messages":a(n).last_name,label:"Apellido",onKeypress:e[8]||(e[8]=t=>a(n).last_name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),o(m,{cols:"12",md:"4"},{default:l(()=>[o(H,null,{default:l(()=>e[11]||(e[11]=[F("Foto  "),z("b",{class:"text-warning"},"*",-1)])),_:1}),(w(),D(M,{key:a(u).key,"show-size":"",counter:"",accept:"image/*",onChange:e[9]||(e[9]=t=>$(t))}))]),_:1}),o(m,{cols:"12"},{default:l(()=>[o(Q,{contain:"",src:a(u).imageUrl??a(i).photo,alt:"foto Personal","max-width":200,class:"mx-auto img-fluid"},null,8,["src"])]),_:1})]),_:1}),o(v,null,{default:l(()=>[o(m,{cols:"12",class:"d-flex justify-center"},{default:l(()=>[o(P,{loading:a(q).form,color:"primary",onClick:e[10]||(e[10]=t=>B())},{default:l(()=>e[12]||(e[12]=[F(" Guardar ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])}}});export{fe as default};

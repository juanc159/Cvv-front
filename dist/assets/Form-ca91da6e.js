import{V as S,r as f}from"./VForm-493e76e9.js";import{_ as j}from"./AppTextField.vue_vue_type_script_setup_true_lang-fe09e9fd.js";import{_ as k}from"./AppSelect.vue_vue_type_script_setup_true_lang-883cedbb.js";import{d as $,j as T,r as V,a0 as B,$ as N,E as A,o as E,c as G,b as o,f as r,n as t,a9 as R,t as U,aw as D,ax as J}from"./index-f0a17608.js";import{u as M}from"./useCrudGradeStore-cbc72b47.js";import{V as O}from"./VCardText-37c4b6af.js";import{V as _}from"./VRow-7e12a5b8.js";import{V as m}from"./VCol-bdf28fe9.js";import{V as z}from"./VCard-31e36cbf.js";import"./helpers-3edea678.js";import"./VField-af121a13.js";import"./VTextField-53f47265.js";import"./VImg-3a55bcec.js";import"./VSelect-3aaa4446.js";import"./VList-a35ac4d8.js";import"./ssrBoot-0dd9127e.js";import"./VAvatar-4fea0b0d.js";import"./VDivider-27341778.js";import"./dialog-transition-a173f696.js";import"./VMenu-c2e94613.js";import"./VChip-7c5af708.js";/* empty css              */const de=$({__name:"Form",setup(H){const b=T(),{toast:g}=J(),p=V(),d=M(),C=B(),{form:l,loading:F,typeEducations:v}=N(d),n=V({}),q=async()=>{var e,u;l.value.company_id=C.company.id;const a=await((e=p.value)==null?void 0:e.validate());if(a!=null&&a.valid){const i=await d.fetchSave();(i==null?void 0:i.code)===200&&(n.value={},await((u=p.value)==null?void 0:u.resetValidation())),(i==null?void 0:i.code)===422&&(n.value=i.errors??{})}else g("Faltan Campos Por Diligenciar","","danger")};A(async()=>{d.clearForm(),await d.fetchDataForm(Number(b.params.id),b.params.action);const a=JSON.parse(JSON.stringify(l.value));await y(a.type_education_id),l.value.subjects=a.subjects});const c=V([]),y=async a=>{if(c.value=[],l.value.subjects=[],a){const e=await v.value.find(u=>u.value==a);c.value=e.subjects}};return(a,e)=>{const u=D,i=k,w=j;return E(),G("div",null,[o(z,null,{default:r(()=>[o(O,null,{default:r(()=>[o(_,null,{default:r(()=>[o(m,null,{default:r(()=>[o(u,{"sub-title":"Formulario Grado",action:String(a.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:a.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),o(t(S),{ref_key:"formValidation",ref:p,"lazy-validation":""},{default:r(()=>[o(_,null,{default:r(()=>[o(m,{cols:"12",sm:"3"},{default:r(()=>[o(i,{clearable:"",modelValue:t(l).type_education_id,"onUpdate:modelValue":[e[0]||(e[0]=s=>t(l).type_education_id=s),e[2]||(e[2]=s=>y(s))],rules:["requiredValidator"in a?a.requiredValidator:t(f)],"error-messages":t(n).type_education_id,label:"Tipo",onChange:e[1]||(e[1]=s=>t(n).type_education_id=""),requiredField:!0,items:t(v)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),o(m,{cols:"12",sm:"3"},{default:r(()=>[o(w,{clearable:"",modelValue:t(l).name,"onUpdate:modelValue":e[3]||(e[3]=s=>t(l).name=s),rules:["requiredValidator"in a?a.requiredValidator:t(f)],"error-messages":t(n).name,label:"Nombre",onKeypress:e[4]||(e[4]=s=>t(n).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),o(m,{cols:"12",sm:"3"},{default:r(()=>[o(i,{clearable:"",modelValue:t(l).subjects,"onUpdate:modelValue":e[5]||(e[5]=s=>t(l).subjects=s),"item-value":"id","item-title":"name",label:"Materias",multiple:"",requiredField:!0,items:t(c),rules:["requiredValidator"in a?a.requiredValidator:t(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},512),o(_,null,{default:r(()=>[o(m,{cols:"12",class:"d-flex justify-center"},{default:r(()=>[o(R,{loading:t(F).form,color:"primary",onClick:e[6]||(e[6]=s=>q())},{default:r(()=>[U(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{de as default};

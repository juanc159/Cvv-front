import{V as R,r as p}from"./VForm-20c44a87.js";import{_ as j}from"./AppSelect.vue_vue_type_script_setup_true_lang-baa055e0.js";import{_ as L}from"./AppTextField.vue_vue_type_script_setup_true_lang-2f2861cd.js";import{d as P,r as g,Q as H,L as Q,ab as J,w as K,o as v,c as w,b as e,f as l,B as b,k as o,g as D,e as k,ae as F,F as O,m as W,p as X,az as Y,aA as Z,a6 as x,ac as h}from"./index-8d8d413c.js";import{u as ee}from"./useCrudCompanyStore-14e07698.js";import{u as ae}from"./useImageUpload-2559d352.js";import{b as I,V as q}from"./VCard-78fe1c41.js";import{V as $}from"./VCardText-a8b788ae.js";import{V as f}from"./VRow-a67fa24a.js";import{V as s}from"./VCol-06d5136a.js";import{V as le}from"./VFileInput-5ed4c205.js";import{V as re}from"./VImg-b4fd338d.js";import"./helpers-53221d8d.js";import"./VField-3d967249.js";import"./VSelect-466f5e2f.js";import"./VTextField-0814ad36.js";import"./VList-389c249b.js";import"./ssrBoot-f9dcd75c.js";import"./VAvatar-8ba78597.js";import"./VDivider-14a173eb.js";import"./dialog-transition-8b5e0333.js";import"./VMenu-74e4914d.js";import"./VChip-587d8c15.js";import"./sweetalert2.esm.all-562d67d8.js";/* empty css              */const oe={class:"d-flex justify-space-between"},Te=P({__name:"Form",setup(te){const d=g(ae()),_=X(),{toast:B}=Z(),y=g(),c=ee(),{form:i,loading:T,typeDetails:S}=H(c),m=g({}),C=g([]),A=async()=>{var a,V;const r=await((a=y.value)==null?void 0:a.validate());if(r!=null&&r.valid){const n=await c.fetchSave();(n==null?void 0:n.code)===200&&(C.value=[],m.value={},d.value.clearData(),await((V=y.value)==null?void 0:V.resetValidation())),(n==null?void 0:n.code)===422&&(m.value=n.errors??{})}else B("Faltan Campos Por Diligenciar","","danger")};Q(async()=>{c.clearForm(),_.params.id&&await c.fetchDataForm(Number(_.params.id),_.params.action)});const N=J(()=>i.value.arrayDetails.filter(r=>r.delete!=1)),G=()=>{i.value.arrayDetails.push({type_detail_id:null,icon:null,color:null,content:null,delete:0})},M=r=>{i.value.arrayDetails[r].id?i.value.arrayDetails[r].delete=1:i.value.arrayDetails.splice(r,1)};K(i,(r,a)=>{r.id?C.value.image_principal=[]:C.value.image_principal=[p(d.value.imageUrl)]},{deep:!0});const z=r=>{d.value.handleImageSelected(r),setTimeout(()=>{i.value.image_principal=d.value.imageFile},1e3)};return(r,a)=>{const V=Y,n=L,E=j;return v(),w("div",null,[e(V,{"sub-title":"Formulario de compañia",action:String(r.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:r.$router.back},null,8,["action","onChangeScreenBack"]),e(q,null,{default:l(()=>[e(I,{"primary-title":""},{default:l(()=>a[8]||(a[8]=[b("Información principal")])),_:1}),e($,null,{default:l(()=>[e(f,null,{default:l(()=>[e(s)]),_:1}),e(o(R),{ref_key:"formValidation",ref:y,"lazy-validation":""},{default:l(()=>[e(f,null,{default:l(()=>[e(s,{cols:"12",md:"4"},{default:l(()=>[e(n,{clearable:"",modelValue:o(i).name,"onUpdate:modelValue":a[0]||(a[0]=t=>o(i).name=t),rules:["requiredValidator"in r?r.requiredValidator:o(p)],"error-messages":o(m).name,label:"Nombre",onInput:a[1]||(a[1]=t=>o(m).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),e(s,{cols:"12",md:"4"},{default:l(()=>[e(n,{clearable:"",modelValue:o(i).slogan,"onUpdate:modelValue":a[2]||(a[2]=t=>o(i).slogan=t),rules:["requiredValidator"in r?r.requiredValidator:o(p)],"error-messages":o(m).slogan,label:"Eslogan",onInput:a[3]||(a[3]=t=>o(m).slogan=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),e(s,{cols:"12",md:"4"},{default:l(()=>[e(n,{clearable:"",modelValue:o(i).iframeGoogleMap,"onUpdate:modelValue":a[4]||(a[4]=t=>o(i).iframeGoogleMap=t),label:"iframeGoogleMap"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(s,{cols:"12",sm:"3"},{default:l(()=>[(v(),D(le,{accept:"image/*",key:o(d).key,onChange:a[5]||(a[5]=t=>z(t)),"onClick:clear":o(d).clearData},{label:l(()=>a[9]||(a[9]=[b(" Imagen Principal "),k("b",{class:"text-warning"},"*",-1)])),_:1},8,["onClick:clear"]))]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(q,{width:"400"},{default:l(()=>[e(re,{src:o(d).imageUrl??o(i).image_principal},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}),e(q,{class:"mt-5"},{default:l(()=>[e(I,{"primary-title":""},{default:l(()=>[k("div",oe,[a[11]||(a[11]=k("span",null,"Información de adicional",-1)),e(F,{color:"success",onClick:a[6]||(a[6]=t=>G())},{default:l(()=>a[10]||(a[10]=[b("Agregar")])),_:1})])]),_:1}),e($,null,{default:l(()=>[(v(!0),w(O,null,W(o(N),(t,U)=>(v(),D(f,{key:U},{default:l(()=>[e(s,{cols:"12",md:"2"},{default:l(()=>[e(E,{items:o(S),modelValue:t.type_detail_id,"onUpdate:modelValue":u=>t.type_detail_id=u,label:"Tipo",requiredField:!0},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{cols:"12",md:"2"},{default:l(()=>[e(n,{clearable:"",modelValue:t.icon,"onUpdate:modelValue":u=>t.icon=u,rules:["requiredValidator"in r?r.requiredValidator:o(p)],label:"Icono",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"2"},{default:l(()=>[e(n,{clearable:"",modelValue:t.color,"onUpdate:modelValue":u=>t.color=u,rules:["requiredValidator"in r?r.requiredValidator:o(p)],label:"Color",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"5"},{default:l(()=>[e(n,{clearable:"",modelValue:t.content,"onUpdate:modelValue":u=>t.content=u,rules:["requiredValidator"in r?r.requiredValidator:o(p)],label:"Contenido",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"1"},{default:l(()=>[e(F,{icon:"",size:"x-small",color:"error",variant:"text",class:"mt-6",onClick:u=>M(U)},{default:l(()=>[e(x,{icon:"tabler-trash"}),e(h,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{class:"mt-5"},{default:l(()=>[e(s,{cols:"12",class:"d-flex justify-center"},{default:l(()=>[e(F,{loading:o(T).form,color:"primary",onClick:a[7]||(a[7]=t=>A())},{default:l(()=>a[12]||(a[12]=[b(" Guardar ")])),_:1},8,["loading"])]),_:1})]),_:1})])}}});export{Te as default};

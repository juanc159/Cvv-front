import{d as T,a0 as B,k as R,$ as N,r as _,a6 as M,w as Q,ay as U,E as q,a as F,o as J,c as j,b as t,f as a,n as l,az as G,e as r,a4 as h,a1 as u,v as x,a7 as m,a9 as C,I as H,J as K}from"./index-8c389af3.js";import{u as L}from"./useCrudCompanyStore-3620ae34.js";import{V as w}from"./VCardText-7117b919.js";import{V as b}from"./VContainer-976259ee.js";import{V as O}from"./VSelect-7488be5c.js";import{V as W}from"./VSpacer-25f8ce6b.js";import{V as X}from"./VChip-03840711.js";import{V as Y}from"./VRow-a7e43a76.js";import{V as Z}from"./VPagination-2c76b541.js";import{V as tt}from"./VCard-6ec5f0a2.js";import{V as at}from"./VDataTable-631d8f68.js";import"./VTextField-cb9ff5f9.js";import"./VField-dd4f5130.js";import"./VImg-60b92111.js";import"./VList-ce46d66b.js";import"./ssrBoot-5165eff3.js";import"./VAvatar-c2c6df3a.js";import"./VDivider-85d289a2.js";import"./dialog-transition-93124d6f.js";import"./VMenu-e0085981.js";const et={class:"me-3",style:{"inline-size":"80px"}},ot=r("div",{class:"app-Company-search-filter d-flex align-center flex-wrap gap-4"},null,-1),st={colspan:"4"},nt={style:{"inline-size":"100"},class:"d-flex justify-center"},lt={class:"text-sm text-disabled"},It=T({__name:"Index",setup(rt){const p=L(),f=B(),v=R(),{currentPage:n,totalPage:y,lastPage:k,totalData:S,companies:d,loading:z}=N(p),I=[{title:"Nombre",key:"name"},{title:"Eslogan",key:"slogan"},{title:"Estado",key:"state"},{title:"Acciones",key:"actions"}],i=_(10),P=_(),$=M(()=>{const o=d.value.length?(n.value-1)*y.value+1:0,s=d.value.length+(n.value-1)*y.value;return`Mostrando ${o} a ${s} de ${S.value} registros`});Q(i,async()=>{n.value=1}),U([n,P,i],async()=>{await V()});const V=async(o=[])=>{await p.fetchAll({company_id:f.company.id,perPage:i.value,page:n.value,searchQuery:o})};q(async()=>{await V()});const D=async(o="create",s)=>{v.push({name:"Company-Form",params:{action:o,id:s}})},E=async(o,s)=>{const c=!o[s];(await p.changeState({id:o.id,value:c,field:s})).code==200&&(o.state=c)},A=o=>{f.company=o,v.push({name:"root"})};return(o,s)=>{const c=F("PreloadInterno");return J(),j("div",null,[t(tt,null,{default:a(()=>[t(w,null,{default:a(()=>[t(l(at),{headers:I,items:l(d),"items-per-page":5},G({top:a(()=>[t(b,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[r("div",et,[t(O,{modelValue:l(i),"onUpdate:modelValue":s[0]||(s[0]=e=>h(i)?i.value=e:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(W),ot]),_:1})]),"item.state":a(({item:e})=>[t(X,{color:e.state==1?"success":"error",onClick:g=>E(e,"state")},{default:a(()=>[t(u,{start:"",size:"16",icon:e.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),r("span",null,x(e.state==1?"Activo":"Inactivo"),1),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":a(({item:e})=>[t(C,{icon:"",size:"x-small",color:"default",variant:"text",onClick:g=>D("edit",e.id)},{default:a(()=>[t(u,{size:"22",icon:"tabler-edit"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),H(t(C,{size:"x-small",color:"default",icon:"",variant:"text",onClick:g=>A(e)},{default:a(()=>[t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Ingresar"}),t(u,{size:"22",icon:"tabler-square-rounded-arrow-right"})]),_:2},1032,["onClick"]),[[K,e.state==1]])]),bottom:a(()=>[t(w,{class:"pt-2"},{default:a(()=>[t(Y,null,{default:a(()=>[t(b,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[r("span",lt,x(l($)),1),t(Z,{modelValue:l(n),"onUpdate:modelValue":s[1]||(s[1]=e=>h(n)?n.value=e:null),size:"small","total-visible":5,length:l(k)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[l(z).table?{name:"body",fn:a(()=>[r("tr",null,[r("td",st,[r("div",nt,[t(c)])])])]),key:"0"}:void 0]),1032,["items"])]),_:1})]),_:1})])}}});export{It as default};

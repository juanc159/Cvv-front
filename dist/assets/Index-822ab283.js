import{a as F}from"./formatters-1588bd0d.js";import{u as R}from"./useCrudTeacherStore-51f9c70f.js";import{d as M,a0 as U,k as Q,$ as q,r as G,E as H,w as b,ay as J,a6 as K,a as O,o as p,c as f,b as e,f as a,t as k,n as l,az as W,e as r,a4 as w,a9 as v,x as X,g as T,v as y,F as S,i as Y,a1 as h,a7 as V,y as Z}from"./index-9d7b2ae2.js";import{S as ee}from"./sweetalert2.all-ae952bba.js";import{b as te,V as ae}from"./VCard-76b23484.js";import{V as z}from"./VCardText-750086f9.js";import{V as D}from"./VContainer-e4557587.js";import{V as oe}from"./VSelect-bb23a69e.js";import{V as se}from"./VSpacer-cba730bf.js";import{V as ne}from"./VAvatar-2ebb0d40.js";import{V as le}from"./VImg-191ee63c.js";import{V as ie,a as re,b as ce}from"./VList-a7b918ba.js";import{V as pe}from"./VChip-4c9bcae3.js";import{V as ue}from"./VRow-b2ea4d07.js";import{V as de}from"./VPagination-75215ed0.js";import{V as me}from"./VDataTable-d10b6402.js";import{V as fe}from"./VDivider-0d650db9.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VTextField-43cf00db.js";import"./VField-69296a2c.js";import"./dialog-transition-e2940ac0.js";import"./VMenu-a32e58ee.js";import"./ssrBoot-a6d1e4cf.js";const ve={class:"me-3",style:{"inline-size":"80px"}},ye={class:"app-teacher-search-filter d-flex align-center flex-wrap gap-4"},he={key:1},Ve={colspan:"10"},_e={style:{"inline-size":"100"},class:"d-flex justify-center"},ge={class:"text-sm text-disabled"},He=M({__name:"Index",setup(xe){const u=R(),P=U(),C=Q(),{currentPage:n,totalPage:d,lastPage:I,totalData:B,teachers:_,loading:$}=q(u),i=G(10),g=async(s=[])=>{await u.fetchAll({company_id:P.company.id,perPage:i.value,page:n.value,searchQuery:s})};H(async()=>{await g()}),b(n,async()=>{n.value>d.value&&(n.value=d.value)}),b(i,async()=>{n.value=1}),J([n,i],async()=>{await g()});const A=K(()=>{const s=_.value.length?(n.value-1)*d.value+1:0,o=_.value.length+(n.value-1)*d.value;return`Mostrando ${s} a ${o} de ${B.value} registros`}),x=async(s="create",o)=>{if(s=="planning")return C.push({name:"Teacher-Planning",params:{id:o}}),!1;C.push({name:"Teacher-Form",params:{action:s,id:o}})},E=async(s,o)=>{const m=!s[o];(await u.changeState({id:s.id,value:m,field:o})).code==200&&(s.state=m)},N=async s=>{ee.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async o=>{o.isConfirmed?(await u.fetchDelete(s),await g()):o.isDenied})},j=[{title:"Acciones",key:"actions"},{title:"Estado",key:"state"},{title:"Foto",key:"photo"},{title:"Tipo de educación",key:"type_education_name"},{title:"Cargo",key:"job_position_name"},{title:"Nombre(s)",key:"name"},{title:"Apellido(s)",key:"last_name"},{title:"Correo",key:"email"},{title:"Telefono",key:"phone"},{title:"Materias",key:"subjects"}];return(s,o)=>{const m=O("PreloadInterno");return p(),f("div",null,[e(ae,null,{default:a(()=>[e(te,{"primary-title":""},{default:a(()=>[k("Listado de docentes")]),_:1}),e(z,null,{default:a(()=>[e(l(me),{headers:j,items:l(_),"items-per-page":l(i)},W({top:a(()=>[e(D,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[r("div",ve,[e(oe,{modelValue:l(i),"onUpdate:modelValue":o[0]||(o[0]=t=>w(i)?i.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(se),r("div",ye,[e(v,{color:"primary",onClick:o[1]||(o[1]=t=>x())},{default:a(()=>[k(" Crear Docente ")]),_:1})])]),_:1})]),"item.photo":a(({item:t})=>[e(ne,{color:t.photo?"":"primary",class:X(t.photo?null:"v-avatar-light-bg primary--text"),variant:t.photo?void 0:"tonal"},{default:a(()=>[t.photo?(p(),T(le,{key:0,src:t.photo},null,8,["src"])):(p(),f("span",he,y(("avatarText"in s?s.avatarText:l(F))(t.name+" "+t.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.subjects":a(({item:t})=>[e(ie,{border:""},{default:a(()=>[(p(!0),f(S,null,Y(t.subjects,(c,L)=>(p(),f(S,{key:c.name},[e(re,null,{default:a(()=>[e(ce,null,{default:a(()=>[k(y(c),1)]),_:2},1024)]),_:2},1024),L!==t.subjects.length-1?(p(),T(fe,{key:0})):Z("",!0)],64))),128))]),_:2},1024)]),"item.state":a(({item:t})=>[e(pe,{color:t.state==1?"success":"error",onClick:c=>E(t,"state")},{default:a(()=>[e(h,{start:"",size:"16",icon:t.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),r("span",null,y(t.state==1?"Activo":"Inactivo"),1),e(V,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":a(({item:t})=>[e(v,{icon:"",size:"x-small",color:"error",variant:"text",onClick:c=>N(t.id)},{default:a(()=>[e(h,{size:"22",icon:"tabler-trash"}),e(V,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:c=>x("edit",t.id)},{default:a(()=>[e(h,{size:"22",icon:"tabler-edit"}),e(V,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:c=>x("planning",t.id)},{default:a(()=>[e(h,{size:"22",icon:"tabler-file"}),e(V,{location:"top",transition:"scale-transition",activator:"parent",text:"Planificación"})]),_:2},1032,["onClick"])]),bottom:a(()=>[e(z,{class:"pt-2"},{default:a(()=>[e(ue,null,{default:a(()=>[e(D,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[r("span",ge,y(l(A)),1),e(de,{modelValue:l(n),"onUpdate:modelValue":o[2]||(o[2]=t=>w(n)?n.value=t:null),size:"small","total-visible":5,length:l(I)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[l($).table?{name:"body",fn:a(()=>[r("tr",null,[r("td",Ve,[r("div",_e,[e(m)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]),_:1})]),_:1})])}}});export{He as default};

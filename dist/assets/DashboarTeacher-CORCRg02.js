import{s as W,d as X,b as Y}from"./helpers-Bz2xpvoX.js";import{a as ee}from"./formatters-BkjYgcgG.js";import{_ as ae}from"./ModalChangePassword.vue_vue_type_script_setup_true_lang-DXt0SCX8.js";import{V as oe,r as R}from"./VForm-C-J07ypw.js";import{_ as le}from"./AppSelect.vue_vue_type_script_setup_true_lang-Cv0VMSgK.js";import{_ as te}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-hPeKlSTh.js";import{d as K,U as O,r as g,ax as z,o as u,c as S,b as e,f as a,k as l,af as A,g as h,G as L,e as n,C,D as f,ad as M,ay as se,R as ne,Z as ie,M as re,a8 as F,F as G,p as Z,$ as de,a0 as ue}from"./index-CznAJUNm.js";import{u as ce,V as me}from"./VFileInput-u6w9Qu2V.js";import{V as fe}from"./VDialog-C9QJNRET.js";import{V as pe,a as _e}from"./VToolbar-fer-bsiI.js";import{V as U,b as B,a as ve}from"./VCard-5OH7pVxy.js";import{V as k}from"./VGrid-S5P3_2CB.js";import{V as x,a as V}from"./VRow-BvTNpEMR.js";import{V as ge}from"./VInput-BvtlOLRv.js";import{V as Ve}from"./VImg-BVFTraCN.js";import{V as H}from"./VAvatar-C1yJQ8rR.js";import{V as J}from"./VDivider-D4BFYa9Q.js";import{V as ye}from"./VDataTable-CcNy76IE.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-2GBt7OCP.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-DzHEGxfk.js";import"./VTooltip-aSoFDv85.js";import"./VOverlay-DWaqCM55.js";import"./forwardRefs-C-GTDzx5.js";import"./VTextField-DZyT_NhB.js";import"./VSelect-Cu1w2w4X.js";import"./VList-Bn6pqZ1U.js";import"./ssrBoot-DUem_QQI.js";import"./dialog-transition-BfYM7JuF.js";import"./VMenu-XDyUo_cs.js";import"./VCheckboxBtn-Ci0JliML.js";import"./VSelectionControl-Bo6_PREe.js";import"./VChip-MVqukxAK.js";import"./sweetalert2.esm.all-DOYwHpwi.js";const be=n("b",{class:"text-warning"},"*",-1),ke=K({__name:"ModalUploadExcelNomina",emits:["execute"],setup(D,{expose:p,emit:Q}){const w=O(),$=g({}),{toast:q}=se(),d=z({titleDialog:"Subir Nómina",isDialogVisible:!1,isLoading:!1}),m=()=>{d.isDialogVisible=!d.isDialogVisible},P=async()=>{m(),i()},T=g(),_=g({company_id:null,type_education_id:null,archive:null}),v=g(ce());v.value.allowedExtensions=["xls","xlsx"];const E=g([]),t=z({form:!1}),i=async()=>{var r;t.form=!0;const{data:s,response:o}=await A("note-dataForm").get();t.form=!1,(r=o.value)!=null&&r.ok&&s.value&&(E.value=s.value.typeEducations)},b=async()=>{var o,r;_.value.archive=v.value.imageFile,_.value.company_id=w.user.company_id;const s=await((o=T.value)==null?void 0:o.validate());if(s!=null&&s.valid){const y=new FormData;for(const j in _.value)y.append(j,_.value[j]);t.form=!0;const{data:c,response:N}=await A("note-store").post(y);t.form=!1,(r=N.value)!=null&&r.ok&&c.value&&m()}else q("Faltan Campos Por Diligenciar","","danger")};return p({openDialog:P}),(s,o)=>{const r=te,y=le;return u(),S("div",null,[e(fe,{modelValue:l(d).isDialogVisible,"onUpdate:modelValue":o[4]||(o[4]=c=>l(d).isDialogVisible=c),persistent:"","max-width":"40rem",transition:"dialog-transition"},{default:a(()=>[l(t).form?L("",!0):(u(),h(r,{key:0,onClick:o[0]||(o[0]=c=>m())})),n("div",null,[e(pe,{color:"primary"},{default:a(()=>[e(_e,null,{default:a(()=>[C(f(l(d).titleDialog),1)]),_:1})]),_:1})]),e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[e(oe,{ref_key:"formValidation",ref:T,"lazy-validation":""},{default:a(()=>[e(x,null,{default:a(()=>[e(V,{cols:"12",sm:"6"},{default:a(()=>[e(y,{clearable:"",modelValue:l(_).type_education_id,"onUpdate:modelValue":o[1]||(o[1]=c=>l(_).type_education_id=c),rules:["requiredValidator"in s?s.requiredValidator:l(R)],"error-messages":l($).type_education_id,label:"Tipo",onChange:o[2]||(o[2]=c=>l($).type_education_id=""),requiredField:!0,items:l(E)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:a(()=>[e(ge,null,{default:a(()=>[C("Archivo "),be]),_:1}),(u(),h(me,{key:l(v).key,onChange:l(v).handleImageSelected,"onClick:clear":l(v).clearData,rules:["requiredValidator"in s?s.requiredValidator:l(R)]},null,8,["onChange","onClick:clear","rules"]))]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(V,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(M,{loading:l(t).form,disbaled:l(t).form,color:"primary",onClick:o[3]||(o[3]=c=>b())},{default:a(()=>[C(" Cargar información ")]),_:1},8,["loading","disbaled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),I=D=>(de("data-v-06f24379"),D=D(),ue(),D),xe={class:"title-text"},Ce={class:"membership-pricing d-flex flex-column align-center h-100 justify-center"},De={class:"me-auto"},we={class:"d-flex align-center mb-6"},Te=I(()=>n("span",null,"Descargar Nómina",-1)),Ne={class:"d-flex align-center mb-0"},Se=I(()=>n("span",null,"Subir Nómina",-1)),$e={class:"ms-auto ps-4"},Ee={class:"d-flex align-center mb-0"},Fe=I(()=>n("span",null,"Cambiar contraseña",-1)),Be=I(()=>n("h2",null,"Planificaciones ",-1)),Me={class:"d-flex align-center py-1"},Ue=["onClick"],Ae=K({__name:"DashboarTeacher",setup(D){const p=O(),{company:Q,user:w}=ne(p),$=ie(()=>{var i;const t=((i=p.user)==null?void 0:i.full_name)||"";return t||"S/N"}),q=[{title:"Título",key:"name",sortable:!1}],d=z({form:!1,excel:!1}),m=g();re(async()=>{var s,o;d.form=!0;const{data:t,response:i,error:b}=await A("/teacher-planningShow/"+((s=p.user)==null?void 0:s.id)).get();d.form=!1,(o=i.value)!=null&&o.ok&&t.value&&(m.value=t.value.data)});const P=async t=>{var s;d.excel=!0;const{data:i,response:b}=await A("/teacher-downloadConsolidated/"+t.id).get();if(d.excel=!1,(s=b.value)!=null&&s.ok&&i.value){const o="Nómina "+t.full_name;Y(i.value.excel,o)}},T=g(),_=()=>{T.value.openDialog()},v=g(),E=()=>{v.value.openDialog(w.value.id,!1)};return(t,i)=>{const b=ke,s=ae;return u(),S("div",null,[e(U,{class:"mb-6"},{default:a(()=>[e(B,{class:"d-flex justify-center align-center title-container"},{default:a(()=>[n("h3",xe,f(l(w).full_name),1)]),_:1}),e(x,null,{default:a(()=>[e(V,{cols:"12",sm:"4",md:"12",lg:"5",class:"member-pricing-bg text-center"},{default:a(()=>{var o;return[n("div",Ce,[(o=l(p).user)!=null&&o.photo?(u(),h(H,{key:0,color:"primary",variant:"tonal",size:"250"},{default:a(()=>{var r;return[e(Ve,{src:("storageBack"in t?t.storageBack:l(W))((r=l(p).user)==null?void 0:r.photo)},null,8,["src"])]}),_:1})):(u(),h(H,{key:1,color:"primary",variant:"tonal",size:"50"},{default:a(()=>[C(f(("avatarText"in t?t.avatarText:l(ee))(l($))),1)]),_:1}))])]}),_:1}),e(V,{cols:"12",sm:"8",md:"12",lg:"7"},{default:a(()=>[e(ve,null,{default:a(()=>[e(B,null,{default:a(()=>[C("¡Bienvenido! 🎉")]),_:1})]),_:1}),e(k,null,{default:a(()=>[C(" Estimado profesor, En esta sección puede consultar todo lo relacionado con su planificación. Se agradece que revise cuidadosamente y, ante cualquier novedad, informe. Muchas gracias. ")]),_:1}),e(k,null,{default:a(()=>[e(J)]),_:1}),e(k,{class:"d-flex justify-center"},{default:a(()=>[n("div",De,[n("p",we,[e(M,{variant:"outlined",disabled:l(d).excel,loading:l(d).excel,onClick:i[0]||(i[0]=o=>P(l(p).user))},{default:a(()=>[e(F,{icon:"tabler-download"}),Te]),_:1},8,["disabled","loading"])]),n("p",Ne,[e(M,{disabled:l(w).blockData,variant:"outlined",onClick:i[1]||(i[1]=o=>_())},{default:a(()=>[e(F,{icon:"tabler-download"}),Se]),_:1},8,["disabled"])])]),t.$vuetify.display.smAndUp?(u(),h(J,{key:0,vertical:"",inset:""})):L("",!0),n("div",$e,[n("p",Ee,[e(M,{variant:"outlined",onClick:i[2]||(i[2]=o=>E())},{default:a(()=>[e(F,{icon:"tabler-lock-open"}),Fe]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,{class:"mb-6",outlined:""},{default:a(()=>[e(B,{class:"d-flex justify-center"},{default:a(()=>[Be]),_:1}),l(m)?(u(),h(k,{key:0},{default:a(()=>[e(x,null,{default:a(()=>[e(V,{cols:"12",sm:"6"},{default:a(()=>{var o,r;return[n("h2",null,f((o=l(m))==null?void 0:o.name)+" "+f((r=l(m))==null?void 0:r.last_name),1)]}),_:1})]),_:1}),e(x,null,{default:a(()=>[(u(!0),S(G,null,Z(l(m).complementaries,(o,r)=>(u(),h(V,{cols:"12",key:r},{default:a(()=>[e(U,null,{default:a(()=>[e(B,{"primary-title":""},{default:a(()=>[n("h2",null,"Grado: "+f(o.grade_name)+" "+f(o.section_name),1)]),_:2},1024),e(k,null,{default:a(()=>[(u(!0),S(G,null,Z(o.subjects,(y,c)=>(u(),S("div",{key:c},[n("h3",null,"Planificacion: "+f(y.title),1),e(x,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(ye,{headers:q,items:y.files,"items-per-page":999},{"item.name":a(({item:N,index:j})=>[n("div",Me,[e(F,{icon:"tabler-file",color:"primary"}),n("a",{href:"#",onClick:Ie=>("descargarArchivo"in t?t.descargarArchivo:l(X))(N.file,N.name)},[n("b",null,f(N.name),1)],8,Ue)])]),bottom:a(()=>[]),_:2},1032,["items"])]),_:2},1024)]),_:2},1024)]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):L("",!0)]),_:1}),e(b,{ref_key:"refModalUploadExcelNomina",ref:T},null,512),e(s,{ref_key:"refModalChangePassword",ref:v},null,512)])}}}),Va=he(Ae,[["__scopeId","data-v-06f24379"]]);export{Va as default};

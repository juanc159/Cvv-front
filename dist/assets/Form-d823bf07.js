import{V as S,r as I}from"./VForm-09f36129.js";import{d as x,p as T,r as s,R as D,Q as N,L as R,o as g,c as $,b as a,f as e,k as n,g as j,B as _,ag as q,e as A,aA as E,aB as U,aC as z}from"./index-a73ef7a4.js";import{u as v}from"./useImageUpload-1a3a20dc.js";import{u as G}from"./useCrudBannerStore-c7c6296e.js";import{V as H}from"./VCardText-f167dd9c.js";import{V as c}from"./VRow-be98792f.js";import{V as m}from"./VCol-38ed283b.js";import{V as L}from"./VFileInput-2f0c9cb7.js";import{V as M}from"./VImg-92b32f5d.js";import{V as P}from"./VCard-3c846ebb.js";import"./helpers-3edea678.js";import"./VField-c03f9512.js";import"./sweetalert2.all-e795d634.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VChip-eb33449f.js";import"./VAvatar-c8033367.js";const Q=A("b",{class:"text-warning"},"*",-1),ma=x({__name:"Form",setup(J){const d=T(),{toast:k}=z(),f=s(),i=G(),C=D(),{form:p,loading:B}=N(i),V=s({}),h=s(v()),y=s([]),l=s(v()),b=["jpg","jpeg","png"];l.value.allowedExtensions=b;const F=async()=>{var r,u;p.value.company_id=C.company.id;const o=await((r=f.value)==null?void 0:r.validate());if(o!=null&&o.valid){const t=await i.fetchSave();(t==null?void 0:t.code)===200&&(y.value=[],V.value={},h.value.clearData(),await((u=f.value)==null?void 0:u.resetValidation()),E.push({name:"Banner-Index"})),(t==null?void 0:t.code)===422&&(V.value=t.errors??{})}else k("Faltan Campos Por Diligenciar","","danger")},w=o=>{l.value.handleImageSelected(o),setTimeout(()=>{p.value.path=l.value.imageFile},1e3)};return R(async()=>{i.clearForm(),d.params.id&&await i.fetchDataForm(Number(d.params.id),d.params.action)}),(o,r)=>{const u=U;return g(),$("div",null,[a(P,null,{default:e(()=>[a(H,null,{default:e(()=>[a(c,null,{default:e(()=>[a(m,null,{default:e(()=>[a(u,{"sub-title":"Formulario Banner",action:String(o.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:o.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),a(n(S),{ref_key:"formValidation",ref:f,"lazy-validation":""},{default:e(()=>[a(c,null,{default:e(()=>[a(m,{cols:"12",sm:"3"},{default:e(()=>[(g(),j(L,{accept:"image/*",rules:["requiredValidator"in o?o.requiredValidator:n(I)],key:n(l).key,onChange:r[0]||(r[0]=t=>w(t)),"onClick:clear":n(l).clearData},{label:e(()=>[_(" ImagenÂ "),Q]),_:1},8,["rules","onClick:clear"]))]),_:1})]),_:1}),a(c,null,{default:e(()=>[a(m,{cols:"12"},{default:e(()=>[a(M,{src:n(l).imageUrl??n(p).path},null,8,["src"])]),_:1})]),_:1}),a(c,null,{default:e(()=>[a(m,{cols:"12",class:"d-flex justify-center"},{default:e(()=>[a(q,{loading:n(B).form,color:"primary",onClick:r[1]||(r[1]=t=>F())},{default:e(()=>[_(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])}}});export{ma as default};

import{s as z,d as X,b as ee}from"./helpers-Dh_CHnDW.js";import{a as ae}from"./formatters-Bw6q65lt.js";import{_ as oe}from"./ModalChangePassword.vue_vue_type_script_setup_true_lang-BnjR0eMd.js";import{r as G}from"./validators-BRob6R3L.js";import{_ as te}from"./AppSelect.vue_vue_type_script_setup_true_lang-huC62Px3.js";import{_ as le}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-ClnwK2-I.js";import{d as O,ab as se,V as Q,r as v,b5 as L,c as B,o as d,b as e,l as o,f as a,h as y,y as j,e as i,D,E as p,b6 as ne,a9 as U,b7 as R,aS as ie,U as re,Y as de,N as ue,aT as Y,a7 as M,F as Z,q as H,Z as ce,$ as me}from"./index-CPwhtSgK.js";import{u as fe,V as pe}from"./VFileInput-CY-E-7zd.js";import{V as _e}from"./VDialog-CcFFQs7Y.js";import{V as ge,a as ve}from"./VToolbar-CHqmo0eC.js";import{V as q,a as A,c as be}from"./VCard-B7sj5Nmp.js";import{V as x}from"./VCardText-BO_T3VgW.js";import{V as Ve}from"./VForm-BKIHj-pQ.js";import{V as C,a as b}from"./VRow-BLWzftUR.js";import{V as J}from"./VAvatar-DFdPWHkH.js";import{V as ye}from"./VImg-CBVvkvKd.js";import{V as K}from"./VDivider-DhMtNSTJ.js";import{V as he}from"./VDataTable-5i9ZnZGD.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-2GBt7OCP.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-5lzXnBPD.js";import"./VTextField-DVAJ4D6q.js";/* empty css                   */import"./VCounter-C5J3IHoT.js";import"./VSelect-COdd_cGw.js";import"./VList-CkSi65FC.js";import"./ssrBoot-BVITu9xw.js";import"./dialog-transition-BzJz2Y5A.js";import"./VMenu-DlCvdLnT.js";import"./VCheckboxBtn-CgMwaTT1.js";import"./VSelectionControl-CBfg-izY.js";import"./VChip-CBXLIrq5.js";import"./sweetalert2.esm.all-DV3w3JmD.js";/* empty css              */import"./VTable-D3Etz31k.js";import"./filter-ByJ5Yngr.js";const xe=i("b",{class:"text-warning"},"*",-1),Ce=O({__name:"ModalUploadExcelNomina",emits:["execute"],setup(w,{expose:_,emit:W}){const S=se(),T=Q(),E=v({}),{toast:g}=ie(),u=L({titleDialog:"Subir Nómina",isDialogVisible:!1,isLoading:!1}),N=()=>{u.isDialogVisible=!u.isDialogVisible},$=async()=>{N(),h()},F=v(),c=v({company_id:null,type_education_id:null,archive:null}),V=v(fe());V.value.allowedExtensions=["xls","xlsx"];const n=v([]),s=L({form:!1}),h=async()=>{s.form=!0;const{data:t,response:l}=await R("note-dataForm").get();s.form=!1,l.status==200&&t&&(n.value=t.typeEducations)},m=async()=>{var l;c.value.archive=V.value.imageFile,c.value.company_id=T.user.company_id;const t=await((l=F.value)==null?void 0:l.validate());if(t!=null&&t.valid){const f=new FormData;for(const P in c.value)f.append(P,c.value[P]);f.append("user_id",String(T.user.id)),f.append("teacher_id",String(T.user.id)),s.form=!0;const{data:k,response:r}=await R("note-store").post(f);s.form=!1,r.status==200&&k&&(S.startLoading(k.batch_id),N())}else g("Faltan Campos Por Diligenciar","","danger")};return _({openDialog:$}),(t,l)=>{const f=le,k=te;return d(),B("div",null,[e(_e,{modelValue:o(u).isDialogVisible,"onUpdate:modelValue":l[4]||(l[4]=r=>o(u).isDialogVisible=r),persistent:"","max-width":"40rem",transition:"dialog-transition"},{default:a(()=>[o(s).form?j("",!0):(d(),y(f,{key:0,onClick:l[0]||(l[0]=r=>N())})),i("div",null,[e(ge,{color:"primary"},{default:a(()=>[e(ve,null,{default:a(()=>[D(p(o(u).titleDialog),1)]),_:1})]),_:1})]),e(q,null,{default:a(()=>[e(x,null,{default:a(()=>[e(Ve,{ref_key:"formValidation",ref:F,"lazy-validation":""},{default:a(()=>[e(C,null,{default:a(()=>[e(b,{cols:"12",sm:"6"},{default:a(()=>[e(k,{clearable:"",modelValue:o(c).type_education_id,"onUpdate:modelValue":l[1]||(l[1]=r=>o(c).type_education_id=r),rules:["requiredValidator"in t?t.requiredValidator:o(G)],"error-messages":o(E).type_education_id,label:"Tipo",onChange:l[2]||(l[2]=r=>o(E).type_education_id=""),requiredField:!0,items:o(n)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),e(b,{cols:"12",sm:"6"},{default:a(()=>[e(ne,null,{default:a(()=>[D("Archivo "),xe]),_:1}),(d(),y(pe,{key:o(V).key,onChange:o(V).handleImageSelected,"onClick:clear":o(V).clearData,rules:["requiredValidator"in t?t.requiredValidator:o(G)]},null,8,["onChange","onClick:clear","rules"]))]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(U,{loading:o(s).form,disbaled:o(s).form,color:"primary",onClick:l[3]||(l[3]=r=>m())},{default:a(()=>[D(" Cargar información ")]),_:1},8,["loading","disbaled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),I=w=>(ce("data-v-943b526b"),w=w(),me(),w),De={class:"title-text"},we={class:"membership-pricing d-flex flex-column align-center h-100 justify-center"},Se={class:"me-auto"},Te={class:"d-flex align-center mb-6"},Ne=I(()=>i("span",null,"Descargar Nómina",-1)),Be={class:"d-flex align-center mb-0"},Ee=I(()=>i("span",null,"Subir Nómina",-1)),$e={class:"ms-auto ps-4"},Fe={class:"d-flex align-center mb-0"},Me=I(()=>i("span",null,"Cambiar contraseña",-1)),Ae=I(()=>i("h2",null,"Planificaciones ",-1)),Ue={class:"d-flex align-center py-1"},qe=["onClick"],Ie=O({__name:"DashboarTeacher",setup(w){const _=Q(),{company:W,user:S}=re(_),T=de(()=>{var s;const n=((s=_.user)==null?void 0:s.full_name)||"";return n||"S/N"}),E=[{title:"Título",key:"name",sortable:!1}],g=L({form:!1,excel:!1}),u=v();ue(async()=>{var m,t;g.form=!0;const{data:n,response:s,error:h}=await Y("/teacher-planningShow/"+((m=_.user)==null?void 0:m.id)).get();g.form=!1,(t=s.value)!=null&&t.ok&&n.value&&(u.value=n.value.data)});const N=async n=>{var m;g.excel=!0;const{data:s,response:h}=await Y("/teacher-downloadConsolidated/"+n.id).get();if(g.excel=!1,(m=h.value)!=null&&m.ok&&s.value){const t="Nómina "+n.full_name;ee(s.value.excel,t)}},$=v(),F=()=>{$.value.openDialog()},c=v(),V=()=>{c.value.openDialog(S.value.id,!1)};return(n,s)=>{const h=Ce,m=oe;return d(),B("div",null,[e(q,{class:"mb-6"},{default:a(()=>[e(A,{class:"d-flex justify-center align-center title-container"},{default:a(()=>[i("h3",De,p(o(S).full_name),1)]),_:1}),e(C,null,{default:a(()=>[e(b,{cols:"12",sm:"4",md:"12",lg:"5",class:"member-pricing-bg text-center"},{default:a(()=>{var t;return[i("div",we,[(t=o(_).user)!=null&&t.photo?(d(),y(J,{key:0,color:"primary",variant:"tonal",size:"250"},{default:a(()=>{var l;return[e(ye,{src:("storageBack"in n?n.storageBack:o(z))((l=o(_).user)==null?void 0:l.photo)},null,8,["src"])]}),_:1})):(d(),y(J,{key:1,color:"primary",variant:"tonal",size:"50"},{default:a(()=>[D(p(("avatarText"in n?n.avatarText:o(ae))(o(T))),1)]),_:1}))])]}),_:1}),e(b,{cols:"12",sm:"8",md:"12",lg:"7"},{default:a(()=>[e(be,null,{default:a(()=>[e(A,null,{default:a(()=>[D("¡Bienvenido! 🎉")]),_:1})]),_:1}),e(x,null,{default:a(()=>[D(" Estimado profesor, En esta sección puede consultar todo lo relacionado con su planificación. Se agradece que revise cuidadosamente y, ante cualquier novedad, informe. Muchas gracias. ")]),_:1}),e(x,null,{default:a(()=>[e(K)]),_:1}),e(x,{class:"d-flex justify-center"},{default:a(()=>[i("div",Se,[i("p",Te,[e(U,{variant:"outlined",disabled:o(g).excel,loading:o(g).excel,onClick:s[0]||(s[0]=t=>N(o(_).user))},{default:a(()=>[e(M,{icon:"tabler-download"}),Ne]),_:1},8,["disabled","loading"])]),i("p",Be,[e(U,{disabled:o(S).blockData,variant:"outlined",onClick:s[1]||(s[1]=t=>F())},{default:a(()=>[e(M,{icon:"tabler-download"}),Ee]),_:1},8,["disabled"])])]),n.$vuetify.display.smAndUp?(d(),y(K,{key:0,vertical:"",inset:""})):j("",!0),i("div",$e,[i("p",Fe,[e(U,{variant:"outlined",onClick:s[2]||(s[2]=t=>V())},{default:a(()=>[e(M,{icon:"tabler-lock-open"}),Me]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{class:"mb-6",outlined:""},{default:a(()=>[e(A,{class:"d-flex justify-center"},{default:a(()=>[Ae]),_:1}),o(u)?(d(),y(x,{key:0},{default:a(()=>[e(C,null,{default:a(()=>[e(b,{cols:"12",sm:"6"},{default:a(()=>{var t,l;return[i("h2",null,p((t=o(u))==null?void 0:t.name)+" "+p((l=o(u))==null?void 0:l.last_name),1)]}),_:1})]),_:1}),e(C,null,{default:a(()=>[(d(!0),B(Z,null,H(o(u).complementaries,(t,l)=>(d(),y(b,{cols:"12",key:l},{default:a(()=>[e(q,null,{default:a(()=>[e(A,{"primary-title":""},{default:a(()=>[i("h2",null,"Grado: "+p(t.grade_name)+" "+p(t.section_name),1)]),_:2},1024),e(x,null,{default:a(()=>[(d(!0),B(Z,null,H(t.subjects,(f,k)=>(d(),B("div",{key:k},[i("h3",null,"Planificacion: "+p(f.title),1),e(C,null,{default:a(()=>[e(b,{cols:"12"},{default:a(()=>[e(he,{headers:E,items:f.files,"items-per-page":999},{"item.name":a(({item:r,index:P})=>[i("div",Ue,[e(M,{icon:"tabler-file",color:"primary"}),i("a",{href:"#",onClick:Pe=>("descargarArchivo"in n?n.descargarArchivo:o(X))(("storageBack"in n?n.storageBack:o(z))(r.file),r.name)},[i("b",null,p(r.name),1)],8,qe)])]),bottom:a(()=>[]),_:2},1032,["items"])]),_:2},1024)]),_:2},1024)]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):j("",!0)]),_:1}),e(h,{ref_key:"refModalUploadExcelNomina",ref:$},null,512),e(m,{ref_key:"refModalChangePassword",ref:c},null,512)])}}}),ka=ke(Ie,[["__scopeId","data-v-943b526b"]]);export{ka as default};

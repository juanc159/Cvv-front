import{V as S,r as f}from"./VForm-20c44a87.js";import{_ as w}from"./AppTextField.vue_vue_type_script_setup_true_lang-2f2861cd.js";import{_ as j}from"./AppSelect.vue_vue_type_script_setup_true_lang-baa055e0.js";import{d as $,r as V,R as B,Q as T,L as N,o as A,c as G,b as t,f as o,k as r,ae as R,B as E,p as U,ay as z,az as D,aA as J}from"./index-8d8d413c.js";import{u as M}from"./useCrudGradeStore-dabf514f.js";import{V as O}from"./VCardText-a8b788ae.js";import{V as b}from"./VRow-a67fa24a.js";import{V as d}from"./VCol-06d5136a.js";import{V as H}from"./VCard-78fe1c41.js";import"./helpers-53221d8d.js";import"./VField-3d967249.js";import"./VTextField-0814ad36.js";import"./VImg-b4fd338d.js";import"./VSelect-466f5e2f.js";import"./VList-389c249b.js";import"./ssrBoot-f9dcd75c.js";import"./VAvatar-8ba78597.js";import"./VDivider-14a173eb.js";import"./dialog-transition-8b5e0333.js";import"./VMenu-74e4914d.js";import"./VChip-587d8c15.js";/* empty css              */const pe=$({__name:"Form",setup(I){const _=U(),{toast:g}=J(),p=V(),m=M(),C=B(),{form:l,loading:F,typeEducations:v}=T(m),n=V({}),k=async()=>{var e,u;l.value.company_id=C.company.id;const a=await((e=p.value)==null?void 0:e.validate());if(a!=null&&a.valid){const s=await m.fetchSave();(s==null?void 0:s.code)===200&&(n.value={},await((u=p.value)==null?void 0:u.resetValidation()),z.push({name:"Grade-Index"})),(s==null?void 0:s.code)===422&&(n.value=s.errors??{})}else g("Faltan Campos Por Diligenciar","","danger")};N(async()=>{m.clearForm(),await m.fetchDataForm(Number(_.params.id),_.params.action);const a=JSON.parse(JSON.stringify(l.value));await y(a.type_education_id),l.value.subjects=a.subjects});const c=V([]),y=async a=>{if(c.value=[],l.value.subjects=[],a){const e=await v.value.find(u=>u.value==a);c.value=e.subjects}};return(a,e)=>{const u=D,s=j,q=w;return A(),G("div",null,[t(H,null,{default:o(()=>[t(O,null,{default:o(()=>[t(b,null,{default:o(()=>[t(d,null,{default:o(()=>[t(u,{"sub-title":"Formulario Grado",action:String(a.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:a.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),t(r(S),{ref_key:"formValidation",ref:p,"lazy-validation":""},{default:o(()=>[t(b,null,{default:o(()=>[t(d,{cols:"12",sm:"3"},{default:o(()=>[t(s,{clearable:"",modelValue:r(l).type_education_id,"onUpdate:modelValue":[e[0]||(e[0]=i=>r(l).type_education_id=i),e[2]||(e[2]=i=>y(i))],rules:["requiredValidator"in a?a.requiredValidator:r(f)],"error-messages":r(n).type_education_id,label:"Tipo",onChange:e[1]||(e[1]=i=>r(n).type_education_id=""),requiredField:!0,items:r(v)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),t(d,{cols:"12",sm:"3"},{default:o(()=>[t(q,{clearable:"",modelValue:r(l).name,"onUpdate:modelValue":e[3]||(e[3]=i=>r(l).name=i),rules:["requiredValidator"in a?a.requiredValidator:r(f)],"error-messages":r(n).name,label:"Nombre",onKeypress:e[4]||(e[4]=i=>r(n).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),t(d,{cols:"12",sm:"3"},{default:o(()=>[t(s,{clearable:"",modelValue:r(l).subjects,"onUpdate:modelValue":e[5]||(e[5]=i=>r(l).subjects=i),"item-value":"id","item-title":"name",label:"Materias",multiple:"",requiredField:!0,items:r(c),rules:["requiredValidator"in a?a.requiredValidator:r(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},512),t(b,null,{default:o(()=>[t(d,{cols:"12",class:"d-flex justify-center"},{default:o(()=>[t(R,{loading:r(F).form,color:"primary",onClick:e[6]||(e[6]=i=>k())},{default:o(()=>e[7]||(e[7]=[E(" Guardar ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{pe as default};

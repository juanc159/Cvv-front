import{a as Ke}from"./formatters-C93AZJuU.js";import{s as Ae}from"./helpers-BPprKBaR.js";import{d as j,W as Me,T as Pe,V as ge,U as ze,r as T,X as Qe,x as re,t as Re,w as H,Y as L,z as A,a as he,h as P,o as d,i as D,G as U,l as e,f as i,e as o,I as J,b as a,Q as W,R as Y,E as b,B as G,c as M,F as te,q as ce,Z as Ce,$ as Se,a0 as Je,a1 as Ee,v as Xe,a2 as Be,y as N,C as ie,D as I,a3 as De,H as Ie,a4 as ee,N as _e,a5 as Ze,a6 as ke,a7 as $,a8 as ve,a9 as K,aa as et,ab as Ve,ac as le,ad as fe,ae as Ge,af as Oe,ag as tt,ah as at,ai as st,aj as ot,ak as nt,al as it,am as ae,an as lt,ao as rt,ap as ct,aq as $e,ar as ut,as as dt,at as mt,au as vt,av as ft,aw as pt,ax as gt,ay as ht,az as _t,aA as we,aB as bt,aC as yt,aD as kt,aE as wt,aF as xt,aG as pe,aH as Pt,aI as Ct,aJ as St,aK as Vt,J as $t,K as Nt,aL as Tt,aM as Mt,aN as It,aO as Lt,aP as At,aQ as zt,aR as Rt,aS as Et,aT as ue,O as be}from"./index-CtOr4Wu7.js";import{V as Ue}from"./VBadge-CveDvPWx.js";import{V as Bt}from"./VMenu-D4hRRJEr.js";import{V as O,a as qe,b as Dt,c as Gt}from"./VCard-COZucsTL.js";import{V as me}from"./VChip-X8cnhpwt.js";import{V as ye}from"./VDivider-Du-RozYy.js";import{V as je,a as xe,b as Ot}from"./VList-BoAmY9IJ.js";import{V as Ne}from"./VAvatar-e7AxYF9T.js";import{V as Fe}from"./VImg-Ctxsnw81.js";import{V as Te}from"./VSpacer-xsYKkl2P.js";import{V as se}from"./VCardText-v8gCKQRH.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import Ut from"./Footer-BVZtw2Zk.js";import{_ as qt}from"./NavbarThemeSwitcher.vue_vue_type_script_setup_true_lang-geBbsIVM.js";import{_ as jt}from"./UserProfile.vue_vue_type_script_setup_true_lang-4vzNtrmT.js";import{c as Ft,a as He,_ as Ht}from"./I18n.vue_vue_type_script_setup_true_lang-BNmlj5WX.js";import{_ as Wt,a as Yt}from"./FilterDialogNew-CEM77jML.js";import{_ as Kt}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-6vZWU1pl.js";import{V as We}from"./VDialog-CybUf8DC.js";import{V as Qt,a as Jt}from"./VToolbar-5bAjszzX.js";import{V as Xt,a as de}from"./VRow-C1C7EzPn.js";import{C as Zt}from"./vue3-perfect-scrollbar-vqdvAiMH.js";import{V as ea}from"./VNodeRenderer-BITrKTzG.js";import"./constants-2GBt7OCP.js";import"./dialog-transition-dwJwLnHT.js";import"./ssrBoot-CB8iZIPO.js";/* empty css              */import"./ModalChangePassword.vue_vue_type_script_setup_true_lang-ByFM7ySB.js";import"./validators-DQNwaKQj.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-tPb9GRlz.js";import"./VTextField-B5WBRC1t.js";/* empty css                   */import"./VCounter-DANGpuYg.js";import"./VForm-BhvUgRDX.js";import"./ModalQuestion.vue_vue_type_script_setup_true_lang-B9CXAvdJ.js";import"./VDataTable-B3A_M1eK.js";import"./VSelect-BZZhkYMh.js";import"./VCheckboxBtn-Cah7cXyy.js";import"./VSelectionControl-Uad4iysT.js";import"./VTable-ClsD0PQ0.js";import"./filter-RDRewW1g.js";import"./VSkeletonLoader-bSnrqAoO.js";import"./AppSelectRemote-DB_wyvbL.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-K6gbidqT.js";const ta=j({name:"TransitionExpand",setup(n,{slots:m}){const t=c=>{const _=getComputedStyle(c).width;c.style.width=_,c.style.position="absolute",c.style.visibility="hidden",c.style.height="auto";const h=getComputedStyle(c).height;c.style.width="",c.style.position="",c.style.visibility="",c.style.height="0px",getComputedStyle(c).height,requestAnimationFrame(()=>{c.style.height=h})},r=c=>{c.style.height="auto"},f=c=>{const _=getComputedStyle(c).height;c.style.height=_,getComputedStyle(c).height,requestAnimationFrame(()=>{c.style.height="0px"})};return()=>Me(Me(Pe),{name:"expand",onEnter:t,onAfterEnter:r,onLeave:f},()=>{var c;return(c=m.default)==null?void 0:c.call(m)})}}),aa=oe(ta,[["__scopeId","data-v-dd57622d"]]),sa=n=>(Ce("data-v-7ba133df"),n=n(),Se(),n),oa={class:"nav-header"},na={class:"header-action"},ia=sa(()=>o("div",{class:"vertical-nav-items-shadow"},null,-1)),la=j({__name:"VerticalNav",props:{tag:{default:"aside"},navItems:{},isOverlayNavActive:{type:Boolean},toggleIsOverlayNavActive:{}},setup(n){const m=ge(),{company:t,user:r}=ze(m),f=n,c=T(),_=Qe(c);Je(Ee,_);const h=re(),u=g=>"heading"in g?Zs:"children"in g?ua:Ye,y=Re();H(()=>y.name,()=>{f.toggleIsOverlayNavActive(!1)});const C=T(!1),l=g=>C.value=g,V=g=>{C.value=g.target.scrollTop>0},w=h.isVerticalNavMini(_),z=L(()=>{var g=t.value.name??A.app.title,v=9;return g.length<=v?g:g.slice(0,v)+"..."});return(g,v)=>{const k=he("RouterLink");return d(),P(D(f.tag),{ref_key:"refNav",ref:c,class:U(["layout-vertical-nav",[{"overlay-nav":e(h).isLessThanOverlayNavBreakpoint,hovered:e(_),visible:g.isOverlayNavActive,scrolled:e(C)}]])},{default:i(()=>[o("div",oa,[J(g.$slots,"nav-header",{},()=>[a(k,{to:{name:"Home"},class:"app-logo app-title-wrapper"},{default:i(()=>{var s,x;return[(s=e(t))!=null&&s.logo?(d(),P(Fe,{key:0,style:{width:"80px"},src:("storageBack"in g?g.storageBack:e(Ae))((x=e(t))==null?void 0:x.logo)},null,8,["src"])):(d(),P(e(ea),{key:1,nodes:e(A).app.logo},null,8,["nodes"])),a(Pe,{name:"vertical-nav-app-title"},{default:i(()=>[W(o("h1",{class:"app-logo-title"},b(e(z)),513),[[Y,!e(w)]])]),_:1})]}),_:1}),o("div",na,[W((d(),P(D(e(A).app.iconRenderer||"div"),G({class:["d-none nav-unpin",e(h).isVerticalNavCollapsed&&"d-lg-block"]},e(A).icons.verticalNavUnPinned,{onClick:v[0]||(v[0]=s=>e(h).isVerticalNavCollapsed=!e(h).isVerticalNavCollapsed)}),null,16,["class"])),[[Y,e(h).isVerticalNavCollapsed]]),W((d(),P(D(e(A).app.iconRenderer||"div"),G({class:["d-none nav-pin",!e(h).isVerticalNavCollapsed&&"d-lg-block"]},e(A).icons.verticalNavPinned,{onClick:v[1]||(v[1]=s=>e(h).isVerticalNavCollapsed=!e(h).isVerticalNavCollapsed)}),null,16,["class"])),[[Y,!e(h).isVerticalNavCollapsed]]),(d(),P(D(e(A).app.iconRenderer||"div"),G({class:"d-lg-none"},e(A).icons.close,{onClick:v[2]||(v[2]=s=>g.toggleIsOverlayNavActive(!1))}),null,16))])],!0)]),J(g.$slots,"before-nav-items",{},()=>[ia],!0),J(g.$slots,"nav-items",{updateIsVerticalNavScrolled:l},()=>[(d(),P(e(Zt),{key:e(h).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:V},{default:i(()=>[(d(!0),M(te,null,ce(g.navItems,(s,x)=>(d(),P(D(u(s)),{key:x,item:s},null,8,["item"]))),128))]),_:1}))],!0),J(g.$slots,"after-nav-items",{},void 0,!0)]),_:3},8,["class"])}}}),ra=oe(la,[["__scopeId","data-v-7ba133df"]]),ca={class:"nav-group-children"},ua=j({name:"VerticalNavGroup",__name:"VerticalNavGroup",props:{item:{}},setup(n){const m=n,t=Re(),r=Xe(),f=re(),c=f.isVerticalNavMini(),_=Be(Ee,T(!1)),h=T(!1),u=T(!1),y=l=>l.some(V=>{let w=ee.value.includes(V.title);return"children"in V&&(w=y(V.children)||w),w}),C=l=>{l.forEach(V=>{"children"in V&&C(V.children),ee.value=ee.value.filter(w=>w!==V.title)})};return H(()=>t.path,()=>{const l=Ie(m.item.children,r);u.value=l&&!f.isVerticalNavMini(_).value,h.value=l},{immediate:!0}),H(u,l=>{const V=ee.value.indexOf(m.item.title);l&&V===-1?ee.value.push(m.item.title):!l&&V!==-1&&(ee.value.splice(V,1),C(m.item.children))},{immediate:!0}),H(ee,l=>{if(l.at(-1)===m.item.title)return;const w=Ie(m.item.children,r);w||y(m.item.children)||(u.value=w,h.value=w)},{deep:!0}),H(f.isVerticalNavMini(_),l=>{u.value=l?!1:h.value}),(l,V)=>e(Ft)(l.item)?(d(),M("li",{key:0,class:U(["nav-group",[{active:e(h),open:e(u),disabled:l.item.disable}]])},[o("div",{class:"nav-group-label",onClick:V[0]||(V[0]=w=>u.value=!e(u))},[(d(),P(D(e(A).app.iconRenderer||"div"),G(l.item.icon||e(A).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(d(),P(D(De),{name:"transition-slide-x"},{default:i(()=>[W((d(),P(D(e(A).app.i18n.enable?"i18n-t":"span"),G(e(ie)(l.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:i(()=>[I(b(l.item.title),1)]),_:1},16)),[[Y,!e(c)]]),l.item.badgeContent?W((d(),P(D(e(A).app.i18n.enable?"i18n-t":"span"),G({key:0},e(ie)(l.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",l.item.badgeClass]}),{default:i(()=>[I(b(l.item.badgeContent),1)]),_:1},16,["class"])),[[Y,!e(c)]]):N("",!0),W((d(),P(D(e(A).app.iconRenderer||"div"),G(e(A).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[Y,!e(c)]])]),_:1}))]),a(e(aa),null,{default:i(()=>[W(o("ul",ca,[(d(!0),M(te,null,ce(l.item.children,w=>(d(),P(D("children"in w?"VerticalNavGroup":e(Ye)),{key:w.title,item:w},null,8,["item"]))),128))],512),[[Y,e(u)]])]),_:1})],2)):N("",!0)}}),da=n=>(Ce("data-v-dc180c71"),n=n(),Se(),n),ma={class:"text-center mb-6"},va={class:"d-flex align-center justify-center mb-4"},fa={class:"text-h5 font-weight-bold text-white mb-2"},pa={class:"text-body-1 text-grey-400 mb-0"},ga={class:"progress-section mb-6"},ha={class:"d-flex justify-space-between align-center mb-3"},_a=da(()=>o("span",{class:"text-body-2 font-weight-medium text-grey-300"}," Progreso ",-1)),ba={class:"d-flex align-center"},ya={class:"text-h6 font-weight-bold text-primary mr-2"},ka={class:"steps-section mb-6"},wa={key:0,class:"tips-section mb-6"},xa={class:"d-flex align-center"},Pa={class:"text-body-2 text-grey-300 tip-text"},Ca={class:"actions-section d-flex justify-space-between align-center"},Sa={class:"d-flex gap-2"},Va=j({__name:"LoadingV2Enhanced",props:{progress:{type:Number,default:0,validator:n=>n>=0&&n<=100},isLoading:{type:Boolean,default:!0},title:{type:String,default:"Procesando"},subtitle:{type:String,default:"Por favor espera mientras completamos la operaci√≥n"},showTips:{type:Boolean,default:!0},showMultipleButton:{type:Boolean,default:!1},totalProcesses:{type:Number,default:2},tips:{type:Array,default:()=>["üí° Puedes cargar m√∫ltiples archivos simult√°neamente","üöÄ El proceso continuar√° ejecut√°ndose en segundo plano","‚ö° Recibir√°s una notificaci√≥n cuando termine","üé® Puedes cambiar entre modo claro y oscuro","üîß El progreso se guarda autom√°ticamente"]},steps:{type:Array,default:()=>["Validando archivo Excel","Procesando estructura de datos","Importando registros de estudiantes","Guardando notas en base de datos","Finalizando importaci√≥n"]}},emits:["minimized","restored","completed","show-multiple"],setup(n,{expose:m,emit:t}){const r=n,f=t,c=T(0),_=T(0),h=T(!1);let u=null;const y=()=>{h.value=!0,f("minimized")},C=()=>{h.value=!1,f("restored")},l=L(()=>{const p=Math.max(0,Math.min(100,r.progress));return p>=100&&f("completed"),p}),V=L(()=>{const p=l.value;return p>=100?"üéâ ¬°Proceso completado con √©xito!":p>=90?"üîç Realizando verificaciones finales...":p>=80?"üì§ Guardando resultados en el sistema...":p>=70?"‚öôÔ∏è Optimizando datos procesados...":p>=60?"üìä Procesando informaci√≥n recolectada...":p>=50?"üì¶ Organizando datos intermedios...":p>=40?"üîÑ Cargando m√≥dulos secundarios...":p>=30?"üöÄ Proceso en marcha, avanzando...":p>=20?"‚ö° Preparando componentes principales...":p>=10?"üîå Conectando con los servicios...":p>=0?"‚è≥ Inicializando sistema...":r.title||"Preparando carga..."}),w=L(()=>{const p=l.value;return p>=100?"Todo est√° listo para usar":p>=80?"Aplicando configuraciones finales":p>=60?"Organizando la informaci√≥n":p>=40?"Descargando componentes necesarios":p>=0?"Preparando el sistema":r.subtitle}),z=L(()=>{const p=l.value;return p>=100?"tabler-checks":p>=80?"tabler-circle-check":p>=60?"tabler-database":p>=40?"tabler-settings":p>=20?"tabler-rotate-2":"tabler-rotate-clockwise-2"}),g=L(()=>r.tips[c.value]||""),v=L(()=>r.steps);H(()=>r.progress,p=>{const R=Math.floor(p/100*r.steps.length);_.value=Math.min(R,r.steps.length-1)});const k=p=>p<_.value?"tabler-circle-check-filled":p===_.value&&l.value<100?"tabler-loader-2":p===_.value&&l.value>=100?"tabler-circle-check-filled":"tabler-circle",s=p=>p<_.value?"success":p===_.value?l.value>=100?"success":"primary":"grey-600",x=p=>p<_.value?"text-success font-weight-medium":p===_.value?l.value>=100?"text-success font-weight-medium":"text-primary font-weight-medium":"text-grey-500",Q=()=>{r.showTips&&r.tips.length>1&&(u=setInterval(()=>{c.value=(c.value+1)%r.tips.length},5e3))},S=()=>{u&&(clearInterval(u),u=null)};return _e(()=>{Q()}),Ze(()=>{S()}),H(()=>r.isLoading,p=>{p?Q():S()}),m({minimize:y,restore:C,isMinimized:h}),(p,R)=>!h.value&&n.isLoading?(d(),P(ke,{key:0,"model-value":n.isLoading,class:"loading-overlay d-flex align-center justify-center",persistent:!0,opacity:.98,"z-index":9999},{default:i(()=>[a(O,{class:"loading-card",elevation:"0",rounded:"xl","min-width":"420",width:"90%","max-width":"500"},{default:i(()=>[a(se,{class:"pa-8"},{default:i(()=>[o("div",ma,[o("div",va,[a(Ne,{size:"72",class:"loading-avatar",color:l.value>=100?"success":"primary"},{default:i(()=>[a($,{size:l.value>=100?"32":"28",icon:z.value,color:"white",class:U(l.value<100?"spin-animation":"")},null,8,["size","icon","class"])]),_:1},8,["color"])]),o("h2",fa,b(V.value),1),o("p",pa,b(w.value),1)]),o("div",ga,[o("div",ha,[_a,o("div",ba,[o("span",ya,b(Math.round(l.value))+"% ",1),l.value>=100?(d(),P($,{key:0,icon:"tabler-eye",size:"16",color:"grey-400"})):N("",!0)])]),a(ve,{"model-value":l.value,height:"6",rounded:"",color:"primary","bg-color":"grey-800",class:"loading-progress"},null,8,["model-value"])]),o("div",ka,[a(O,{class:"steps-card pa-4",color:"grey-900",variant:"elevated",elevation:"2",rounded:"lg"},{default:i(()=>[(d(!0),M(te,null,ce(v.value,(E,q)=>(d(),M("div",{key:q,class:U(["step-item d-flex align-center mb-3",{"mb-0":q===v.value.length-1}])},[a($,{icon:k(q),color:s(q),size:"20",class:U(["step-icon mr-3",{"spin-animation":q===_.value&&l.value<100}])},null,8,["icon","color","class"]),o("span",{class:U(["text-body-2",x(q)])},b(E),3)],2))),128))]),_:1})]),n.showTips?(d(),M("div",wa,[a(O,{class:"tip-card pa-3",color:"grey-800",variant:"flat",rounded:"lg"},{default:i(()=>[o("div",xa,[a($,{icon:"tabler-bulb",color:"warning",size:"20",class:"mr-3"}),o("span",Pa,b(g.value),1)])]),_:1})])):N("",!0),o("div",Ca,[a(K,{variant:"elevated",color:"info",class:"text-none",onClick:y},{default:i(()=>[a($,{start:"",icon:"tabler-minimize",size:"18"}),I(" Minimizar ")]),_:1}),o("div",Sa,[n.showMultipleButton?(d(),P(K,{key:0,variant:"elevated",color:"warning",class:"text-none",onClick:R[0]||(R[0]=E=>p.$emit("show-multiple"))},{default:i(()=>[a($,{start:"",icon:"tabler-stack-2",size:"18"}),I(" Ver todos ("+b(n.totalProcesses||2)+") ",1)]),_:1})):N("",!0)])])]),_:1})]),_:1})]),_:1},8,["model-value"])):N("",!0)}}),$a=oe(Va,[["__scopeId","data-v-dc180c71"]]),Na=j({__name:"ModalListErrors",emits:["execute"],setup(n,{expose:m,emit:t}){const r=T("Listado de errores"),f=T(!1),c=()=>{f.value=!f.value},_=T(),h=T({url:"/processBatch/errorsPaginate",headers:[{key:"error_type",title:"Tipo de error"},{key:"column_name",title:"Columna"},{key:"row_number",title:"Fila"},{key:"error_value",title:"Valor"},{key:"error_message",title:"Mensaje de error"}],paramsGlobal:{batch_id:""}}),u=T({filterLabels:{inputGeneral:"Buscar en todo"}}),y=T(!1),C=T(!0),l=w=>{_.value&&(C.value&&w?_.value.fetchTableData(null,!1,!0,w):_.value.fetchTableData(null,!1,!0))};return m({openModal:async w=>{c(),console.log("batchId",w),h.value.paramsGlobal.batch_id=w}}),(w,z)=>{const g=Kt,v=Wt,k=Yt;return d(),M("div",null,[a(We,{modelValue:e(f),"onUpdate:modelValue":z[1]||(z[1]=s=>et(f)?f.value=s:null),"max-width":"70rem",transition:"dialog-transition",persistent:""},{default:i(()=>[a(g,{onClick:c}),a(O,{class:"w-100"},{default:i(()=>[o("div",null,[a(Qt,{color:"primary"},{default:i(()=>[a(Jt,null,{default:i(()=>[I(b(e(r)),1)]),_:1})]),_:1})]),a(se,null,{default:i(()=>[a(v,{"options-filter":e(u),onForceSearch:l,"table-loading":e(y),"disable-url-update":e(C)},null,8,["options-filter","table-loading","disable-url-update"])]),_:1}),a(se,null,{default:i(()=>[a(k,{ref_key:"refTableFull",ref:_,options:e(h),"onUpdate:loading":z[0]||(z[0]=s=>y.value=s),"disable-url-update":e(C)},null,8,["options","disable-url-update"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),F=n=>(Ce("data-v-d00a13f8"),n=n(),Se(),n),Ta={class:"d-flex align-center"},Ma=F(()=>o("div",null,[o("h2",{class:"text-h5 font-weight-bold"},"Procesos de Importaci√≥n"),o("p",{class:"text-body-2 text-medium-emphasis mb-0"},"Gestiona tus importaciones activas y completadas")],-1)),Ia={class:"d-flex align-center gap-2"},La={class:"d-flex justify-space-between align-center mb-3"},Aa={class:"d-flex align-center"},za=F(()=>o("span",{class:"text-h6 font-weight-medium"},"Progreso General",-1)),Ra={class:"text-h5 font-weight-bold text-primary"},Ea={class:"d-flex justify-space-between text-body-2 text-medium-emphasis"},Ba={class:"d-flex align-center justify-space-between mb-3"},Da={class:"d-flex align-center"},Ga={class:"text-h6 font-weight-bold"},Oa={class:"d-flex align-center mt-1"},Ua={class:"text-right"},qa={class:"text-h5 font-weight-bold text-primary"},ja={class:"text-caption text-medium-emphasis"},Fa={class:"mb-3"},Ha={class:"d-flex justify-space-between text-body-2 text-medium-emphasis"},Wa={key:0},Ya={key:0,class:"metadata-section"},Ka={class:"d-flex align-center"},Qa=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Registros",-1)),Ja={class:"text-h6 font-weight-bold"},Xa={class:"d-flex align-center"},Za=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Hojas",-1)),es={class:"text-h6 font-weight-bold"},ts={class:"d-flex align-center"},as=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Errores",-1)),ss={class:"text-h6 font-weight-bold"},os={class:"d-flex align-center"},ns=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Tiempo Rest.",-1)),is={class:"text-h6 font-weight-bold"},ls={key:0,class:"mt-3"},rs={class:"d-flex align-center justify-space-between"},cs={class:"d-flex align-center"},us=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Procesando",-1)),ds={class:"text-body-1 font-weight-medium"},ms={key:0,class:"text-right"},vs=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"√öltima actividad",-1)),fs={class:"text-body-2"},ps={key:1,class:"mt-3"},gs={class:"d-flex align-center"},hs=F(()=>o("div",null,[o("div",{class:"text-caption text-medium-emphasis"},"Estado"),o("div",{class:"text-body-1 font-weight-medium"},"En cola de espera")],-1)),_s={key:2,class:"mt-3"},bs={class:"d-flex align-center justify-space-between"},ys={class:"d-flex align-center"},ks=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Completado",-1)),ws={class:"text-body-1 font-weight-medium"},xs={key:0,class:"text-right"},Ps=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Finalizado",-1)),Cs={class:"text-body-2"},Ss={key:3,class:"mt-3"},Vs={class:"d-flex align-center justify-space-between"},$s={class:"d-flex align-center"},Ns=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Estado",-1)),Ts={class:"text-body-1 font-weight-medium"},Ms={key:0,class:"text-right"},Is=F(()=>o("div",{class:"text-caption text-medium-emphasis"},"Finalizado",-1)),Ls={class:"text-body-2"},As={class:"d-flex justify-end mt-3"},zs=j({__name:"ProcessListModal",emits:["removeProcess","showDataProcess","clearCompleted","close"],setup(n,{emit:m}){const t=Ve(),r=m,f=L({get:()=>t.showProcessList.value,set:v=>{v||t.hideProcessListModal()}}),c=L(()=>t.allProcesses.value.length===0?0:t.allProcesses.value.reduce((k,s)=>k+s.progress,0)/t.allProcesses.value.length),_=()=>t.activeProcesses.value.length===0?"success":"primary",h=()=>{r("clearCompleted")},u=v=>{switch(v){case"active":return"primary";case"completed":return"success";case"error":return"error";case"queued":return"warning";default:return"secondary"}},y=v=>{switch(v){case"active":return"tabler-loader-2";case"completed":return"tabler-circle-check-filled";case"error":return"tabler-alert-circle";case"queued":return"tabler-clock";default:return"tabler-help-circle"}},C=v=>{switch(v.status){case"active":return"Procesando";case"completed":return"Completado";case"error":return"Error";case"queued":return"En Cola";default:return"Desconocido"}},l=v=>{switch(v){case"connected":return"success";case"connecting":return"warning";case"reconnecting":return"info";case"error":return"error";case"disconnected":return"secondary";default:return"secondary"}},V=v=>{switch(v){case"connected":return"tabler-wifi";case"connecting":return"tabler-loader";case"reconnecting":return"tabler-refresh";case"error":return"tabler-wifi-off";case"disconnected":return"tabler-wifi-off";default:return"tabler-help-circle"}},w=v=>v?new Date(v).toLocaleTimeString():"N/A",z=v=>{const k=new Date,s=new Date(v),x=Math.floor((k.getTime()-s.getTime())/1e3);return x<60?`Hace ${x}s`:x<3600?`Hace ${Math.floor(x/60)}m`:w(v)},g=v=>{if(console.log("seconds",v),!v||v===0)return"N/A";if(v<60)return`${v}s`;const k=Math.floor(v/60),s=v%60;return`${k}m ${s}s`};return(v,k)=>(d(),P(We,{modelValue:f.value,"onUpdate:modelValue":k[1]||(k[1]=s=>f.value=s),"max-width":"60rem",persistent:""},{default:i(()=>[a(O,{class:"process-list-card"},{default:i(()=>[a(qe,{class:"d-flex align-center justify-space-between pa-6 pb-4"},{default:i(()=>[o("div",Ta,[a($,{icon:"tabler-stack-2",class:"me-3",color:"primary",size:"28"}),Ma]),o("div",Ia,[a(me,{color:_(),size:"large",variant:"elevated"},{default:i(()=>[a($,{start:"",icon:"tabler-files"}),I(" "+b(e(t).allProcesses.value.length)+" proceso"+b(e(t).allProcesses.value.length!==1?"s":""),1)]),_:1},8,["color"]),e(t).completedProcesses.value.length>0?(d(),P(K,{key:0,variant:"outlined",color:"warning",size:"small",onClick:h},{default:i(()=>[a($,{start:"",icon:"tabler-trash"}),I(" Limpiar ("+b(e(t).completedProcesses.value.length)+") ",1)]),_:1})):N("",!0)])]),_:1}),e(t).activeProcesses.value.length>0?(d(),P(se,{key:0,class:"px-6 py-0"},{default:i(()=>[a(O,{class:"overall-progress-card pa-4 mb-4",color:"grey-50",variant:"tonal"},{default:i(()=>[o("div",La,[o("div",Aa,[a($,{icon:"tabler-chart-line",color:"primary",class:"me-2"}),za]),o("span",Ra,b(Math.round(c.value))+"%",1)]),a(ve,{"model-value":c.value,height:"12",rounded:"",color:"primary",class:"mb-3"},null,8,["model-value"]),o("div",Ea,[o("span",null,b(e(t).completedProcesses.value.length)+" de "+b(e(t).allProcesses.value.length)+" procesos completados",1),o("span",null,b(e(t).activeProcesses.value.length)+" activo"+b(e(t).activeProcesses.value.length!==1?"s":""),1)])]),_:1})]),_:1})):N("",!0),a(se,{class:"pa-4"},{default:i(()=>[a(je,{class:"process-list"},{default:i(()=>[(d(!0),M(te,null,ce(e(t).sortedProcesses.value,s=>(d(),P(xe,{key:s.batch_id,class:U(["process-item pa-4 ma-2 rounded-lg",{"active-process":s.status==="active","queued-process":s.status==="queued","completed-process":s.status==="completed","error-process":s.status==="error"}])},{default:i(()=>{var x,Q,S,p;return[o("div",Ba,[o("div",Da,[a(Ne,{color:u(s.status),size:"48",class:"me-3"},{default:i(()=>[a($,{icon:y(s.status),color:"white",size:"24",class:U(s.status==="active"?"spin-animation":"")},null,8,["icon","class"])]),_:2},1032,["color"]),o("div",null,[o("h3",Ga,b((x=s.metadata)==null?void 0:x.file_name),1),o("div",Oa,[a(me,{color:u(s.status),size:"small",class:"me-2"},{default:i(()=>[I(b(C(s)),1)]),_:2},1032,["color"]),(Q=s.metadata)!=null&&Q.connection_status?(d(),P(me,{key:0,color:l(s.metadata.connection_status),size:"small",variant:"outlined"},{default:i(()=>[a($,{start:"",icon:V(s.metadata.connection_status),size:"14"},null,8,["icon"]),I(" "+b(s.metadata.connection_status),1)]),_:2},1032,["color"])):N("",!0)])])]),o("div",Ua,[o("div",qa,b(Math.round(s.progress))+"%",1),o("div",ja,b(w(s.started_at)),1)])]),o("div",Fa,[a(ve,{"model-value":s.progress,height:"8",rounded:"",color:u(s.status),class:"mb-2"},null,8,["model-value","color"]),o("div",Ha,[o("span",null,b(s.current_action),1),(S=s.metadata)!=null&&S.processing_speed?(d(),M("span",Wa,b(s.metadata.processing_speed)+" reg/s ",1)):N("",!0)])]),s.metadata?(d(),M("div",Ya,[a(Xt,{class:"metadata-grid"},{default:i(()=>[a(de,{cols:"12",sm:"6",md:"3"},{default:i(()=>[a(O,{class:"metadata-card pa-3",variant:"tonal",color:"info"},{default:i(()=>[o("div",Ka,[a($,{icon:"tabler-database",color:"info",class:"me-2"}),o("div",null,[Qa,o("div",Ja,b(s.metadata.processed_records||0)+" / "+b(s.metadata.total_records||0),1)])])]),_:2},1024)]),_:2},1024),a(de,{cols:"12",sm:"6",md:"3"},{default:i(()=>[a(O,{class:"metadata-card pa-3",variant:"tonal",color:"success"},{default:i(()=>[o("div",Xa,[a($,{icon:"tabler-file-spreadsheet",color:"success",class:"me-2"}),o("div",null,[Za,o("div",es,b(s.metadata.current_sheet||1)+" / "+b(s.metadata.total_sheets||1),1)])])]),_:2},1024)]),_:2},1024),a(de,{cols:"12",sm:"6",md:"3"},{default:i(()=>[a(O,{class:"metadata-card pa-3",variant:"tonal",color:(s.metadata.errors_count||0)>0?"error":"grey"},{default:i(()=>[o("div",ts,[a($,{icon:(s.metadata.errors_count||0)>0?"tabler-alert-circle":"tabler-check-circle",color:(s.metadata.errors_count||0)>0?"error":"success",class:"me-2"},null,8,["icon","color"]),o("div",null,[as,o("div",ss,b(s.metadata.errors_count||0),1)])])]),_:2},1032,["color"])]),_:2},1024),a(de,{cols:"12",sm:"6",md:"3"},{default:i(()=>[a(O,{class:"metadata-card pa-3",variant:"tonal",color:"warning"},{default:i(()=>[o("div",os,[a($,{icon:"tabler-clock",color:"warning",class:"me-2"}),o("div",null,[ns,o("div",is,b(g(s.metadata.estimated_time_remaining)),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024),s.status==="active"?(d(),M("div",ls,[a(O,{class:"active-details pa-3",variant:"tonal",color:"primary"},{default:i(()=>[o("div",rs,[o("div",cs,[a($,{icon:"tabler-user",color:"primary",class:"me-2"}),o("div",null,[us,o("div",ds,b(s.current_element),1)])]),s.metadata.last_activity?(d(),M("div",ms,[vs,o("div",fs,b(z(s.metadata.last_activity)),1)])):N("",!0)])]),_:2},1024)])):s.status==="queued"?(d(),M("div",ps,[a(O,{class:"queued-details pa-3",variant:"tonal",color:"warning"},{default:i(()=>[o("div",gs,[a($,{icon:"tabler-hourglass",color:"warning",class:"me-2"}),hs])]),_:1})])):s.status==="completed"?(d(),M("div",_s,[a(O,{class:"completed-details pa-3",variant:"tonal",color:"success"},{default:i(()=>[o("div",bs,[o("div",ys,[a($,{icon:"tabler-circle-check",color:"success",class:"me-2"}),o("div",null,[ks,o("div",ws,b(s.metadata.total_records||0)+" registros procesados ",1)])]),s.completed_at?(d(),M("div",xs,[Ps,o("div",Cs,b(w(s.completed_at)),1)])):N("",!0)])]),_:2},1024)])):s.status==="error"?(d(),M("div",Ss,[a(O,{class:"error-details pa-3",variant:"tonal",color:"error"},{default:i(()=>{var R;return[o("div",Vs,[o("div",$s,[a($,{icon:"tabler-alert-triangle",color:"error",class:"me-2"}),o("div",null,[Ns,o("div",Ts," Error: "+b(((R=s.metadata)==null?void 0:R.errors_count)||0)+" errores encontrados ",1)])]),s.completed_at?(d(),M("div",Ms,[Is,o("div",Ls,b(w(s.completed_at)),1)])):N("",!0)])]}),_:2},1024)])):N("",!0)])):N("",!0),o("div",As,[(s.status==="completed"||s.status==="error")&&((p=s.metadata)==null?void 0:p.errors_count)>0?(d(),P(K,{key:0,icon:"",size:"small",variant:"text",color:"warning",onClick:le(R=>v.$emit("showDataProcess",s.batch_id),["stop"])},{default:i(()=>[a($,{icon:"tabler-eye"}),a(fe,{activator:"parent",location:"top"},{default:i(()=>[I("Visualizar errores")]),_:1})]),_:2},1032,["onClick"])):N("",!0),s.status==="completed"||s.status==="error"?(d(),P(K,{key:1,icon:"",size:"small",variant:"text",color:"error",onClick:le(R=>v.$emit("removeProcess",s.batch_id),["stop"])},{default:i(()=>[a($,{icon:"tabler-trash"}),a(fe,{activator:"parent",location:"top"},{default:i(()=>[I("Eliminar proceso")]),_:1})]),_:2},1032,["onClick"])):N("",!0)])]}),_:2},1032,["class"]))),128))]),_:1})]),_:1}),a(Dt,{class:"pa-6 pt-4"},{default:i(()=>[a(Te),a(K,{variant:"elevated",color:"primary",onClick:k[0]||(k[0]=s=>v.$emit("close"))},{default:i(()=>[a($,{start:"",icon:"tabler-x"}),I(" Cerrar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Rs=oe(zs,[["__scopeId","data-v-d00a13f8"]]);function Es(n){const m=ae(n);let t=-1;function r(){clearInterval(t)}function f(){r(),we(()=>m.value=n)}function c(_){const h=_?getComputedStyle(_):{transitionDuration:.2},u=parseFloat(h.transitionDuration)*1e3||200;if(r(),m.value<=0)return;const y=performance.now();t=window.setInterval(()=>{const C=performance.now()-y+u;m.value=Math.max(n-C,0),m.value<=0&&r()},u)}return _t(r),{clear:r,time:m,start:c,reset:f}}const Bs=Oe({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...gt({location:"bottom"}),...pt(),...ft(),...vt(),...mt(),...dt(ht({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ds=Ge()({name:"VSnackbar",props:Bs(),emits:{"update:modelValue":n=>!0},setup(n,m){let{slots:t}=m;const r=tt(n,"modelValue"),{positionClasses:f}=at(n),{scopeId:c}=st(),{themeClasses:_}=ot(n),{colorClasses:h,colorStyles:u,variantClasses:y}=nt(n),{roundedClasses:C}=it(n),l=Es(Number(n.timeout)),V=T(),w=T(),z=ae(!1),g=ae(0),v=T(),k=Be(lt,void 0);rt(()=>!!k,()=>{const B=bt();yt(()=>{v.value=B.mainStyles.value})}),H(r,x),H(()=>n.timeout,x),_e(()=>{r.value&&x()});let s=-1;function x(){l.reset(),window.clearTimeout(s);const B=Number(n.timeout);if(!r.value||B===-1)return;const X=ct(w.value);l.start(X),s=window.setTimeout(()=>{r.value=!1},B)}function Q(){l.reset(),window.clearTimeout(s)}function S(){z.value=!0,Q()}function p(){z.value=!1,x()}function R(B){g.value=B.touches[0].clientY}function E(B){Math.abs(g.value-B.changedTouches[0].clientY)>50&&(r.value=!1)}const q=L(()=>n.location.split(" ").reduce((B,X)=>(B[`v-snackbar--${X}`]=!0,B),{}));return $e(()=>{const B=ke.filterProps(n),X=!!(t.default||t.text||n.text);return a(ke,G({ref:V,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":n.multiLine&&!n.vertical,"v-snackbar--timer":!!n.timer,"v-snackbar--vertical":n.vertical},q.value,f.value,n.class],style:[v.value,n.style]},B,{modelValue:r.value,"onUpdate:modelValue":Z=>r.value=Z,contentProps:G({class:["v-snackbar__wrapper",_.value,h.value,C.value,y.value],style:[u.value],onPointerenter:S,onPointerleave:p},B.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:R,onTouchend:E},c),{default:()=>{var Z,ne;return[kt(!1,"v-snackbar"),n.timer&&!z.value&&a("div",{key:"timer",class:"v-snackbar__timer"},[a(ve,{ref:w,color:typeof n.timer=="string"?n.timer:"info",max:n.timeout,"model-value":l.time.value},null)]),X&&a("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((Z=t.text)==null?void 0:Z.call(t))??n.text,(ne=t.default)==null?void 0:ne.call(t)]),t.actions&&a(wt,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[a("div",{class:"v-snackbar__actions"},[t.actions({isActive:r})])]})]},activator:t.activator})}),ut({},V)}}),Gs={class:"minimized-overlay"},Os={class:"minimized-info ms-3"},Us={class:"text-caption font-weight-medium"},qs={class:"text-caption text-medium-emphasis"},js=j({__name:"GlobalLoadingManager",setup(n){const m=ge(),t=Ve(),r=T(!1),f=T(),c=k=>{f.value.openModal(k)},_=L(()=>{const k=t.currentProcess.value,s=t.currentProgress.value;return k?s>=100&&k.status==="completed"?"¬°Importaci√≥n Completada!":s===0?"Procesando importaci√≥n":k.current_action||"Procesando importaci√≥n":"Sin proceso activo"}),h=L(()=>{const k=t.currentProcess.value,s=t.currentProgress.value;if(!k)return"Sin proceso activo";if(s>=100&&k.status==="completed")return"¬°El archivo se ha procesado exitosamente!";if(s===0)return"Iniciando proceso de importaci√≥n...";let x=`${Math.round(s)}% completado - ${k.current_element}`;return t.queuedProcesses.value.length>0&&(x+=` ‚Ä¢ ${t.queuedProcesses.value.length} en cola`),x}),u=()=>{console.log("‚úÖ [MANAGER] Loading completed")},y=()=>{t.minimize()},C=()=>{t.restore()},l=()=>{t.showProcessListModal()},V=k=>{t.removeProcess(k)},w=k=>{c(k)},z=()=>{t.clearCompletedProcesses()},g=()=>{t.hideProcessListModal()},v=()=>{var k;t.onCompleted(s=>{var x;console.log(`üéâ [MANAGER] ¬°IMPORTACI√ìN COMPLETADA! Batch: ${s}`),(((x=t.currentProcess.value)==null?void 0:x.batch_id)===s||t.isMinimized.value)&&(r.value=!0)}),t.onError((s,x)=>{console.error(`‚ùå [MANAGER] Error en batch ${s}:`,x)}),t.onProgressUpdated((s,x)=>{console.log(`üìä [MANAGER] Progreso: ${x}% para batch ${s}`)}),(k=m.user)!=null&&k.id?t.getUserProcesses(m.user.id):H(()=>{var s;return(s=m.user)==null?void 0:s.id},s=>{s&&t.getUserProcesses(s)},{immediate:!0})};return _e(()=>{console.log("üöÄ [MANAGER] GlobalLoadingManager mounted"),v()}),xt(()=>{console.log("üßπ [MANAGER] GlobalLoadingManager unmounting"),t.cleanup()}),(k,s)=>(d(),M(te,null,[e(t).isLoading.value&&e(t).currentProcess.value&&!e(t).isMinimized.value&&!e(t).showProcessList.value?(d(),P($a,{key:0,"is-loading":!1,progress:e(t).currentProgress.value,title:_.value,subtitle:h.value,onMinimized:y,onCompleted:u,"show-multiple-button":e(t).hasMultipleProcesses.value,onShowMultiple:l,"debug-data":e(t).debugInfo.value},null,8,["progress","title","subtitle","show-multiple-button","debug-data"])):N("",!0),o("div",Gs,[a(O,{class:"minimized-card",onClick:C},{default:i(()=>[a(pe,{"model-value":e(t).currentProgress.value,color:"primary",size:"40",width:"3"},{default:i(()=>[I(b(Math.round(e(t).currentProgress.value))+"% ",1)]),_:1},8,["model-value"]),o("div",Os,[o("div",Us,b(e(t).activeProcesses.value.length)+" activo"+b(e(t).activeProcesses.value.length!==1?"s":"")+" "+b(e(t).queuedProcesses.value.length>0?`, ${e(t).queuedProcesses.value.length} en cola`:""),1),o("div",qs,b(Math.round(e(t).currentProgress.value))+"% completado ",1)]),a(K,{icon:"",size:"small",variant:"text",onClick:le(l,["stop"]),class:"ms-2"},{default:i(()=>[a($,{icon:"tabler-list"})]),_:1}),a($,{class:"minimize-icon ms-2",icon:"tabler-chevron-up",onClick:le(C,["stop"])})]),_:1})]),e(t).showProcessList.value?(d(),P(Rs,{key:1,onRemoveProcess:V,onClearCompleted:z,onClose:g,onShowDataProcess:w})):N("",!0),a(Na,{ref_key:"refModalListErrors",ref:f},null,512),a(Ds,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=x=>r.value=x),timeout:5e3,color:"success",location:"top"},{actions:i(()=>[a(K,{variant:"text",onClick:s[0]||(s[0]=x=>r.value=!1)},{default:i(()=>[I(" Cerrar ")]),_:1})]),default:i(()=>[a($,{start:"",icon:"tabler-check"}),I(" ¬°Importaci√≥n completada exitosamente! ")]),_:1},8,["modelValue"])],64))}}),Fs=oe(js,[["__scopeId","data-v-74b02407"]]),Hs={class:"layout-content-wrapper"},Ws={class:"navbar-content-container"},Ys={class:"layout-page-content"},Ks={class:"page-content-container"},Qs=j({__name:"VerticalNavLayout",props:{navItems:{},verticalNavAttrs:{default:()=>({})}},setup(n){const m=n,{width:t}=Pt(),r=re(),f=T(!1),c=T(!1),_=Ct(f);St(f,c),H(t,()=>{!r.isLessThanOverlayNavBreakpoint&&c.value&&(c.value=!1)});const h=L(()=>{const u=Vt(m,"verticalNavAttrs"),{wrapper:y,wrapperProps:C,...l}=u.value;return{verticalNavWrapper:y,verticalNavWrapperProps:C,additionalVerticalNavAttrs:l}});return(u,y)=>{const C=Fs;return d(),M("div",{class:U(["layout-wrapper",e(r)._layoutClasses])},[(d(),P(D(e(h).verticalNavWrapper?e(h).verticalNavWrapper:"div"),G(e(h).verticalNavWrapperProps,{class:"vertical-nav-wrapper"}),{default:i(()=>[a(e(ra),G({"is-overlay-nav-active":e(f),"toggle-is-overlay-nav-active":e(_),"nav-items":m.navItems},{...e(h).additionalVerticalNavAttrs}),{"nav-header":i(()=>[J(u.$slots,"vertical-nav-header")]),"before-nav-items":i(()=>[J(u.$slots,"before-vertical-nav-items")]),_:3},16,["is-overlay-nav-active","toggle-is-overlay-nav-active","nav-items"])]),_:3},16)),o("div",Hs,[o("header",{class:U(["layout-navbar",[{"navbar-blur":e(r).isNavbarBlurEnabled}]])},[o("div",Ws,[J(u.$slots,"navbar",{toggleVerticalOverlayNavActive:e(_)})])],2),o("main",Ys,[o("div",Ks,[J(u.$slots,"default")])]),a(C)]),o("div",{class:U(["layout-overlay",[{visible:e(c)}]]),onClick:y[0]||(y[0]=()=>{c.value=!e(c)})},null,2)],2)}}}),Ye=j({__name:"VerticalNavLink",props:{item:{}},setup(n){const t=re().isVerticalNavMini();return(r,f)=>e(He)(r.item.action,r.item.subject)?(d(),M("li",{key:0,class:U(["nav-link",{disabled:r.item.disable}])},[(d(),P(D(r.item.to?"RouterLink":"a"),G(e(Nt)(r.item),{class:{"router-link-active router-link-exact-active":e($t)(r.item,r.$router)}}),{default:i(()=>[(d(),P(D(e(A).app.iconRenderer||"div"),G(r.item.icon||e(A).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),a(De,{name:"transition-slide-x"},{default:i(()=>[W((d(),P(D(e(A).app.i18n.enable?"i18n-t":"span"),G({key:"title",class:"nav-item-title"},e(ie)(r.item.title,"span")),{default:i(()=>[I(b(r.item.title),1)]),_:1},16)),[[Y,!e(t)]]),r.item.badgeContent?W((d(),P(D(e(A).app.i18n.enable?"i18n-t":"span"),G({key:"badge",class:["nav-item-badge",r.item.badgeClass]},e(ie)(r.item.badgeContent,"span")),{default:i(()=>[I(b(r.item.badgeContent),1)]),_:1},16,["class"])),[[Y,!e(t)]]):N("",!0)]),_:1})]),_:1},16,["class"]))],2)):N("",!0)}}),Js={key:0,class:"nav-section-title"},Xs={class:"title-wrapper"},Zs=j({__name:"VerticalNavSectionTitle",props:{item:{}},setup(n){const t=re().isVerticalNavMini();return(r,f)=>e(He)(r.item.action,r.item.subject)?(d(),M("li",Js,[o("div",Xs,[a(Pe,{name:"vertical-nav-section-title",mode:"out-in"},{default:i(()=>[(d(),P(D(e(t)?e(A).app.iconRenderer:e(A).app.i18n.enable?"i18n-t":"span"),G({key:e(t),class:e(t)?"placeholder-icon":"title-text"},{...e(A).icons.sectionTitlePlaceholder,...e(ie)(r.item.heading,"span")}),{default:i(()=>[I(b(e(t)?null:r.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):N("",!0)}}),eo=Oe({color:String,direction:{type:String,default:"vertical",validator:n=>["vertical","horizontal"].includes(n)},side:{type:String,default:"end",validator:n=>["start","end","both"].includes(n)},mode:{type:String,default:"intersect",validator:n=>["intersect","manual"].includes(n)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...At(),...Lt()},"VInfiniteScroll"),Le=zt({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootRef:null,rootMargin:String},emits:{intersect:(n,m)=>!0},setup(n,m){let{emit:t}=m;const{intersectionRef:r,isIntersecting:f}=Rt(c=>{},n.rootMargin?{rootMargin:n.rootMargin}:void 0);return H(f,async c=>{t("intersect",n.side,c)}),$e(()=>a("div",{class:"v-infinite-scroll-intersect",ref:r},[I("¬†")])),{}}}),to=Ge()({name:"VInfiniteScroll",props:eo(),emits:{load:n=>!0},setup(n,m){let{slots:t,emit:r}=m;const f=T(),c=ae("ok"),_=ae("ok"),h=L(()=>Tt(n.margin)),u=ae(!1);function y(S){if(!f.value)return;const p=n.direction==="vertical"?"scrollTop":"scrollLeft";f.value[p]=S}function C(){if(!f.value)return 0;const S=n.direction==="vertical"?"scrollTop":"scrollLeft";return f.value[S]}function l(){if(!f.value)return 0;const S=n.direction==="vertical"?"scrollHeight":"scrollWidth";return f.value[S]}function V(){if(!f.value)return 0;const S=n.direction==="vertical"?"clientHeight":"clientWidth";return f.value[S]}_e(()=>{f.value&&(n.side==="start"?y(l()):n.side==="both"&&y(l()/2-V()/2))});function w(S,p){S==="start"?c.value=p:S==="end"&&(_.value=p)}function z(S){return S==="start"?c.value:_.value}let g=0;function v(S,p){u.value=p,u.value&&k(S)}function k(S){if(n.mode!=="manual"&&!u.value)return;const p=z(S);if(!f.value||["empty","loading"].includes(p))return;g=l(),w(S,"loading");function R(E){w(S,E),we(()=>{E==="empty"||E==="error"||(E==="ok"&&S==="start"&&y(l()-g+C()),n.mode!=="manual"&&we(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{k(S)})})})}))})}r("load",{side:S,done:R})}const{t:s}=Mt();function x(S,p){var q,B,X,Z,ne;if(n.side!==S&&n.side!=="both")return;const R=()=>k(S),E={side:S,props:{onClick:R,color:n.color}};return p==="error"?(q=t.error)==null?void 0:q.call(t,E):p==="empty"?((B=t.empty)==null?void 0:B.call(t,E))??a("div",null,[s(n.emptyText)]):n.mode==="manual"?p==="loading"?((X=t.loading)==null?void 0:X.call(t,E))??a(pe,{indeterminate:!0,color:n.color},null):((Z=t["load-more"])==null?void 0:Z.call(t,E))??a(K,{variant:"outlined",color:n.color,onClick:R},{default:()=>[s(n.loadMoreText)]}):((ne=t.loading)==null?void 0:ne.call(t,E))??a(pe,{indeterminate:!0,color:n.color},null)}const{dimensionStyles:Q}=It(n);$e(()=>{const S=n.tag,p=n.side==="start"||n.side==="both",R=n.side==="end"||n.side==="both",E=n.mode==="intersect";return a(S,{ref:f,class:["v-infinite-scroll",`v-infinite-scroll--${n.direction}`,{"v-infinite-scroll--start":p,"v-infinite-scroll--end":R}],style:Q.value},{default:()=>{var q;return[a("div",{class:"v-infinite-scroll__side"},[x("start",c.value)]),f.value&&p&&E&&a(Le,{key:"start",side:"start",onIntersect:v,rootRef:f.value,rootMargin:h.value},null),(q=t.default)==null?void 0:q.call(t),f.value&&R&&E&&a(Le,{key:"end",side:"end",onIntersect:v,rootRef:f.value,rootMargin:h.value},null),a("div",{class:"v-infinite-scroll__side"},[x("end",_.value)])]}})})}}),ao={class:"d-flex align-start gap-3"},so={key:0},oo={class:"text-sm font-weight-medium mb-1"},no={class:"text-body-2 mb-2",style:{"letter-spacing":"0.4px !important","line-height":"18px"}},io={class:"text-sm text-disabled mb-0",style:{"letter-spacing":"0.4px !important","line-height":"18px"}},lo={class:"d-flex flex-column align-end"},ro=o("span",null," Cargar m√°s notificaciones",-1),co=j({__name:"NotificationsList",props:{notifications:{},badgeProps:{default:void 0},location:{default:"bottom start"},load:{},loading:{type:Boolean},unreadCount:{},nextPageUrl:{},enableInfiniteScroll:{type:Boolean}},emits:["read","unread","remove","click:notification","load-data-init","load-more"],setup(n,{emit:m}){const t=n,r=m,f=L(()=>t.notifications.some(u=>u.isSeen===!1)),c=()=>{if(f.value){const u=t.notifications.filter(y=>y.isSeen===!1).map(y=>y.id);r("read",u)}else{const u=t.notifications.filter(y=>y.isSeen===!0).map(y=>y.id);r("unread",u)}},_=L(()=>t.unreadCount),h=(u,y)=>{u?r("unread",[y]):r("read",[y])};return(u,y)=>{const C=he("IconBtn");return d(),P(C,{id:"notification-btn"},{default:i(()=>[a(Ue,G({dot:""},t.badgeProps,{content:e(_),color:"error","offset-x":"2","offset-y":"3"}),{default:i(()=>[a($,{icon:"tabler-bell"})]),_:1},16,["content"]),a(Bt,{activator:"parent",width:"380px",location:t.location,offset:"12px","close-on-content-click":!1},{default:i(()=>[a(O,{class:"d-flex flex-column"},{default:i(()=>[a(Gt,{class:"notification-section"},{append:i(()=>[a(me,{size:"small",color:"primary",class:"me-2"},{default:i(()=>[I(b(e(_))+" Nueva(s) ",1)]),_:1}),W(a(C,{size:"34",onClick:c},{default:i(()=>[a($,{size:"20",color:"high-emphasis",icon:e(f)?"tabler-mail-opened":"tabler-mail"},null,8,["icon"]),a(fe,{activator:"parent",location:"start"},{default:i(()=>[I(b(e(f)?"Marcar todo como le√≠do":"Marcar todo como no le√≠do"),1)]),_:1})]),_:1},512),[[Y,t.notifications.length]])]),default:i(()=>[a(qe,{class:"text-h6"},{default:i(()=>[I(" Notificationes ")]),_:1})]),_:1}),a(ye),a(je,{class:"notification-list rounded-0 py-0"},{default:i(()=>[a(to,{height:400,items:t.notifications},{loading:i(()=>[t.loading?(d(),P(pe,{key:0,indeterminate:"",color:"primary"})):N("",!0)]),default:i(()=>[(d(!0),M(te,null,ce(t.notifications,(l,V)=>(d(),M(te,{key:l},[V>0?(d(),P(ye,{key:0})):N("",!0),a(xe,{link:"",lines:"one","min-height":"66px",class:"list-item-hover-class",onClick:w=>u.$emit("click:notification",l)},{default:i(()=>[o("div",ao,[a(Ne,{color:l.color&&!l.img?l.color:void 0,variant:l.img?void 0:"tonal"},{default:i(()=>[l.text?(d(),M("span",so,b(("avatarText"in u?u.avatarText:e(Ke))(l.text)),1)):N("",!0),l.img?(d(),P(Fe,{key:1,src:("storageBack"in u?u.storageBack:e(Ae))(l.img)},null,8,["src"])):N("",!0),l.icon?(d(),P($,{key:2,icon:l.icon},null,8,["icon"])):N("",!0)]),_:2},1032,["color","variant"]),o("div",null,[o("p",oo,b(l.title),1),o("p",no,b(l.subtitle),1),o("p",io,b(l.time),1)]),a(Te),o("div",lo,[a($,{size:"10",icon:"tabler-circle-filled",color:l.isSeen?"#a8aaae":"primary",class:U([`${l.isSeen?"visible-in-hover":""}`,"mb-2"]),onClick:le(w=>h(l.isSeen,l.id),["stop"])},null,8,["color","class","onClick"]),l.isSeen?(d(),P($,{key:0,size:"20",icon:"tabler-x",class:"visible-in-hover",onClick:w=>u.$emit("remove",l.id)},null,8,["onClick"])):N("",!0)])])]),_:2},1032,["onClick"])],64))),128))]),_:1},8,["items"]),W(a(xe,{class:"text-center text-medium-emphasis",style:{"block-size":"56px"}},{default:i(()=>[a(Ot,null,{default:i(()=>[I("¬°No se encontr√≥ ninguna notificaci√≥n!")]),_:1})]),_:1},512),[[Y,!t.notifications.length]])]),_:1}),a(ye),t.nextPageUrl?(d(),P(se,{key:0,class:"pa-4"},{default:i(()=>[a(K,{block:"",size:"small",onClick:y[0]||(y[0]=l=>u.$emit("load-more"))},{default:i(()=>[ro]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1},8,["location"])]),_:1})}}}),uo=j({__name:"NavBarNotificationBell",emits:["reload-task"],setup(n,{emit:m}){const t=ge(),{toast:r}=Et(),f=T(!1),c=T([]),_=T(null),h=T(!1);T(!1);const u=T(0),y=async(g="/notification/getNotifications/"+t.user.id)=>{var v;if(g){h.value=!0;const{response:k,data:s}=await ue(g).get();h.value=!1,(v=k.value)!=null&&v.ok&&s.value&&(c.value.push(...s.value.notifications),_.value=s.value.nextPageUrl,u.value=s.value.unreadCount)}};y();const C=g=>{c.value.forEach((s,x)=>{g===s.id&&c.value.splice(x,1)});const{response:v,data:k}=ue("/notifications/remove").post({notification_ids:[g]})},l=async g=>{c.value.forEach(s=>{g.forEach(x=>{x===s.id&&(s.isSeen=!0,u.value=u.value-1)})});const{response:v,data:k}=await ue("/notification/markMultipleAsRead").post({notification_ids:g})},V=async g=>{c.value.forEach(s=>{g.forEach(x=>{x===s.id&&(s.isSeen=!1,u.value=u.value+1)})});const{response:v,data:k}=await ue("/notification/markMultipleAsUnread").post({notification_ids:g})},w=g=>{g.isSeen||l([g.id]),console.log("notification",g),g.action_url&&g.openInNewTab&&window.open(g.action_url,"_blank")};window.Echo.channel("user."+t.user.id).listen(".update-notification",g=>{u.value=g.activeNotificationsCount,c.value.forEach((v,k)=>{const s=g.notifications.find(x=>x.id===v.id);s&&(s.is_removed?c.value.splice(k,1):(v.isSeen=s.isSeen,v.time=s.time))})}).listen(".bell-notification",g=>{c.value.unshift(g),u.value=g.activeNotificationsCount,r("Tienes una nueva notificaci√≥n",g.title,"info","bottom-right")});const z=async()=>{f.value=!0,await y(_.value)};return(g,v)=>{const k=co;return d(),M("div",null,[a(k,{notifications:e(c),unreadCount:e(u),onRemove:C,onRead:l,onUnread:V,"onClick:notification":w,loading:e(h),getNotifications:y,"enable-infinite-scroll":e(f),nextPageUrl:e(_),onLoadMore:z,onLoadDataInit:y},null,8,["notifications","unreadCount","loading","enable-infinite-scroll","nextPageUrl"])])}}}),mo={class:"text-capitalize"},vo=j({__name:"BtnShowAllLoading",setup(n){const m=Ve(),t=L(()=>m.activeProcesses.value.length>0||m.queuedProcesses.value.length>0),r=L(()=>t.value?"tabler-blend-mode":m.completedProcesses.value.length>0?"tabler-history":"tabler-stack-3"),f=L(()=>m.activeProcesses.value.length>0?"rgb(var(--v-theme-primary))":m.queuedProcesses.value.length>0?"rgb(var(--v-theme-warning))":m.completedProcesses.value.length>0?"rgb(var(--v-theme-success))":"rgba(var(--v-theme-on-surface), var(--v-high-emphasis-opacity))"),c=L(()=>{const h=m.allProcesses.value.length,u=m.activeProcesses.value.length,y=m.queuedProcesses.value.length,C=m.completedProcesses.value.length;if(h===0)return"No hay procesos";let l=`Ver Todas (${h})`;return u>0&&(l+=` ‚Ä¢ ${u} activo${u!==1?"s":""}`),y>0&&(l+=` ‚Ä¢ ${y} en cola`),C>0&&(l+=` ‚Ä¢ ${C} completado${C!==1?"s":""}`),l});L(()=>m.allProcesses.value.length>0);const _=L(()=>{const h=["loading-icon"];return t.value&&h.push("spin-animation"),h.join(" ")});return(h,u)=>{const y=he("IconBtn");return d(),M("div",null,[a(y,{color:e(f),onClick:u[0]||(u[0]=C=>e(m).showProcessListModal()),class:U(["loading-btn",{"loading-btn--animated":e(t),"loading-btn--active":e(m).activeProcesses.value.length>0,"loading-btn--queued":e(m).queuedProcesses.value.length>0,"loading-btn--completed":e(m).completedProcesses.value.length>0&&e(m).activeProcesses.value.length===0}])},{default:i(()=>[a(fe,{activator:"parent",location:"bottom"},{default:i(()=>[o("span",mo,b(e(c)),1)]),_:1}),a($,{icon:e(r),class:U(e(_)),size:"20"},null,8,["icon","class"]),e(m).allProcesses.value.length>0?(d(),P(Ue,{key:0,content:e(m).allProcesses.value.length,color:e(m).activeProcesses.value.length>0?"primary":e(m).queuedProcesses.value.length>0?"warning":"success",class:U(["loading-badge",{"loading-badge--pulse":e(t)}])},null,8,["content","color","class"])):N("",!0)]),_:1},8,["color","class"])])}}}),fo=oe(vo,[["__scopeId","data-v-b955ce83"]]),{getMenuData:po}=ze(ge()),go={class:"d-flex h-100 align-center"},un=j({__name:"DefaultLayoutWithVerticalNav",setup(n){return(m,t)=>{const r=he("IconBtn"),f=fo,c=uo;return d(),P(e(Qs),{"nav-items":e(po)},{navbar:i(({toggleVerticalOverlayNavActive:_})=>{var h;return[o("div",go,[a(r,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:u=>_(!0)},{default:i(()=>[a($,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),a(qt),a(Te),a(f),e(be).app.i18n.enable&&((h=e(be).app.i18n.langConfig)!=null&&h.length)?(d(),P(Ht,{key:0,languages:e(be).app.i18n.langConfig},null,8,["languages"])):N("",!0),a(c,{class:"me-1"}),a(jt)])]}),footer:i(()=>[a(Ut)]),default:i(()=>[J(m.$slots,"default")]),_:3},8,["nav-items"])}}});export{un as default};

import{u as $}from"./useCrudBannerStore-935c86ac.js";import{d as E,a0 as A,k as N,$ as R,r as M,E as U,w as g,ay as F,a6 as Q,a as j,o as q,c as G,b as t,f as a,n as i,az as H,e as l,a4 as h,a9 as f,t as J,a1 as v,v as _,a7 as y}from"./index-b65adee0.js";import{S as K}from"./sweetalert2.all-ae952bba.js";import{V as w}from"./VCardText-42772504.js";import{V as C}from"./VContainer-295f8e31.js";import{V as L}from"./VSelect-2afcfd71.js";import{V as O}from"./VSpacer-9e984273.js";import{V as W}from"./VImg-6ba9c051.js";import{V as X}from"./VChip-ab42a1de.js";import{V as Y}from"./VRow-3491880d.js";import{V as Z}from"./VPagination-cb0e5857.js";import{V as tt}from"./VCard-2054b5f6.js";import{V as et}from"./VDataTable-c3cfc55e.js";import"./_commonjsHelpers-725317a4.js";import"./VTextField-099059fe.js";import"./VField-26f83fc3.js";import"./VList-612e774c.js";import"./ssrBoot-2a7c15f9.js";import"./VAvatar-24a5391c.js";import"./VDivider-f5079514.js";import"./dialog-transition-e44bbc91.js";import"./VMenu-2e30c9ab.js";const at={class:"me-3",style:{"inline-size":"80px"}},ot={class:"app-banner-search-filter d-flex align-center flex-wrap gap-4"},nt={class:"d-flex align-center py-2",style:{"inline-size":"10rem"}},st={colspan:"4"},lt={style:{"inline-size":"100"},class:"d-flex justify-center"},it={class:"text-sm text-disabled"},Pt=E({__name:"Index",setup(rt){const c=$(),b=A(),S=N(),{currentPage:s,totalPage:d,lastPage:k,totalData:B,banners:p,loading:z}=R(c),r=M(10),m=async(n=[])=>{await c.fetchAll({company_id:b.company.id,perPage:r.value,page:s.value,searchQuery:n})};U(async()=>{await m()}),g(s,async()=>{s.value>d.value&&(s.value=d.value)}),g(r,async()=>{s.value=1}),F([s,r],async()=>{await m()});const D=Q(()=>{const n=p.value.length?(s.value-1)*d.value+1:0,e=p.value.length+(s.value-1)*d.value;return`Mostrando ${n} a ${e} de ${B.value} registros`}),V=async(n="create",e)=>{S.push({name:"Banner-Form",params:{action:n,id:e}})},I=async(n,e)=>{const u=!n[e];(await c.changeState({id:n.id,value:u,field:e})).code==200&&(n.state=u)},P=async n=>{K.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async e=>{e.isConfirmed?(await c.fetchDelete(n),await m()):e.isDenied})},T=[{title:"Imagen",key:"path"},{title:"Estado",key:"state"},{title:"Acciones",key:"actions"}];return(n,e)=>{const u=j("PreloadInterno");return q(),G("div",null,[t(tt,null,{default:a(()=>[t(w,null,{default:a(()=>[t(i(et),{headers:T,items:i(p),"items-per-page":5},H({top:a(()=>[t(C,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[l("div",at,[t(L,{modelValue:i(r),"onUpdate:modelValue":e[0]||(e[0]=o=>h(r)?r.value=o:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(O),l("div",ot,[t(f,{color:"primary",onClick:e[1]||(e[1]=o=>V())},{default:a(()=>[J(" Subir Banner ")]),_:1})])]),_:1})]),"item.path":a(({item:o})=>[l("div",nt,[t(W,{src:o.path,class:"rounded"},null,8,["src"])])]),"item.state":a(({item:o})=>[t(X,{color:o.state==1?"success":"error",onClick:x=>I(o,"state")},{default:a(()=>[t(v,{start:"",size:"16",icon:o.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),l("span",null,_(o.state==1?"Activo":"Inactivo"),1),t(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":a(({item:o})=>[t(f,{icon:"",size:"x-small",color:"error",variant:"text",onClick:x=>P(o.id)},{default:a(()=>[t(v,{size:"22",icon:"tabler-trash"}),t(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),t(f,{icon:"",size:"x-small",color:"default",variant:"text",onClick:x=>V("edit",o.id)},{default:a(()=>[t(v,{size:"22",icon:"tabler-edit"}),t(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"])]),bottom:a(()=>[t(w,{class:"pt-2"},{default:a(()=>[t(Y,null,{default:a(()=>[t(C,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[l("span",it,_(i(D)),1),t(Z,{modelValue:i(s),"onUpdate:modelValue":e[2]||(e[2]=o=>h(s)?s.value=o:null),size:"small","total-visible":5,length:i(k)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[i(z).table?{name:"body",fn:a(()=>[l("tr",null,[l("td",st,[l("div",lt,[t(u)])])])]),key:"0"}:void 0]),1032,["items"])]),_:1})]),_:1})])}}});export{Pt as default};

import{s as Q,b as Y,d as te}from"./helpers-C0EwqvCj.js";import{a as oe}from"./formatters-BN2nx8Fd.js";import{_ as se}from"./ModalChangePassword.vue_vue_type_script_setup_true_lang-0LDG4kBD.js";import{r as Z}from"./validators-aR-Q5zwJ.js";import{_ as le}from"./AppSelect.vue_vue_type_script_setup_true_lang-CxyaLK82.js";import{_ as ie}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-D7H4qe_I.js";import{d as X,ac as ne,V as ee,r as y,aa as L,c as E,o as r,b as e,l as t,f as a,h as g,y as ae,e as l,D as v,E as _,b6 as re,a9 as j,b7 as R,b5 as de,U as ce,Y as me,N as ue,aT as H,a7 as V,Q as I,b8 as U,G as pe,F as J,q as K,ae as fe,Z as _e,$ as ge}from"./index-BaV16FCr.js";import{u as ve}from"./useFileUpload-fXYGTIKH.js";import{V as be}from"./VDialog-CPKJ-TIk.js";import{V as he,a as xe}from"./VToolbar-BSS9Uart.js";import{V as T,c as O,a as W,d as Ve}from"./VCard-Cu9KQF3n.js";import{V as G}from"./VCardText-CDLeL-c9.js";import{V as ye}from"./VForm-Cakuzm8b.js";import{V as M,a as k}from"./VRow-BFfZTps2.js";import{V as ke}from"./VFileInput-D7OBFRer.js";import{V as q}from"./VAvatar-BBYtPJKV.js";import{V as Ce}from"./VImg-Dx556MLp.js";import{V as De,a as we,b as Ee,c as Te}from"./VExpansionPanels-CW0ER3ia.js";import{V as Pe}from"./VDataTable-CwT5imX9.js";import{_ as Ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-2GBt7OCP.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-BP0KR5pZ.js";import"./VTextField-CL-0Z5oA.js";/* empty css                   */import"./VCounter-C2NgZD61.js";import"./VSelect-Bjp9kztP.js";import"./VList-RAYwNb6B.js";import"./ssrBoot-BMrzvYku.js";import"./VDivider-kUj94-mG.js";import"./dialog-transition-DCflx0be.js";import"./VMenu-Bue79pR2.js";import"./VCheckboxBtn-Bs1gRmrB.js";import"./VSelectionControl-CEJbriLn.js";import"./VChip-DTwUZwmi.js";import"./sweetalert2.esm.all-DV3w3JmD.js";/* empty css              */import"./VTable-BKakwtEv.js";import"./filter-NG0Xi5ff.js";const Se=l("b",{class:"text-warning"},"*",-1),Fe=X({__name:"ModalUploadExcelNomina",emits:["execute"],setup(P,{expose:z,emit:c}){const $=ne(),N=ee(),d=y({}),{toast:C}=de(),D=L({titleDialog:"Subir N贸mina",isDialogVisible:!1,isLoading:!1}),S=()=>{D.isDialogVisible=!D.isDialogVisible},B=async()=>{S(),i()},F=y(),h=y({company_id:null,type_education_id:null,archive:null}),x=y(ve());x.value.allowedExtensions=["xls","xlsx"];const A=y([]),o=L({form:!1}),i=async()=>{o.form=!0;const{data:n,response:s}=await R("note-dataForm").get();o.form=!1,s.status==200&&n&&(A.value=n.typeEducations)},u=async()=>{var s;h.value.archive=x.value.imageFile,h.value.company_id=N.user.company_id;const n=await((s=F.value)==null?void 0:s.validate());if(n!=null&&n.valid){const m=new FormData;for(const w in h.value)m.append(w,h.value[w]);m.append("user_id",String(N.user.id)),m.append("teacher_id",String(N.user.id)),o.form=!0;const{data:p,response:f}=await R("/import-consolidated-notes").post(m);o.form=!1,f.status==200&&p&&($.startLoading(p.batch_id),S())}else C("Faltan Campos Por Diligenciar","","danger")};return z({openDialog:B}),(n,s)=>{const m=ie,p=le;return r(),E("div",null,[e(be,{modelValue:t(D).isDialogVisible,"onUpdate:modelValue":s[4]||(s[4]=f=>t(D).isDialogVisible=f),persistent:"","max-width":"40rem",transition:"dialog-transition"},{default:a(()=>[t(o).form?ae("",!0):(r(),g(m,{key:0,onClick:s[0]||(s[0]=f=>S())})),l("div",null,[e(he,{color:"primary"},{default:a(()=>[e(xe,null,{default:a(()=>[v(_(t(D).titleDialog),1)]),_:1})]),_:1})]),e(T,null,{default:a(()=>[e(G,null,{default:a(()=>[e(ye,{ref_key:"formValidation",ref:F,"lazy-validation":""},{default:a(()=>[e(M,null,{default:a(()=>[e(k,{cols:"12",sm:"6"},{default:a(()=>[e(p,{clearable:"",modelValue:t(h).type_education_id,"onUpdate:modelValue":s[1]||(s[1]=f=>t(h).type_education_id=f),rules:["requiredValidator"in n?n.requiredValidator:t(Z)],"error-messages":t(d).type_education_id,label:"Tipo",onChange:s[2]||(s[2]=f=>t(d).type_education_id=""),requiredField:!0,items:t(A)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),e(k,{cols:"12",sm:"6"},{default:a(()=>[e(re,null,{default:a(()=>[v("Archivo"),Se]),_:1}),(r(),g(ke,{key:t(x).key,onChange:t(x).handleImageSelected,"onClick:clear":t(x).clearData,rules:["requiredValidator"in n?n.requiredValidator:t(Z)]},null,8,["onChange","onClick:clear","rules"]))]),_:1})]),_:1}),e(M,null,{default:a(()=>[e(k,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(j,{loading:t(o).form,disbaled:t(o).form,color:"primary",onClick:s[3]||(s[3]=f=>u())},{default:a(()=>[v(" Cargar informaci贸n ")]),_:1},8,["loading","disbaled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),b=P=>(_e("data-v-5daa55b5"),P=P(),ge(),P),ze={class:"d-flex flex-column align-center justify-center h-100"},Ae={class:"text-h2"},Me={class:"text-h5 font-weight-bold mb-1"},$e=b(()=>l("span",{class:"text-body-2 text-medium-emphasis mb-4"},"Panel Docente",-1)),Be=b(()=>l("h4",{class:"text-base font-weight-medium mb-4"},"Acciones Disponibles",-1)),Ie=b(()=>l("div",{class:"text-body-1 font-weight-medium"},"Descargar Reporte %",-1)),Ue=b(()=>l("div",{class:"text-caption text-disabled"},"Excel Estad铆sticas",-1)),qe=b(()=>l("div",{class:"text-body-1 font-weight-medium"},"Descargar N贸mina",-1)),Le=b(()=>l("div",{class:"text-caption text-disabled"},"Excel Consolidado",-1)),je=b(()=>l("div",{class:"text-body-1 font-weight-medium"},"Cargar Notas",-1)),Re=b(()=>l("div",{class:"text-caption text-disabled"},"Subir archivo Excel",-1)),Ge={key:0},Qe={class:"d-flex align-center"},Ye={class:"text-xs"},Ze={class:"font-weight-bold"},He={class:"text-caption"},Je={class:"d-flex align-center mb-2 bg-var-theme-background pa-2 rounded"},Ke={class:"font-weight-medium"},Oe={class:"d-flex align-center"},We={key:1,class:"text-center pa-10"},Xe=b(()=>l("p",null,"No tienes cursos asignados o planificaciones cargadas.",-1)),ea=X({__name:"DashboarTeacher",setup(P){const z=ee(),{user:c}=ce(z),$=me(()=>{var i;const o=((i=c.value)==null?void 0:i.full_name)||"";return o||"D"}),N=[{title:"Archivo",key:"name",sortable:!1},{title:"Acci贸n",key:"actions",sortable:!1,align:"end"}],d=L({form:!1,excel:!1,download:!1,excelPercentage:!1}),C=y(null);ue(async()=>{var u,n;d.form=!0;const{data:o,response:i}=await H("/teacher-planningShow/"+((u=c.value)==null?void 0:u.id)).get();d.form=!1,(n=i.value)!=null&&n.ok&&o.value&&(C.value=o.value.data)});const D=async()=>{var u;d.excel=!0;const{data:o,response:i}=await H("/teacher-downloadConsolidated/"+c.value.id).get();if(d.excel=!1,(u=i.value)!=null&&u.ok&&o.value){const n="Nomina_"+c.value.full_name;Y(o.value.excel,n)}},S=async()=>{d.excelPercentage=!0;const{response:o,data:i}=await R("/note-downloadConsolidatedPocentage").get({params:{teacher_id:c.value.id,company_id:z.company.id}});if(d.excelPercentage=!1,i.code==200){const u="Nomina_porcentajes_"+c.value.full_name;Y(i.excel,u)}},B=(o,i)=>{te(Q(o),i)},F=y(),h=()=>{F.value.openDialog()},x=y(),A=()=>{x.value.openDialog(c.value.id,!1)};return(o,i)=>{const u=Fe,n=se;return r(),E("div",null,[e(M,{class:"match-height mb-6"},{default:a(()=>[e(k,{cols:"12",md:"4",lg:"3"},{default:a(()=>[e(T,{class:"h-100 text-center pa-4"},{default:a(()=>{var s;return[l("div",ze,[(s=t(c))!=null&&s.photo?(r(),g(q,{key:0,color:"primary",variant:"tonal",size:"120",class:"mb-4"},{default:a(()=>{var m;return[e(Ce,{src:("storageBack"in o?o.storageBack:t(Q))((m=t(c))==null?void 0:m.photo)},null,8,["src"])]}),_:1})):(r(),g(q,{key:1,color:"primary",variant:"tonal",size:"120",class:"mb-4"},{default:a(()=>[l("span",Ae,_(("avatarText"in o?o.avatarText:t(oe))(t($))),1)]),_:1})),l("h3",Me,_(t(c).full_name),1),$e,e(j,{size:"small",variant:"text",color:"primary",onClick:i[0]||(i[0]=m=>A())},{default:a(()=>[e(V,{icon:"tabler-lock",start:""}),v(" Cambiar Clave ")]),_:1})])]}),_:1})]),_:1}),e(k,{cols:"12",md:"8",lg:"9"},{default:a(()=>[e(T,{class:"h-100"},{default:a(()=>[e(O,null,{default:a(()=>[e(W,{class:"text-h5"},{default:a(()=>[v("Gesti贸n Acad茅mica ")]),_:1}),e(Ve,{class:"mt-1"},{default:a(()=>[v(" Administre sus cargas de notas y planificaciones desde aqu铆. ")]),_:1})]),_:1}),e(G,{class:"mt-4"},{default:a(()=>[Be,e(M,null,{default:a(()=>[e(k,{cols:"12",sm:"6",md:"4"},{default:a(()=>[I((r(),g(T,{variant:"outlined",class:"text-center pa-4 card-hover cursor-pointer",onClick:S,loading:t(d).excelPercentage,disabled:t(d).excelPercentage},{default:a(()=>[e(V,{icon:"tabler-file-spreadsheet",size:"32",color:"success",class:"mb-2"}),Ie,Ue]),_:1},8,["loading","disabled"])),[[U]])]),_:1}),e(k,{cols:"12",sm:"6",md:"4"},{default:a(()=>[I((r(),g(T,{variant:"outlined",class:"text-center pa-4 card-hover cursor-pointer",onClick:D,loading:t(d).excel,disabeld:t(d).excel},{default:a(()=>[e(V,{icon:"tabler-file-spreadsheet",size:"32",color:"success",class:"mb-2"}),qe,Le]),_:1},8,["loading","disabeld"])),[[U]])]),_:1}),e(k,{cols:"12",sm:"6",md:"4"},{default:a(()=>[I((r(),g(T,{variant:"outlined",class:pe(["text-center pa-4 card-hover cursor-pointer",{"card-disabled":t(c).blockData}]),onClick:i[1]||(i[1]=s=>t(c).blockData?null:h())},{default:a(()=>[e(V,{icon:"tabler-upload",size:"32",color:"primary",class:"mb-2"}),je,Re]),_:1},8,["class"])),[[U]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{class:"mb-6",loading:t(d).form},{default:a(()=>[e(O,null,{default:a(()=>[e(W,null,{default:a(()=>[v(" Mis Planificaciones Activas")]),_:1})]),_:1}),t(C)?(r(),g(G,{key:0},{default:a(()=>[t(C).complementaries&&t(C).complementaries.length>0?(r(),E("div",Ge,[e(De,{variant:"accordion",multiple:""},{default:a(()=>[(r(!0),E(J,null,K(t(C).complementaries,(s,m)=>(r(),g(we,{key:m},{default:a(()=>[e(Ee,null,{default:a(()=>{var p;return[l("div",Qe,[e(q,{color:"primary",variant:"tonal",size:"32",class:"me-3"},{default:a(()=>[l("span",Ye,_(m+1),1)]),_:2},1024),l("div",null,[l("div",Ze,_(s.grade_name)+' "'+_(s.section_name)+'"',1),l("div",He,_(((p=s.subjects)==null?void 0:p.length)||0)+" Materias",1)])])]}),_:2},1024),e(Te,null,{default:a(()=>[(r(!0),E(J,null,K(s.subjects,(p,f)=>(r(),E("div",{key:f,class:"mb-4"},[l("div",Je,[e(V,{icon:"tabler-book",size:"20",class:"me-2"}),l("span",Ke,_(p.title),1)]),e(Pe,{headers:N,items:p.files,density:"compact","hide-default-footer":"",class:"border rounded"},{"item.name":a(({item:w})=>[l("div",Oe,[e(V,{icon:"tabler-file-type-pdf",color:"error",size:"20",class:"me-2"}),v(" "+_(w.name),1)])]),"item.actions":a(({item:w})=>[e(j,{icon:"",variant:"text",size:"small",color:"primary",onClick:aa=>B(w.file,w.name)},{default:a(()=>[e(V,{icon:"tabler-download"}),e(fe,{activator:"parent"},{default:a(()=>[v("Descargar")]),_:1})]),_:2},1032,["onClick"])]),bottom:a(()=>[]),_:2},1032,["items"])]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(r(),E("div",We,[e(V,{icon:"tabler-folder-off",size:"40",class:"text-disabled mb-2"}),Xe]))]),_:1})):ae("",!0)]),_:1},8,["loading"]),e(u,{ref_key:"refModalUploadExcelNomina",ref:F},null,512),e(n,{ref_key:"refModalChangePassword",ref:x},null,512)])}}}),qa=Ne(ea,[["__scopeId","data-v-5daa55b5"]]);export{qa as default};

import{r,ck as y,cl as A,aV as C,aM as L}from"./index-D2L9SnQS.js";const{toast:i}=C(),b=(k,x={})=>{const s=r(null),u=r(null),l=r(!1),c=r(null),d=y.create({baseURL:"https://back.colegiovirgendelvalle.com.co/api",headers:{"Content-Type":"application/json"},...x});d.interceptors.request.use(e=>{const t=A("accessToken").value;return t&&(e.headers.Authorization=`Bearer ${t}`),e.data instanceof FormData&&delete e.headers["Content-Type"],e},e=>Promise.reject(e));const n=async(e,t={})=>{var p,v,m,g,f,T,h;l.value=!0,u.value=null,s.value=null;try{const a=await d({url:k,method:e,...t});return c.value=a,s.value=a.data,(p=s.value)!=null&&p.message&&((v=s.value)==null?void 0:v.code)===200&&i("Ã‰xito",s.value.message,"success"),(m=s.value)!=null&&m.message&&((g=s.value)==null?void 0:g.code)===400&&i("",s.value.message,"warning"),{data:s.value,response:a}}catch(a){u.value=((f=a.response)==null?void 0:f.data)||a.message,c.value=a.response;const E=(T=a.response)==null?void 0:T.status,o=((h=a.response)==null?void 0:h.data)||{code:E,message:"Error desconocido"};return E===403||(o==null?void 0:o.code)===403?L.push({name:"NotAuthorized"}):o!=null&&o.message&&i("Error",o.message,"danger"),{data:o,response:a.response}}finally{l.value=!1}};return{data:s,error:u,isLoading:l,response:c,get:(e={})=>n("GET",e),post:(e,t={})=>n("POST",{data:e,...t}),put:(e,t={})=>n("PUT",{data:e,...t}),delete:(e={})=>n("DELETE",e)}};export{b as u};

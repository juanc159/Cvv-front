import{V as S,r as x}from"./VForm-fa5c9aa5.js";import{d as I,j as T,r as s,a0 as j,$ as D,E,o as _,c as N,b as a,f as e,n as r,g as $,t as g,a9 as q,e as R,aw as A,ax as U}from"./index-62a8d4f5.js";import{u as v}from"./useImageUpload-a6a68b5f.js";import{u as z}from"./useCrudBannerStore-120417e2.js";import{V as G}from"./VCardText-3f72e3f5.js";import{V as u}from"./VRow-40c52f12.js";import{V as m}from"./VCol-4eac919d.js";import{V as H}from"./VFileInput-16d85cd4.js";import{V as M}from"./VImg-5c0c0084.js";import{V as P}from"./VCard-7bf16d15.js";import"./helpers-3edea678.js";import"./VField-c4281105.js";import"./sweetalert2.all-ae952bba.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VChip-a8df01b2.js";import"./VAvatar-7b61dc52.js";const J=R("b",{class:"text-warning"},"*",-1),ua=I({__name:"Form",setup(K){const d=T(),{toast:h}=U(),f=s(),i=z(),k=j(),{form:p,loading:C}=D(i),V=s({}),y=s(v()),b=s([]),l=s(v()),w=["jpg","jpeg","png"];l.value.allowedExtensions=w;const B=async()=>{var n,c;p.value.company_id=k.company.id;const o=await((n=f.value)==null?void 0:n.validate());if(o!=null&&o.valid){const t=await i.fetchSave();(t==null?void 0:t.code)===200&&(b.value=[],V.value={},y.value.clearData(),await((c=f.value)==null?void 0:c.resetValidation())),(t==null?void 0:t.code)===422&&(V.value=t.errors??{})}else h("Faltan Campos Por Diligenciar","","danger")},F=o=>{l.value.handleImageSelected(o),setTimeout(()=>{p.value.path=l.value.imageFile},1e3)};return E(async()=>{i.clearForm(),d.params.id&&await i.fetchDataForm(Number(d.params.id),d.params.action)}),(o,n)=>{const c=A;return _(),N("div",null,[a(P,null,{default:e(()=>[a(G,null,{default:e(()=>[a(u,null,{default:e(()=>[a(m,null,{default:e(()=>[a(c,{"sub-title":"Formulario Banner",action:String(o.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:o.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),a(r(S),{ref_key:"formValidation",ref:f,"lazy-validation":""},{default:e(()=>[a(u,null,{default:e(()=>[a(m,{cols:"12",sm:"3"},{default:e(()=>[(_(),$(H,{accept:"image/*",rules:["requiredValidator"in o?o.requiredValidator:r(x)],key:r(l).key,onChange:n[0]||(n[0]=t=>F(t)),"onClick:clear":r(l).clearData},{label:e(()=>[g(" ImagenÂ "),J]),_:1},8,["rules","onClick:clear"]))]),_:1})]),_:1}),a(u,null,{default:e(()=>[a(m,{cols:"12"},{default:e(()=>[a(M,{src:r(l).imageUrl??r(p).path},null,8,["src"])]),_:1})]),_:1}),a(u,null,{default:e(()=>[a(m,{cols:"12",class:"d-flex justify-center"},{default:e(()=>[a(q,{loading:r(C).form,color:"primary",onClick:B},{default:e(()=>[g(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])}}});export{ua as default};

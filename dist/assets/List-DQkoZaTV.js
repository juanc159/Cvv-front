import{a as H}from"./formatters-DULOiX1-.js";import{ag as E,ah as F,aj as N,ak as Q,b as t,bq as J,ai as G,bu as K,Z as T,at as O,am as W,bb as X,ao as Y,aq as ee,a7 as y,bf as ae,ar as te,a$ as re,a8 as R,b1 as oe,F as L,z as se,d as le,U as ie,R as ne,r as w,M as de,o as V,c as A,f as r,ad as M,C as _,k as $,p as q,af as z,g as I,e as h,D as k,P as ue,Q as ce,G as me}from"./index-Z8yjMEyL.js";import{_ as ve}from"./ModalQuestion.vue_vue_type_script_setup_true_lang-C8P4ltD_.js";import{_ as fe}from"./ModalForm.vue_vue_type_script_setup_true_lang-r41AUU34.js";import{c as be}from"./createUrl-Byesqyha.js";import{V as P}from"./VCardText-CFtuL7xp.js";import{V as pe}from"./VSkeletonLoader-BYeWJBh2.js";import{V as ge,a as _e}from"./VRow-BY1yiZPY.js";import{V as U}from"./VCard-axVHqUoN.js";import{V as Ce}from"./VSpacer-BVZKqvIZ.js";import{V as j}from"./VAvatar-Dlp5tpjP.js";import{V as ye}from"./VTooltip-BgjDHe2P.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-MGyIRBWU.js";import"./VDialog-CCVUvqBf.js";import"./VOverlay-DJRawRwY.js";import"./VImg-DGFzG-hc.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-BA0cGV5h.js";import"./VForm-CT2kAE0i.js";import"./helpers-DMPihPy4.js";import"./constants-2GBt7OCP.js";import"./VInput-irjiHoXg.js";import"./VList-Vr-V037-.js";import"./ssrBoot-BhGtsao9.js";import"./VDivider-BpudqhSo.js";import"./VSwitch-C2ToMy69.js";import"./VSelectionControl-BHyxFVbB.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-CQVD0Ttz.js";import"./VTextField-DbYcYpiL.js";import"./index-0F-JFElI.js";/* empty css              */const Ve=E({divider:[Number,String],...F()},"VBreadcrumbsDivider"),ke=N()({name:"VBreadcrumbsDivider",props:Ve(),setup(e,b){let{slots:a}=b;return Q(()=>{var m;return t("li",{class:["v-breadcrumbs-divider",e.class],style:e.style},[((m=a==null?void 0:a.default)==null?void 0:m.call(a))??e.divider])}),{}}}),he=E({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...F(),...J(),...G({tag:"li"})},"VBreadcrumbsItem"),Be=N()({name:"VBreadcrumbsItem",props:he(),setup(e,b){let{slots:a,attrs:m}=b;const v=K(e,m),n=T(()=>{var s;return e.active||((s=v.isActive)==null?void 0:s.value)}),u=T(()=>n.value?e.activeColor:e.color),{textColorClasses:p,textColorStyles:i}=O(u);return Q(()=>t(e.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":n.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:n.value&&e.activeClass},p.value,e.class],style:[i.value,e.style],"aria-current":n.value?"page":void 0},{default:()=>{var s,C;return[v.isLink.value?t("a",{class:"v-breadcrumbs-item--link",href:v.href.value,"aria-current":n.value?"page":void 0,onClick:v.navigate},[((C=a.default)==null?void 0:C.call(a))??e.title]):((s=a.default)==null?void 0:s.call(a))??e.title]}})),{}}}),Se=E({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:W,items:{type:Array,default:()=>[]},...F(),...X(),...Y(),...G({tag:"ul"})},"VBreadcrumbs"),De=N()({name:"VBreadcrumbs",props:Se(),setup(e,b){let{slots:a}=b;const{backgroundColorClasses:m,backgroundColorStyles:v}=ee(y(e,"bgColor")),{densityClasses:n}=ae(e),{roundedClasses:u}=te(e);re({VBreadcrumbsDivider:{divider:y(e,"divider")},VBreadcrumbsItem:{activeClass:y(e,"activeClass"),activeColor:y(e,"activeColor"),color:y(e,"color"),disabled:y(e,"disabled")}});const p=T(()=>e.items.map(i=>typeof i=="string"?{item:{title:i},raw:i}:{item:i,raw:i}));return Q(()=>{const i=!!(a.prepend||e.icon);return t(e.tag,{class:["v-breadcrumbs",m.value,n.value,u.value,e.class],style:[v.value,e.style]},{default:()=>{var s;return[i&&t("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[a.prepend?t(oe,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},a.prepend):t(R,{key:"prepend-icon",start:!0,icon:e.icon},null)]),p.value.map((C,f,B)=>{var o;let{item:c,raw:x}=C;return t(L,null,[((o=a.item)==null?void 0:o.call(a,{item:c,index:f}))??t(Be,se({key:f,disabled:f>=B.length-1},typeof c=="string"?{title:c}:c),{default:a.title?()=>{var d;return(d=a.title)==null?void 0:d.call(a,{item:c,index:f})}:void 0}),f<B.length-1&&t(ke,null,{default:a.divider?()=>{var d;return(d=a.divider)==null?void 0:d.call(a,{item:x,index:f})}:void 0})])}),(s=a.default)==null?void 0:s.call(a)]}})}),{}}}),we={class:"text-body-1"},$e=h("b",null,"Total usuarios",-1),Pe={class:"v-avatar-group demo-avatar-group"},Re={class:"text-h5"},Te={class:"d-flex mt-5 gap-3 flex-wrap"},da=le({__name:"List",setup(e){const b=ie(),{company:a}=ne(b),m=T(()=>({0:"primary",1:"secondary",2:"info"})),v=[{title:"Acceso de usuarios",disabled:!1},{title:"Roles",disabled:!0}],n=w([]),u=w(!1),p=async()=>{var S,l;u.value=!0;const{data:o,response:d}=await z(be("/role/list",{query:{company_id:a.value.id}}));u.value=!1,(S=d.value)!=null&&S.ok&&((l=o.value)==null?void 0:l.code)==200&&(n.value=o.value.tableData)};de(async()=>{await p()});const i=async()=>{await p()},s=w(),C=()=>{s.value.handleCreate()},f=o=>{s.value.handleEdit(o)},B=async o=>{u.value=!0,await z(`/role/${o}`).delete(),u.value=!1,p()},c=w(),x=o=>{c.value.componentData.title="¿Está seguro que desea eliminar el registro?",c.value.openModal(o)};return(o,d)=>{const S=ve;return V(),A("div",null,[t(De,{items:v}),t(U,{title:"Listado de roles"},{default:r(()=>[t(P,null,{default:r(()=>[t(M,{color:"primary",onClick:d[0]||(d[0]=l=>C())},{prepend:r(()=>[t(R,{icon:"tabler-plus"})]),default:r(()=>[_(" Añadir nuevo rol ")]),_:1})]),_:1}),t(P,null,{default:r(()=>[t(pe,{type:"image, list-item-two-line",loading:$(u)},{default:r(()=>[t(ge,null,{default:r(()=>[(V(!0),A(L,null,q($(n),(l,Z)=>(V(),I(_e,{cols:"12",sm:"6",lg:"4",key:Z},{default:r(()=>[t(U,{variant:"elevated",density:"default"},{default:r(()=>[t(P,{style:{width:"100%",height:"40px"},class:"d-flex align-center pb-4"},{default:r(()=>[h("div",we,[$e,_(": "+k(l.count_users||0),1)]),t(Ce),h("div",Pe,[(V(!0),A(L,null,q(l.users,(g,D)=>(V(),I(j,{color:$(m)[D],size:"40",key:D},{default:r(()=>[_(k(("avatarText"in o?o.avatarText:$(H))(`${g.name} ${g.surname}`))+" ",1),t(ye,{activator:"parent",location:"top"},{default:r(()=>[_(k(`${g.name} ${g.surname}`),1)]),_:2},1024)]),_:2},1032,["color"]))),128)),ue(t(j,{color:o.$vuetify.theme.current.dark?"#373b50":"#eeedf0",size:"40"},{default:r(()=>[_(" +"+k(l.count_users_extras),1)]),_:2},1032,["color"]),[[ce,l.count_users_extras>0]])])]),_:2},1024),t(P,null,{default:r(()=>{var g;return[h("h5",Re,k(l.description),1),h("div",Te,[t(M,{onClick:D=>f(l)},{prepend:r(()=>[t(R,{icon:"tabler-edit"})]),default:r(()=>[_(" Editar rol ")]),_:2},1032,["onClick"]),((g=l.users)==null?void 0:g.length)==0?(V(),I(M,{key:0,color:"error",onClick:D=>x(l.id)},{prepend:r(()=>[t(R,{icon:"tabler-trash"})]),default:r(()=>[_(" Eliminar rol ")]),_:2},1032,["onClick"])):me("",!0)])]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),t(fe,{ref_key:"refModalForm",ref:s,onUpdateDataTable:i},null,512),t(S,{ref_key:"refModalQuestion",ref:c,onSuccess:B},null,512)])}}});export{da as default};

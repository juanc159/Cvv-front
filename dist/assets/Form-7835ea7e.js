import{V as S,r as f}from"./VForm-4dea0140.js";import{_ as w}from"./AppTextField.vue_vue_type_script_setup_true_lang-5366d6d0.js";import{_ as j}from"./AppSelect.vue_vue_type_script_setup_true_lang-487a7d69.js";import{d as B,p as $,r as V,R as T,Q as N,L as A,o as G,c as R,b as t,f as o,k as r,ag as E,B as U,aA as D,aB as J,aC as M}from"./index-41069d15.js";import{u as O}from"./useCrudGradeStore-b325416a.js";import{V as z}from"./VCardText-0f09333a.js";import{V as _}from"./VRow-31ccfeac.js";import{V as d}from"./VCol-a1de57fb.js";import{V as H}from"./VCard-598faf64.js";import"./helpers-3edea678.js";import"./VField-f1777662.js";import"./VTextField-e73d83ca.js";import"./VImg-5613246e.js";import"./VSelect-083b0325.js";import"./VList-cfef8051.js";import"./ssrBoot-ede5e026.js";import"./VAvatar-27a696a9.js";import"./VDivider-a80af930.js";import"./dialog-transition-8df5256f.js";import"./VMenu-9a01e84c.js";import"./VChip-c0bd6850.js";/* empty css              */const pe=B({__name:"Form",setup(I){const b=$(),{toast:g}=M(),p=V(),m=O(),C=T(),{form:l,loading:F,typeEducations:v}=N(m),n=V({}),k=async()=>{var e,u;l.value.company_id=C.company.id;const a=await((e=p.value)==null?void 0:e.validate());if(a!=null&&a.valid){const s=await m.fetchSave();(s==null?void 0:s.code)===200&&(n.value={},await((u=p.value)==null?void 0:u.resetValidation()),D.push({name:"Grade-Index"})),(s==null?void 0:s.code)===422&&(n.value=s.errors??{})}else g("Faltan Campos Por Diligenciar","","danger")};A(async()=>{m.clearForm(),await m.fetchDataForm(Number(b.params.id),b.params.action);const a=JSON.parse(JSON.stringify(l.value));await y(a.type_education_id),l.value.subjects=a.subjects});const c=V([]),y=async a=>{if(c.value=[],l.value.subjects=[],a){const e=await v.value.find(u=>u.value==a);c.value=e.subjects}};return(a,e)=>{const u=J,s=j,q=w;return G(),R("div",null,[t(H,null,{default:o(()=>[t(z,null,{default:o(()=>[t(_,null,{default:o(()=>[t(d,null,{default:o(()=>[t(u,{"sub-title":"Formulario Grado",action:String(a.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:a.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),t(r(S),{ref_key:"formValidation",ref:p,"lazy-validation":""},{default:o(()=>[t(_,null,{default:o(()=>[t(d,{cols:"12",sm:"3"},{default:o(()=>[t(s,{clearable:"",modelValue:r(l).type_education_id,"onUpdate:modelValue":[e[0]||(e[0]=i=>r(l).type_education_id=i),e[2]||(e[2]=i=>y(i))],rules:["requiredValidator"in a?a.requiredValidator:r(f)],"error-messages":r(n).type_education_id,label:"Tipo",onChange:e[1]||(e[1]=i=>r(n).type_education_id=""),requiredField:!0,items:r(v)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),t(d,{cols:"12",sm:"3"},{default:o(()=>[t(q,{clearable:"",modelValue:r(l).name,"onUpdate:modelValue":e[3]||(e[3]=i=>r(l).name=i),rules:["requiredValidator"in a?a.requiredValidator:r(f)],"error-messages":r(n).name,label:"Nombre",onKeypress:e[4]||(e[4]=i=>r(n).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),t(d,{cols:"12",sm:"3"},{default:o(()=>[t(s,{clearable:"",modelValue:r(l).subjects,"onUpdate:modelValue":e[5]||(e[5]=i=>r(l).subjects=i),"item-value":"id","item-title":"name",label:"Materias",multiple:"",requiredField:!0,items:r(c),rules:["requiredValidator"in a?a.requiredValidator:r(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},512),t(_,null,{default:o(()=>[t(d,{cols:"12",class:"d-flex justify-center"},{default:o(()=>[t(E,{loading:r(F).form,color:"primary",onClick:e[6]||(e[6]=i=>k())},{default:o(()=>[U(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{pe as default};

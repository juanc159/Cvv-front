import{_ as $}from"./AppSelect.vue_vue_type_script_setup_true_lang-B7VAs8De.js";import{_ as k}from"./AppTextField.vue_vue_type_script_setup_true_lang-CsCt6hsx.js";import{d as x,X as b,r as o,w as A,M as B,g as j,o as P,bY as w,p as C,f as n,b as p,af as E,H,n as N,j as O}from"./index-Dl5ek0NS.js";import{i as U}from"./helpers-DtRiZpzE.js";import{a as T,b as q}from"./VList-DX-PfAWU.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z=x({__name:"AppSelectRemote",props:{url:{type:String,required:!0},modelValue:{type:[Array,Object,String,Number],default:()=>[]},params:{type:[Object],default:()=>{}},multiple:{type:Boolean,default:!1},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},searchParam:{type:String,default:"searchQueryInfinite"},arrayInfo:{type:String,required:!0}},emits:["update:modelValue"],setup(i,{emit:I}){const r=i,S=I,y=b({get:()=>r.modelValue,set:t=>S("update:modelValue",t)}),u=o([]),a=o(""),d=o(1),s=o(!1),v=o(!0),m=o("");let _;const f=async(t=!1)=>{if(m.value="",!s.value){s.value=!0;try{t&&(d.value=1,u.value=[],v.value=!0);const{data:e}=await E(r.url).post({[r.searchParam]:a.value,page:d.value,...r.params}),c=r.arrayInfo+"_arrayInfo",g=r.arrayInfo+"_countLinks";e.value.data?(u.value=t?e.value.data:[...u.value,...e.value.data],v.value=e.value.current_page<e.value.last_page):(u.value=t?e.value[c]:[...u.value,...e.value[c]],v.value=e.value[g].length>1),d.value++}catch(e){m.value="Error al buscar datos."+e}finally{s.value=!1}}};A(a,t=>{clearTimeout(_),_=setTimeout(()=>f(!0),500)}),B(()=>{f()});const L=b(()=>s.value?"Buscando informaci√≥n...":m.value?m.value:U(a.value)?"Escribe algo para buscar...":`No se encontraron resultados para "<strong>${a.value}</strong>".`),h=()=>{a.value=""};return(t,e)=>{const c=k,g=$;return P(),j(g,{onBlur:h,returnObject:"",modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l),items:u.value,"item-title":i.itemTitle,"item-value":i.itemValue,multiple:i.multiple,search:a.value,loading:s.value,"onUpdate:search":e[3]||(e[3]=l=>a.value=l),clearable:""},w({"prepend-item":n(()=>[p(T,null,{default:n(()=>[p(c,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l),placeholder:"Teclee para buscar...",variant:"outlined",density:"compact","hide-details":"",clearable:"","onClick:clear":e[1]||(e[1]=l=>f(!0))},null,8,["modelValue"])]),_:1})]),"no-data":n(()=>[p(T,null,{default:n(()=>[p(q,{class:"text-center",innerHTML:L.value},null,8,["innerHTML"])]),_:1})]),_:2},[C(t.$slots,(l,V)=>({name:V,fn:n(M=>[H(t.$slots,V,N(O(M||{})),void 0,!0)])}))]),1032,["modelValue","items","item-title","item-value","multiple","search","loading"])}}}),J=R(z,[["__scopeId","data-v-e8e56f34"]]);export{J as _};

import{s as R,d as W,b as X}from"./helpers-D3s11r0A.js";import{a as ee}from"./formatters-ChfOiv2h.js";import{_ as ae}from"./ModalChangePassword.vue_vue_type_script_setup_true_lang-CSV1GHpf.js";import{r as G}from"./validators-BWDc7CJM.js";import{_ as oe}from"./AppSelect.vue_vue_type_script_setup_true_lang-pYrGxrl_.js";import{_ as te}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-D4lGEif_.js";import{d as K,V as O,r as V,aU as z,c as B,o as u,b as e,l as t,f as a,h as b,y as L,e as n,D,E as f,a8 as M,aJ as q,aV as le,U as se,Y as ne,N as ie,a6 as $,F as J,q as Y,Z as re,$ as de}from"./index-C7gq-Xb9.js";import{u as ue,V as ce}from"./VFileInput-Crq-98ur.js";import{V as me}from"./VDialog-DLue3QBw.js";import{V as fe,a as pe}from"./VToolbar-VdyFaCFb.js";import{V as U,a as F,c as _e}from"./VCard-DjR3dutK.js";import{V as x}from"./VCardText-DtR8cI_Q.js";import{V as ve}from"./VForm-CxFUQuVz.js";import{V as C,a as y}from"./VRow-DfkkFJQg.js";import{V as ge}from"./VInput-D04z8p--.js";import{V as Z}from"./VAvatar-BKM6izw6.js";import{V as Ve}from"./VImg-D87aqgsW.js";import{V as H}from"./VDivider-JBIkLMLZ.js";import{V as ye}from"./VDataTable-CH_o4kq9.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-2GBt7OCP.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-cHkkfYr8.js";import"./VTooltip-D3Gr4Qxj.js";import"./VOverlay-BArw2f8k.js";import"./forwardRefs-C-GTDzx5.js";import"./VTextField-Dj2nad-E.js";/* empty css                   */import"./VCounter--xPgYE0_.js";import"./VSelect-BuTSKxZ8.js";import"./VList-B9_by0pS.js";import"./ssrBoot-Cc7Riqe3.js";import"./dialog-transition-Dd-PIA-g.js";import"./VMenu-1IvMASI9.js";import"./VCheckboxBtn-CbsKncEP.js";import"./VSelectionControl-CHX8DjRR.js";import"./VChip-H-NQfO6J.js";import"./sweetalert2.esm.all-DV3w3JmD.js";/* empty css              */import"./VTable-VI3X9lYo.js";import"./filter-DlA0a0Hp.js";const he=n("b",{class:"text-warning"},"*",-1),ke=K({__name:"ModalUploadExcelNomina",emits:["execute"],setup(w,{expose:p,emit:Q}){const h=O(),E=V({}),{toast:I}=le(),d=z({titleDialog:"Subir Nómina",isDialogVisible:!1,isLoading:!1}),m=()=>{d.isDialogVisible=!d.isDialogVisible},P=async()=>{m(),i()},N=V(),_=V({company_id:null,type_education_id:null,archive:null}),v=V(ue());v.value.allowedExtensions=["xls","xlsx"];const S=V([]),l=z({form:!1}),i=async()=>{var r;l.form=!0;const{data:s,response:o}=await q("note-dataForm").get();l.form=!1,(r=o.value)!=null&&r.ok&&s.value&&(S.value=s.value.typeEducations)},k=async()=>{var o,r;_.value.archive=v.value.imageFile,_.value.company_id=h.user.company_id;const s=await((o=N.value)==null?void 0:o.validate());if(s!=null&&s.valid){const g=new FormData;for(const j in _.value)g.append(j,_.value[j]);g.append("teacher_id",h.user.id),l.form=!0;const{data:c,response:T}=await q("note-store").post(g);l.form=!1,(r=T.value)!=null&&r.ok&&c.value&&m()}else I("Faltan Campos Por Diligenciar","","danger")};return p({openDialog:P}),(s,o)=>{const r=te,g=oe;return u(),B("div",null,[e(me,{modelValue:t(d).isDialogVisible,"onUpdate:modelValue":o[4]||(o[4]=c=>t(d).isDialogVisible=c),persistent:"","max-width":"40rem",transition:"dialog-transition"},{default:a(()=>[t(l).form?L("",!0):(u(),b(r,{key:0,onClick:o[0]||(o[0]=c=>m())})),n("div",null,[e(fe,{color:"primary"},{default:a(()=>[e(pe,null,{default:a(()=>[D(f(t(d).titleDialog),1)]),_:1})]),_:1})]),e(U,null,{default:a(()=>[e(x,null,{default:a(()=>[e(ve,{ref_key:"formValidation",ref:N,"lazy-validation":""},{default:a(()=>[e(C,null,{default:a(()=>[e(y,{cols:"12",sm:"6"},{default:a(()=>[e(g,{clearable:"",modelValue:t(_).type_education_id,"onUpdate:modelValue":o[1]||(o[1]=c=>t(_).type_education_id=c),rules:["requiredValidator"in s?s.requiredValidator:t(G)],"error-messages":t(E).type_education_id,label:"Tipo",onChange:o[2]||(o[2]=c=>t(E).type_education_id=""),requiredField:!0,items:t(S)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),e(y,{cols:"12",sm:"6"},{default:a(()=>[e(ge,null,{default:a(()=>[D("Archivo "),he]),_:1}),(u(),b(ce,{key:t(v).key,onChange:t(v).handleImageSelected,"onClick:clear":t(v).clearData,rules:["requiredValidator"in s?s.requiredValidator:t(G)]},null,8,["onChange","onClick:clear","rules"]))]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(y,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(M,{loading:t(l).form,disbaled:t(l).form,color:"primary",onClick:o[3]||(o[3]=c=>k())},{default:a(()=>[D(" Cargar información ")]),_:1},8,["loading","disbaled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),A=w=>(re("data-v-943b526b"),w=w(),de(),w),xe={class:"title-text"},Ce={class:"membership-pricing d-flex flex-column align-center h-100 justify-center"},De={class:"me-auto"},we={class:"d-flex align-center mb-6"},Ne=A(()=>n("span",null,"Descargar Nómina",-1)),Te={class:"d-flex align-center mb-0"},Be=A(()=>n("span",null,"Subir Nómina",-1)),Ee={class:"ms-auto ps-4"},Se={class:"d-flex align-center mb-0"},$e=A(()=>n("span",null,"Cambiar contraseña",-1)),Fe=A(()=>n("h2",null,"Planificaciones ",-1)),Me={class:"d-flex align-center py-1"},Ue=["onClick"],qe=K({__name:"DashboarTeacher",setup(w){const p=O(),{company:Q,user:h}=se(p),E=ne(()=>{var i;const l=((i=p.user)==null?void 0:i.full_name)||"";return l||"S/N"}),I=[{title:"Título",key:"name",sortable:!1}],d=z({form:!1,excel:!1}),m=V();ie(async()=>{var s,o;d.form=!0;const{data:l,response:i,error:k}=await q("/teacher-planningShow/"+((s=p.user)==null?void 0:s.id)).get();d.form=!1,(o=i.value)!=null&&o.ok&&l.value&&(m.value=l.value.data)});const P=async l=>{var s;d.excel=!0;const{data:i,response:k}=await q("/teacher-downloadConsolidated/"+l.id).get();if(d.excel=!1,(s=k.value)!=null&&s.ok&&i.value){const o="Nómina "+l.full_name;X(i.value.excel,o)}},N=V(),_=()=>{N.value.openDialog()},v=V(),S=()=>{v.value.openDialog(h.value.id,!1)};return(l,i)=>{const k=ke,s=ae;return u(),B("div",null,[e(U,{class:"mb-6"},{default:a(()=>[e(F,{class:"d-flex justify-center align-center title-container"},{default:a(()=>[n("h3",xe,f(t(h).full_name),1)]),_:1}),e(C,null,{default:a(()=>[e(y,{cols:"12",sm:"4",md:"12",lg:"5",class:"member-pricing-bg text-center"},{default:a(()=>{var o;return[n("div",Ce,[(o=t(p).user)!=null&&o.photo?(u(),b(Z,{key:0,color:"primary",variant:"tonal",size:"250"},{default:a(()=>{var r;return[e(Ve,{src:("storageBack"in l?l.storageBack:t(R))((r=t(p).user)==null?void 0:r.photo)},null,8,["src"])]}),_:1})):(u(),b(Z,{key:1,color:"primary",variant:"tonal",size:"50"},{default:a(()=>[D(f(("avatarText"in l?l.avatarText:t(ee))(t(E))),1)]),_:1}))])]}),_:1}),e(y,{cols:"12",sm:"8",md:"12",lg:"7"},{default:a(()=>[e(_e,null,{default:a(()=>[e(F,null,{default:a(()=>[D("¡Bienvenido! 🎉")]),_:1})]),_:1}),e(x,null,{default:a(()=>[D(" Estimado profesor, En esta sección puede consultar todo lo relacionado con su planificación. Se agradece que revise cuidadosamente y, ante cualquier novedad, informe. Muchas gracias. ")]),_:1}),e(x,null,{default:a(()=>[e(H)]),_:1}),e(x,{class:"d-flex justify-center"},{default:a(()=>[n("div",De,[n("p",we,[e(M,{variant:"outlined",disabled:t(d).excel,loading:t(d).excel,onClick:i[0]||(i[0]=o=>P(t(p).user))},{default:a(()=>[e($,{icon:"tabler-download"}),Ne]),_:1},8,["disabled","loading"])]),n("p",Te,[e(M,{disabled:t(h).blockData,variant:"outlined",onClick:i[1]||(i[1]=o=>_())},{default:a(()=>[e($,{icon:"tabler-download"}),Be]),_:1},8,["disabled"])])]),l.$vuetify.display.smAndUp?(u(),b(H,{key:0,vertical:"",inset:""})):L("",!0),n("div",Ee,[n("p",Se,[e(M,{variant:"outlined",onClick:i[2]||(i[2]=o=>S())},{default:a(()=>[e($,{icon:"tabler-lock-open"}),$e]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,{class:"mb-6",outlined:""},{default:a(()=>[e(F,{class:"d-flex justify-center"},{default:a(()=>[Fe]),_:1}),t(m)?(u(),b(x,{key:0},{default:a(()=>[e(C,null,{default:a(()=>[e(y,{cols:"12",sm:"6"},{default:a(()=>{var o,r;return[n("h2",null,f((o=t(m))==null?void 0:o.name)+" "+f((r=t(m))==null?void 0:r.last_name),1)]}),_:1})]),_:1}),e(C,null,{default:a(()=>[(u(!0),B(J,null,Y(t(m).complementaries,(o,r)=>(u(),b(y,{cols:"12",key:r},{default:a(()=>[e(U,null,{default:a(()=>[e(F,{"primary-title":""},{default:a(()=>[n("h2",null,"Grado: "+f(o.grade_name)+" "+f(o.section_name),1)]),_:2},1024),e(x,null,{default:a(()=>[(u(!0),B(J,null,Y(o.subjects,(g,c)=>(u(),B("div",{key:c},[n("h3",null,"Planificacion: "+f(g.title),1),e(C,null,{default:a(()=>[e(y,{cols:"12"},{default:a(()=>[e(ye,{headers:I,items:g.files,"items-per-page":999},{"item.name":a(({item:T,index:j})=>[n("div",Me,[e($,{icon:"tabler-file",color:"primary"}),n("a",{href:"#",onClick:Ae=>("descargarArchivo"in l?l.descargarArchivo:t(W))(("storageBack"in l?l.storageBack:t(R))(T.file),T.name)},[n("b",null,f(T.name),1)],8,Ue)])]),bottom:a(()=>[]),_:2},1032,["items"])]),_:2},1024)]),_:2},1024)]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):L("",!0)]),_:1}),e(k,{ref_key:"refModalUploadExcelNomina",ref:N},null,512),e(s,{ref_key:"refModalChangePassword",ref:v},null,512)])}}}),Ca=be(qe,[["__scopeId","data-v-943b526b"]]);export{Ca as default};

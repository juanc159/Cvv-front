import{a as R}from"./formatters-1588bd0d.js";import{u as F}from"./useCrudTeacherStore-36e7e212.js";import{d as M,R as Q,q as U,Q as q,r as G,L as H,w as b,aD as J,ad as K,a as O,o as p,c as f,b as e,f as a,B as k,k as l,aE as W,e as r,ab as w,ag as v,D as X,g as T,C as y,F as D,m as Y,a8 as h,ae as V,E as Z}from"./index-f3b96d19.js";import{S as ee}from"./sweetalert2.all-e795d634.js";import{b as te,V as ae}from"./VCard-c8ced344.js";import{V as S}from"./VCardText-c3844e3c.js";import{V as z}from"./VContainer-4bad4327.js";import{V as oe}from"./VSelect-ae982381.js";import{V as se}from"./VSpacer-e9be6362.js";import{V as ne}from"./VAvatar-d9871067.js";import{V as le}from"./VImg-e73a88ae.js";import{V as ie,a as re,b as ce}from"./VList-d6e0bc34.js";import{V as pe}from"./VChip-23131e73.js";import{V as ue}from"./VRow-78945eb9.js";import{V as de}from"./VPagination-97aac340.js";import{V as me}from"./VDataTable-20bb9541.js";import{V as fe}from"./VDivider-a03056f4.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VTextField-205b1f25.js";import"./VField-d147bf3f.js";import"./dialog-transition-62156624.js";import"./VMenu-f8947885.js";import"./ssrBoot-86dbab6a.js";const ve={class:"me-3",style:{"inline-size":"80px"}},ye={class:"app-teacher-search-filter d-flex align-center flex-wrap gap-4"},he={key:1},Ve={colspan:"10"},_e={style:{"inline-size":"100"},class:"d-flex justify-center"},ge={class:"text-sm text-disabled"},He=M({__name:"Index",setup(xe){const u=F(),P=Q(),C=U(),{currentPage:n,totalPage:d,lastPage:B,totalData:I,teachers:_,loading:$}=q(u),i=G(10),g=async(s=[])=>{await u.fetchAll({company_id:P.company.id,perPage:i.value,page:n.value,searchQuery:s})};H(async()=>{await g()}),b(n,async()=>{n.value>d.value&&(n.value=d.value)}),b(i,async()=>{n.value=1}),J([n,i],async()=>{await g()});const A=K(()=>{const s=_.value.length?(n.value-1)*d.value+1:0,o=_.value.length+(n.value-1)*d.value;return`Mostrando ${s} a ${o} de ${I.value} registros`}),x=async(s="create",o)=>{if(s=="planning")return C.push({name:"Teacher-Planning",params:{id:o}}),!1;C.push({name:"Teacher-Form",params:{action:s,id:o}})},E=async(s,o)=>{const m=!s[o];(await u.changeState({id:s.id,value:m,field:o})).code==200&&(s.state=m)},L=async s=>{ee.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async o=>{o.isConfirmed?(await u.fetchDelete(s),await g()):o.isDenied})},N=[{title:"Acciones",key:"actions"},{title:"Estado",key:"state"},{title:"Foto",key:"photo"},{title:"Tipo de educación",key:"type_education_name"},{title:"Cargo",key:"job_position_name"},{title:"Nombre(s)",key:"name"},{title:"Apellido(s)",key:"last_name"},{title:"Correo",key:"email"},{title:"Telefono",key:"phone"},{title:"Materias",key:"subjects"}];return(s,o)=>{const m=O("PreloadInterno");return p(),f("div",null,[e(ae,null,{default:a(()=>[e(te,{"primary-title":""},{default:a(()=>[k("Listado de docentes")]),_:1}),e(S,null,{default:a(()=>[e(l(me),{headers:N,items:l(_),"items-per-page":l(i)},W({top:a(()=>[e(z,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[r("div",ve,[e(oe,{modelValue:l(i),"onUpdate:modelValue":o[0]||(o[0]=t=>w(i)?i.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(se),r("div",ye,[e(v,{color:"primary",onClick:o[1]||(o[1]=t=>x())},{default:a(()=>[k(" Crear Docente ")]),_:1})])]),_:1})]),"item.photo":a(({item:t})=>[e(ne,{color:t.photo?"":"primary",class:X(t.photo?null:"v-avatar-light-bg primary--text"),variant:t.photo?void 0:"tonal"},{default:a(()=>[t.photo?(p(),T(le,{key:0,src:t.photo},null,8,["src"])):(p(),f("span",he,y(("avatarText"in s?s.avatarText:l(R))(t.name+" "+t.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.subjects":a(({item:t})=>[e(ie,{border:""},{default:a(()=>[(p(!0),f(D,null,Y(t.subjects,(c,j)=>(p(),f(D,{key:c.name},[e(re,null,{default:a(()=>[e(ce,null,{default:a(()=>[k(y(c),1)]),_:2},1024)]),_:2},1024),j!==t.subjects.length-1?(p(),T(fe,{key:0})):Z("",!0)],64))),128))]),_:2},1024)]),"item.state":a(({item:t})=>[e(pe,{color:t.state==1?"success":"error",onClick:c=>E(t,"state")},{default:a(()=>[e(h,{start:"",size:"16",icon:t.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),r("span",null,y(t.state==1?"Activo":"Inactivo"),1),e(V,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":a(({item:t})=>[e(v,{icon:"",size:"x-small",color:"error",variant:"text",onClick:c=>L(t.id)},{default:a(()=>[e(h,{size:"22",icon:"tabler-trash"}),e(V,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:c=>x("edit",t.id)},{default:a(()=>[e(h,{size:"22",icon:"tabler-edit"}),e(V,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:c=>x("planning",t.id)},{default:a(()=>[e(h,{size:"22",icon:"tabler-file"}),e(V,{location:"top",transition:"scale-transition",activator:"parent",text:"Planificación"})]),_:2},1032,["onClick"])]),bottom:a(()=>[e(S,{class:"pt-2"},{default:a(()=>[e(ue,null,{default:a(()=>[e(z,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[r("span",ge,y(l(A)),1),e(de,{modelValue:l(n),"onUpdate:modelValue":o[2]||(o[2]=t=>w(n)?n.value=t:null),size:"small","total-visible":5,length:l(B)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[l($).table?{name:"body",fn:a(()=>[r("tr",null,[r("td",Ve,[r("div",_e,[e(m)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]),_:1})]),_:1})])}}});export{He as default};

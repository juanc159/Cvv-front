import{d as O,W as ye,T as pe,V as we,U as ke,r as B,X as Le,x as te,t as Ce,w as j,Y as A,z as N,a as fe,h as b,o as c,i as T,G as R,l as e,f as i,e as a,I as D,b as s,Q as H,R as F,E as p,B as z,c as S,F as ae,q as re,Z as ge,$ as he,a0 as ze,a1 as Ve,v as Re,a2 as xe,y as $,C as ee,D as L,a3 as $e,H as Pe,a4 as Y,N as _e,a5 as Be,a6 as C,a7 as ie,a8 as K,a9 as ue,aa as Ee,ab as Ge,ac as Oe,ad as qe,ae as je,af as De,ag as He,ah as de,ai as Fe,aj as We,ak as Ue,al as Ye,am as Ke,an as Qe,ao as Je,ap as Xe,aq as Ze,ar as et,as as tt,at,au as st,av as ot,aw as nt,ax as it,ay as Ne,az as rt,aA as lt,aB as ct,aC as ut,aD as dt,aE as vt,J as mt,K as pt,O as le}from"./index-lrlC7dU6.js";import{V as Se}from"./VTooltip-DtKi32nu.js";import{V as ft}from"./VBadge-C7DDxyPC.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import gt from"./Footer-CcbRWCxt.js";import{_ as ht}from"./NavbarThemeSwitcher.vue_vue_type_script_setup_true_lang-BeIXpl5g.js";import{_ as _t}from"./UserProfile.vue_vue_type_script_setup_true_lang-EBSIDKio.js";import{c as bt,a as Ie,_ as yt}from"./I18n.vue_vue_type_script_setup_true_lang-DHxCvs7o.js";import{V as ve,u as Pt,m as wt}from"./VOverlay-onlbvDoS.js";import{V as G,a as kt,b as Ct}from"./VCard-u4KjVU6S.js";import{V as me}from"./VCardText-BWBQCuaJ.js";import{V as Ae}from"./VAvatar-Dh--CA_q.js";import{V as Vt}from"./VDialog-BH4E8l9N.js";import{V as ce}from"./VChip-Bx98Ga3Z.js";import{V as xt,a as $t}from"./VList-B08cmeCh.js";import{V as Nt,a as ne}from"./VRow-Y-px9dy8.js";import{V as Te}from"./VSpacer-V03yeLhd.js";import{f as St}from"./forwardRefs-C-GTDzx5.js";import{s as It}from"./helpers-nlAMT8CX.js";import{C as At}from"./vue3-perfect-scrollbar-BE1X4LXo.js";import{V as Tt}from"./VNodeRenderer-3E6W8zFL.js";import{V as Mt}from"./VImg-CHZL3vTv.js";import"./VMenu-B5PHd5e4.js";import"./dialog-transition-B5aYFXc4.js";import"./formatters-YBNePeY6.js";import"./ModalChangePassword.vue_vue_type_script_setup_true_lang-DvNUW-gs.js";import"./validators-DKbmw92y.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-Ck9sddvT.js";import"./VInput-DI6tl7Gf.js";import"./VTextField-Cn0h9Jbo.js";/* empty css                   */import"./VCounter-B4tjcVkd.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-CHrMvmXo.js";import"./VToolbar-ChDo8ITW.js";import"./VForm-C1UsIQOl.js";import"./VDivider-Dcm9G-1v.js";import"./ssrBoot-4AFRnSrN.js";/* empty css              */import"./constants-2GBt7OCP.js";const Lt=O({name:"TransitionExpand",setup(r,{slots:t}){const v=u=>{const _=getComputedStyle(u).width;u.style.width=_,u.style.position="absolute",u.style.visibility="hidden",u.style.height="auto";const g=getComputedStyle(u).height;u.style.width="",u.style.position="",u.style.visibility="",u.style.height="0px",getComputedStyle(u).height,requestAnimationFrame(()=>{u.style.height=g})},o=u=>{u.style.height="auto"},P=u=>{const _=getComputedStyle(u).height;u.style.height=_,getComputedStyle(u).height,requestAnimationFrame(()=>{u.style.height="0px"})};return()=>ye(ye(pe),{name:"expand",onEnter:v,onAfterEnter:o,onLeave:P},()=>{var u;return(u=t.default)==null?void 0:u.call(t)})}}),zt=J(Lt,[["__scopeId","data-v-c7a0f8a6"]]),Rt=r=>(ge("data-v-3669b90c"),r=r(),he(),r),Bt={class:"nav-header"},Et={class:"header-action"},Gt=Rt(()=>a("div",{class:"vertical-nav-items-shadow"},null,-1)),Ot=O({__name:"VerticalNav",props:{tag:{default:"aside"},navItems:{},isOverlayNavActive:{type:Boolean},toggleIsOverlayNavActive:{}},setup(r){const t=we(),{company:v,user:o}=ke(t),P=r,u=B(),_=Le(u);ze(Ve,_);const g=te(),f=y=>"heading"in y?ks:"children"in y?Dt:Me,k=Ce();j(()=>k.name,()=>{P.toggleIsOverlayNavActive(!1)});const V=B(!1),l=y=>V.value=y,w=y=>{V.value=y.target.scrollTop>0},h=g.isVerticalNavMini(_),x=A(()=>{var y=v.value.name??N.app.title,d=9;return y.length<=d?y:y.slice(0,d)+"..."});return(y,d)=>{const M=fe("RouterLink");return c(),b(T(P.tag),{ref_key:"refNav",ref:u,class:R(["layout-vertical-nav",[{"overlay-nav":e(g).isLessThanOverlayNavBreakpoint,hovered:e(_),visible:y.isOverlayNavActive,scrolled:e(V)}]])},{default:i(()=>[a("div",Bt,[D(y.$slots,"nav-header",{},()=>[s(M,{to:{name:"Home"},class:"app-logo app-title-wrapper"},{default:i(()=>{var n,I;return[(n=e(v))!=null&&n.logo?(c(),b(Mt,{key:0,style:{width:"80px"},src:("storageBack"in y?y.storageBack:e(It))((I=e(v))==null?void 0:I.logo)},null,8,["src"])):(c(),b(e(Tt),{key:1,nodes:e(N).app.logo},null,8,["nodes"])),s(pe,{name:"vertical-nav-app-title"},{default:i(()=>[H(a("h1",{class:"app-logo-title"},p(e(x)),513),[[F,!e(h)]])]),_:1})]}),_:1}),a("div",Et,[H((c(),b(T(e(N).app.iconRenderer||"div"),z({class:["d-none nav-unpin",e(g).isVerticalNavCollapsed&&"d-lg-block"]},e(N).icons.verticalNavUnPinned,{onClick:d[0]||(d[0]=n=>e(g).isVerticalNavCollapsed=!e(g).isVerticalNavCollapsed)}),null,16,["class"])),[[F,e(g).isVerticalNavCollapsed]]),H((c(),b(T(e(N).app.iconRenderer||"div"),z({class:["d-none nav-pin",!e(g).isVerticalNavCollapsed&&"d-lg-block"]},e(N).icons.verticalNavPinned,{onClick:d[1]||(d[1]=n=>e(g).isVerticalNavCollapsed=!e(g).isVerticalNavCollapsed)}),null,16,["class"])),[[F,!e(g).isVerticalNavCollapsed]]),(c(),b(T(e(N).app.iconRenderer||"div"),z({class:"d-lg-none"},e(N).icons.close,{onClick:d[2]||(d[2]=n=>y.toggleIsOverlayNavActive(!1))}),null,16))])],!0)]),D(y.$slots,"before-nav-items",{},()=>[Gt],!0),D(y.$slots,"nav-items",{updateIsVerticalNavScrolled:l},()=>[(c(),b(e(At),{key:e(g).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:w},{default:i(()=>[(c(!0),S(ae,null,re(y.navItems,(n,I)=>(c(),b(T(f(n)),{key:I,item:n},null,8,["item"]))),128))]),_:1}))],!0),D(y.$slots,"after-nav-items",{},void 0,!0)]),_:3},8,["class"])}}}),qt=J(Ot,[["__scopeId","data-v-3669b90c"]]),jt={class:"nav-group-children"},Dt=O({name:"VerticalNavGroup",__name:"VerticalNavGroup",props:{item:{}},setup(r){const t=r,v=Ce(),o=Re(),P=te(),u=P.isVerticalNavMini(),_=xe(Ve,B(!1)),g=B(!1),f=B(!1),k=l=>l.some(w=>{let h=Y.value.includes(w.title);return"children"in w&&(h=k(w.children)||h),h}),V=l=>{l.forEach(w=>{"children"in w&&V(w.children),Y.value=Y.value.filter(h=>h!==w.title)})};return j(()=>v.path,()=>{const l=Pe(t.item.children,o);f.value=l&&!P.isVerticalNavMini(_).value,g.value=l},{immediate:!0}),j(f,l=>{const w=Y.value.indexOf(t.item.title);l&&w===-1?Y.value.push(t.item.title):!l&&w!==-1&&(Y.value.splice(w,1),V(t.item.children))},{immediate:!0}),j(Y,l=>{if(l.at(-1)===t.item.title)return;const h=Pe(t.item.children,o);h||k(t.item.children)||(f.value=h,g.value=h)},{deep:!0}),j(P.isVerticalNavMini(_),l=>{f.value=l?!1:g.value}),(l,w)=>e(bt)(l.item)?(c(),S("li",{key:0,class:R(["nav-group",[{active:e(g),open:e(f),disabled:l.item.disable}]])},[a("div",{class:"nav-group-label",onClick:w[0]||(w[0]=h=>f.value=!e(f))},[(c(),b(T(e(N).app.iconRenderer||"div"),z(l.item.icon||e(N).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(c(),b(T($e),{name:"transition-slide-x"},{default:i(()=>[H((c(),b(T(e(N).app.i18n.enable?"i18n-t":"span"),z(e(ee)(l.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:i(()=>[L(p(l.item.title),1)]),_:1},16)),[[F,!e(u)]]),l.item.badgeContent?H((c(),b(T(e(N).app.i18n.enable?"i18n-t":"span"),z({key:0},e(ee)(l.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",l.item.badgeClass]}),{default:i(()=>[L(p(l.item.badgeContent),1)]),_:1},16,["class"])),[[F,!e(u)]]):$("",!0),H((c(),b(T(e(N).app.iconRenderer||"div"),z(e(N).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[F,!e(u)]])]),_:1}))]),s(e(zt),null,{default:i(()=>[H(a("ul",jt,[(c(!0),S(ae,null,re(l.item.children,h=>(c(),b(T("children"in h?"VerticalNavGroup":e(Me)),{key:h.title,item:h},null,8,["item"]))),128))],512),[[F,e(f)]])]),_:1})],2)):$("",!0)}}),Ht=r=>(ge("data-v-2c4971bc"),r=r(),he(),r),Ft={class:"text-center mb-6"},Wt={class:"d-flex align-center justify-center mb-4"},Ut={class:"text-h5 font-weight-bold text-white mb-2"},Yt={class:"text-body-1 text-grey-400 mb-0"},Kt={class:"progress-section mb-6"},Qt={class:"d-flex justify-space-between align-center mb-3"},Jt=Ht(()=>a("span",{class:"text-body-2 font-weight-medium text-grey-300"}," Progreso ",-1)),Xt={class:"d-flex align-center"},Zt={class:"text-h6 font-weight-bold text-primary mr-2"},ea={class:"steps-section mb-6"},ta={key:0,class:"tips-section mb-6"},aa={class:"d-flex align-center"},sa={class:"text-body-2 text-grey-300 tip-text"},oa={class:"actions-section d-flex justify-space-between align-center"},na={class:"d-flex gap-2"},ia=O({__name:"LoadingV2Enhanced",props:{progress:{type:Number,default:0,validator:r=>r>=0&&r<=100},isLoading:{type:Boolean,default:!0},title:{type:String,default:"Procesando"},subtitle:{type:String,default:"Por favor espera mientras completamos la operación"},showTips:{type:Boolean,default:!0},showMultipleButton:{type:Boolean,default:!1},totalProcesses:{type:Number,default:2},tips:{type:Array,default:()=>["💡 Puedes cargar múltiples archivos simultáneamente","🚀 El proceso continuará ejecutándose en segundo plano","⚡ Recibirás una notificación cuando termine","🎨 Puedes cambiar entre modo claro y oscuro","🔧 El progreso se guarda automáticamente"]},steps:{type:Array,default:()=>["Validando archivo Excel","Procesando estructura de datos","Importando registros de estudiantes","Guardando notas en base de datos","Finalizando importación"]}},emits:["minimized","restored","completed","show-multiple"],setup(r,{expose:t,emit:v}){const o=r,P=v,u=B(0),_=B(0),g=B(!1);let f=null;const k=()=>{g.value=!0,P("minimized")},V=()=>{g.value=!1,P("restored")},l=A(()=>{const m=Math.max(0,Math.min(100,o.progress));return m>=100&&P("completed"),m}),w=A(()=>{const m=l.value;return m>=100?"🎉 ¡Proceso completado con éxito!":m>=90?"🔍 Realizando verificaciones finales...":m>=80?"📤 Guardando resultados en el sistema...":m>=70?"⚙️ Optimizando datos procesados...":m>=60?"📊 Procesando información recolectada...":m>=50?"📦 Organizando datos intermedios...":m>=40?"🔄 Cargando módulos secundarios...":m>=30?"🚀 Proceso en marcha, avanzando...":m>=20?"⚡ Preparando componentes principales...":m>=10?"🔌 Conectando con los servicios...":m>=0?"⏳ Inicializando sistema...":o.title||"Preparando carga..."}),h=A(()=>{const m=l.value;return m>=100?"Todo está listo para usar":m>=80?"Aplicando configuraciones finales":m>=60?"Organizando la información":m>=40?"Descargando componentes necesarios":m>=0?"Preparando el sistema":o.subtitle}),x=A(()=>{const m=l.value;return m>=100?"tabler-checks":m>=80?"tabler-circle-check":m>=60?"tabler-database":m>=40?"tabler-settings":m>=20?"tabler-rotate-2":"tabler-rotate-clockwise-2"}),y=A(()=>o.tips[u.value]||""),d=A(()=>o.steps);j(()=>o.progress,m=>{const Q=Math.floor(m/100*o.steps.length);_.value=Math.min(Q,o.steps.length-1)});const M=m=>m<_.value?"tabler-circle-check-filled":m===_.value&&l.value<100?"tabler-loader-2":m===_.value&&l.value>=100?"tabler-circle-check-filled":"tabler-circle",n=m=>m<_.value?"success":m===_.value?l.value>=100?"success":"primary":"grey-600",I=m=>m<_.value?"text-success font-weight-medium":m===_.value?l.value>=100?"text-success font-weight-medium":"text-primary font-weight-medium":"text-grey-500",U=()=>{o.showTips&&o.tips.length>1&&(f=setInterval(()=>{u.value=(u.value+1)%o.tips.length},5e3))},X=()=>{f&&(clearInterval(f),f=null)};return _e(()=>{U()}),Be(()=>{X()}),j(()=>o.isLoading,m=>{m?U():X()}),t({minimize:k,restore:V,isMinimized:g}),(m,Q)=>!g.value&&r.isLoading?(c(),b(ve,{key:0,"model-value":r.isLoading,class:"loading-overlay d-flex align-center justify-center",persistent:!0,opacity:.98,"z-index":9999},{default:i(()=>[s(G,{class:"loading-card",elevation:"0",rounded:"xl","min-width":"420",width:"90%","max-width":"500"},{default:i(()=>[s(me,{class:"pa-8"},{default:i(()=>[a("div",Ft,[a("div",Wt,[s(Ae,{size:"72",class:"loading-avatar",color:l.value>=100?"success":"primary"},{default:i(()=>[s(C,{size:l.value>=100?"32":"28",icon:x.value,color:"white",class:R(l.value<100?"spin-animation":"")},null,8,["size","icon","class"])]),_:1},8,["color"])]),a("h2",Ut,p(w.value),1),a("p",Yt,p(h.value),1)]),a("div",Kt,[a("div",Qt,[Jt,a("div",Xt,[a("span",Zt,p(Math.round(l.value))+"% ",1),l.value>=100?(c(),b(C,{key:0,icon:"tabler-eye",size:"16",color:"grey-400"})):$("",!0)])]),s(ie,{"model-value":l.value,height:"6",rounded:"",color:"primary","bg-color":"grey-800",class:"loading-progress"},null,8,["model-value"])]),a("div",ea,[s(G,{class:"steps-card pa-4",color:"grey-900",variant:"elevated",elevation:"2",rounded:"lg"},{default:i(()=>[(c(!0),S(ae,null,re(d.value,(se,W)=>(c(),S("div",{key:W,class:R(["step-item d-flex align-center mb-3",{"mb-0":W===d.value.length-1}])},[s(C,{icon:M(W),color:n(W),size:"20",class:R(["step-icon mr-3",{"spin-animation":W===_.value&&l.value<100}])},null,8,["icon","color","class"]),a("span",{class:R(["text-body-2",I(W)])},p(se),3)],2))),128))]),_:1})]),r.showTips?(c(),S("div",ta,[s(G,{class:"tip-card pa-3",color:"grey-800",variant:"flat",rounded:"lg"},{default:i(()=>[a("div",aa,[s(C,{icon:"tabler-bulb",color:"warning",size:"20",class:"mr-3"}),a("span",sa,p(y.value),1)])]),_:1})])):$("",!0),a("div",oa,[s(K,{variant:"elevated",color:"info",class:"text-none",onClick:k},{default:i(()=>[s(C,{start:"",icon:"tabler-minimize",size:"18"}),L(" Minimizar ")]),_:1}),a("div",na,[r.showMultipleButton?(c(),b(K,{key:0,variant:"elevated",color:"warning",class:"text-none",onClick:Q[0]||(Q[0]=se=>m.$emit("show-multiple"))},{default:i(()=>[s(C,{start:"",icon:"tabler-stack-2",size:"18"}),L(" Ver todos ("+p(r.totalProcesses||2)+") ",1)]),_:1})):$("",!0)])])]),_:1})]),_:1})]),_:1},8,["model-value"])):$("",!0)}}),ra=J(ia,[["__scopeId","data-v-2c4971bc"]]),q=r=>(ge("data-v-7bc91f60"),r=r(),he(),r),la={class:"d-flex align-center"},ca=q(()=>a("div",null,[a("h2",{class:"text-h5 font-weight-bold"},"Procesos de Importación"),a("p",{class:"text-body-2 text-medium-emphasis mb-0"},"Gestiona tus importaciones activas y completadas")],-1)),ua={class:"d-flex align-center gap-2"},da={class:"d-flex justify-space-between align-center mb-3"},va={class:"d-flex align-center"},ma=q(()=>a("span",{class:"text-h6 font-weight-medium"},"Progreso General",-1)),pa={class:"text-h5 font-weight-bold text-primary"},fa={class:"d-flex justify-space-between text-body-2 text-medium-emphasis"},ga={class:"d-flex align-center justify-space-between mb-3"},ha={class:"d-flex align-center"},_a={class:"text-h6 font-weight-bold"},ba={class:"d-flex align-center mt-1"},ya={class:"text-right"},Pa={class:"text-h5 font-weight-bold text-primary"},wa={class:"text-caption text-medium-emphasis"},ka={class:"mb-3"},Ca={class:"d-flex justify-space-between text-body-2 text-medium-emphasis"},Va={key:0},xa={key:0,class:"metadata-section"},$a={class:"d-flex align-center"},Na=q(()=>a("div",{class:"text-caption text-medium-emphasis"},"Registros",-1)),Sa={class:"text-h6 font-weight-bold"},Ia={class:"d-flex align-center"},Aa=q(()=>a("div",{class:"text-caption text-medium-emphasis"},"Hojas",-1)),Ta={class:"text-h6 font-weight-bold"},Ma={class:"d-flex align-center"},La=q(()=>a("div",{class:"text-caption text-medium-emphasis"},"Errores",-1)),za={class:"text-h6 font-weight-bold"},Ra={class:"d-flex align-center"},Ba=q(()=>a("div",{class:"text-caption text-medium-emphasis"},"Tiempo Rest.",-1)),Ea={class:"text-h6 font-weight-bold"},Ga={key:0,class:"mt-3"},Oa={class:"d-flex align-center justify-space-between"},qa={class:"d-flex align-center"},ja=q(()=>a("div",{class:"text-caption text-medium-emphasis"},"Procesando",-1)),Da={class:"text-body-1 font-weight-medium"},Ha={key:0,class:"text-right"},Fa=q(()=>a("div",{class:"text-caption text-medium-emphasis"},"Última actividad",-1)),Wa={class:"text-body-2"},Ua={key:1,class:"mt-3"},Ya={class:"d-flex align-center"},Ka=q(()=>a("div",null,[a("div",{class:"text-caption text-medium-emphasis"},"Estado"),a("div",{class:"text-body-1 font-weight-medium"},"En cola de espera")],-1)),Qa={key:2,class:"mt-3"},Ja={class:"d-flex align-center justify-space-between"},Xa={class:"d-flex align-center"},Za=q(()=>a("div",{class:"text-caption text-medium-emphasis"},"Completado",-1)),es={class:"text-body-1 font-weight-medium"},ts={key:0,class:"text-right"},as=q(()=>a("div",{class:"text-caption text-medium-emphasis"},"Finalizado",-1)),ss={class:"text-body-2"},os={class:"d-flex justify-end mt-3"},ns=O({__name:"ProcessListModal",props:{allProcesses:{},activeProcesses:{},completedProcesses:{},queuedProcesses:{},sortedProcesses:{}},emits:["removeProcess","clearCompleted","close"],setup(r,{emit:t}){const v=r,o=t,P=B(!0),u=A(()=>v.allProcesses.length===0?0:v.allProcesses.reduce((M,n)=>M+n.progress,0)/v.allProcesses.length),_=()=>v.activeProcesses.length===0?"success":"primary",g=()=>{o("clearCompleted")},f=d=>{switch(d){case"active":return"primary";case"completed":return"success";case"error":return"error";case"queued":return"warning";default:return"secondary"}},k=d=>{switch(d){case"active":return"tabler-loader-2";case"completed":return"tabler-circle-check-filled";case"error":return"tabler-alert-circle";case"queued":return"tabler-clock";default:return"tabler-help-circle"}},V=d=>{switch(d.status){case"active":return"Procesando";case"completed":return"Completado";case"error":return"Error";case"queued":return"En Cola";default:return"Desconocido"}},l=d=>{switch(d){case"connected":return"success";case"connecting":return"warning";case"reconnecting":return"info";case"error":return"error";case"disconnected":return"secondary";default:return"secondary"}},w=d=>{switch(d){case"connected":return"tabler-wifi";case"connecting":return"tabler-loader";case"reconnecting":return"tabler-refresh";case"error":return"tabler-wifi-off";case"disconnected":return"tabler-wifi-off";default:return"tabler-help-circle"}},h=d=>d?new Date(d).toLocaleTimeString():"N/A",x=d=>{const M=new Date,n=new Date(d),I=Math.floor((M.getTime()-n.getTime())/1e3);return I<60?`Hace ${I}s`:I<3600?`Hace ${Math.floor(I/60)}m`:h(d)},y=d=>{if(console.log("seconds",d),!d||d===0)return"N/A";if(d<60)return`${d}s`;const M=Math.floor(d/60),n=d%60;return`${M}m ${n}s`};return(d,M)=>(c(),b(Vt,{modelValue:P.value,"onUpdate:modelValue":M[1]||(M[1]=n=>P.value=n),"max-width":"60rem",persistent:""},{default:i(()=>[s(G,{class:"process-list-card"},{default:i(()=>[s(kt,{class:"d-flex align-center justify-space-between pa-6 pb-4"},{default:i(()=>[a("div",la,[s(C,{icon:"tabler-stack-2",class:"me-3",color:"primary",size:"28"}),ca]),a("div",ua,[s(ce,{color:_(),size:"large",variant:"elevated"},{default:i(()=>[s(C,{start:"",icon:"tabler-files"}),L(" "+p(d.allProcesses.length)+" proceso"+p(d.allProcesses.length!==1?"s":""),1)]),_:1},8,["color"]),d.completedProcesses.length>0?(c(),b(K,{key:0,variant:"outlined",color:"warning",size:"small",onClick:g},{default:i(()=>[s(C,{start:"",icon:"tabler-trash"}),L(" Limpiar ("+p(d.completedProcesses.length)+") ",1)]),_:1})):$("",!0)])]),_:1}),d.activeProcesses.length>0?(c(),b(me,{key:0,class:"px-6 py-0"},{default:i(()=>[s(G,{class:"overall-progress-card pa-4 mb-4",color:"grey-50",variant:"tonal"},{default:i(()=>[a("div",da,[a("div",va,[s(C,{icon:"tabler-chart-line",color:"primary",class:"me-2"}),ma]),a("span",pa,p(Math.round(u.value))+"%",1)]),s(ie,{"model-value":u.value,height:"12",rounded:"",color:"primary",class:"mb-3"},null,8,["model-value"]),a("div",fa,[a("span",null,p(d.completedProcesses.length)+" de "+p(d.allProcesses.length)+" procesos completados",1),a("span",null,p(d.activeProcesses.length)+" activo"+p(d.activeProcesses.length!==1?"s":""),1)])]),_:1})]),_:1})):$("",!0),s(me,{class:"pa-4"},{default:i(()=>[s(xt,{class:"process-list"},{default:i(()=>[(c(!0),S(ae,null,re(d.sortedProcesses,n=>(c(),b($t,{key:n.batch_id,class:R(["process-item pa-4 ma-2 rounded-lg",{"active-process":n.status==="active","queued-process":n.status==="queued","completed-process":n.status==="completed"}])},{default:i(()=>{var I,U;return[a("div",ga,[a("div",ha,[s(Ae,{color:f(n.status),size:"48",class:"me-3"},{default:i(()=>[s(C,{icon:k(n.status),color:"white",size:"24",class:R(n.status==="active"?"spin-animation":"")},null,8,["icon","class"])]),_:2},1032,["color"]),a("div",null,[a("h3",_a,p(n.file_name),1),a("div",ba,[s(ce,{color:f(n.status),size:"small",class:"me-2"},{default:i(()=>[L(p(V(n)),1)]),_:2},1032,["color"]),(I=n.metadata)!=null&&I.connection_status?(c(),b(ce,{key:0,color:l(n.metadata.connection_status),size:"small",variant:"outlined"},{default:i(()=>[s(C,{start:"",icon:w(n.metadata.connection_status),size:"14"},null,8,["icon"]),L(" "+p(n.metadata.connection_status),1)]),_:2},1032,["color"])):$("",!0)])])]),a("div",ya,[a("div",Pa,p(Math.round(n.progress))+"%",1),a("div",wa,p(h(n.started_at)),1)])]),a("div",ka,[s(ie,{"model-value":n.progress,height:"8",rounded:"",color:f(n.status),class:"mb-2"},null,8,["model-value","color"]),a("div",Ca,[a("span",null,p(n.current_action),1),(U=n.metadata)!=null&&U.processing_speed?(c(),S("span",Va,p(n.metadata.processing_speed)+" reg/s ",1)):$("",!0)])]),n.metadata?(c(),S("div",xa,[s(Nt,{class:"metadata-grid"},{default:i(()=>[s(ne,{cols:"12",sm:"6",md:"3"},{default:i(()=>[s(G,{class:"metadata-card pa-3",variant:"tonal",color:"info"},{default:i(()=>[a("div",$a,[s(C,{icon:"tabler-database",color:"info",class:"me-2"}),a("div",null,[Na,a("div",Sa,p(n.metadata.processed_records||0)+" / "+p(n.metadata.total_records||0),1)])])]),_:2},1024)]),_:2},1024),s(ne,{cols:"12",sm:"6",md:"3"},{default:i(()=>[s(G,{class:"metadata-card pa-3",variant:"tonal",color:"success"},{default:i(()=>[a("div",Ia,[s(C,{icon:"tabler-file-spreadsheet",color:"success",class:"me-2"}),a("div",null,[Aa,a("div",Ta,p(n.metadata.current_sheet||1)+" / "+p(n.metadata.total_sheets||1),1)])])]),_:2},1024)]),_:2},1024),s(ne,{cols:"12",sm:"6",md:"3"},{default:i(()=>[s(G,{class:"metadata-card pa-3",variant:"tonal",color:(n.metadata.errors_count||0)>0?"error":"grey"},{default:i(()=>[a("div",Ma,[s(C,{icon:(n.metadata.errors_count||0)>0?"tabler-alert-circle":"tabler-check-circle",color:(n.metadata.errors_count||0)>0?"error":"success",class:"me-2"},null,8,["icon","color"]),a("div",null,[La,a("div",za,p(n.metadata.errors_count||0),1)])])]),_:2},1032,["color"])]),_:2},1024),s(ne,{cols:"12",sm:"6",md:"3"},{default:i(()=>[s(G,{class:"metadata-card pa-3",variant:"tonal",color:"warning"},{default:i(()=>[a("div",Ra,[s(C,{icon:"tabler-clock",color:"warning",class:"me-2"}),a("div",null,[Ba,a("div",Ea,p(y(n.metadata.estimated_time_remaining)),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024),n.status==="active"?(c(),S("div",Ga,[s(G,{class:"active-details pa-3",variant:"tonal",color:"primary"},{default:i(()=>[a("div",Oa,[a("div",qa,[s(C,{icon:"tabler-user",color:"primary",class:"me-2"}),a("div",null,[ja,a("div",Da,p(n.current_student),1)])]),n.metadata.last_activity?(c(),S("div",Ha,[Fa,a("div",Wa,p(x(n.metadata.last_activity)),1)])):$("",!0)])]),_:2},1024)])):n.status==="queued"?(c(),S("div",Ua,[s(G,{class:"queued-details pa-3",variant:"tonal",color:"warning"},{default:i(()=>[a("div",Ya,[s(C,{icon:"tabler-hourglass",color:"warning",class:"me-2"}),Ka])]),_:1})])):n.status==="completed"?(c(),S("div",Qa,[s(G,{class:"completed-details pa-3",variant:"tonal",color:"success"},{default:i(()=>[a("div",Ja,[a("div",Xa,[s(C,{icon:"tabler-circle-check",color:"success",class:"me-2"}),a("div",null,[Za,a("div",es,p(n.metadata.total_records||0)+" registros procesados ",1)])]),n.completed_at?(c(),S("div",ts,[as,a("div",ss,p(h(n.completed_at)),1)])):$("",!0)])]),_:2},1024)])):$("",!0)])):$("",!0),a("div",os,[n.status==="completed"?(c(),b(K,{key:0,icon:"tabler-trash",size:"small",variant:"text",color:"error",onClick:ue(X=>d.$emit("removeProcess",n.batch_id),["stop"])},{default:i(()=>[s(C,{icon:"tabler-trash"}),s(Se,{activator:"parent",location:"top"},{default:i(()=>[L("Eliminar proceso")]),_:1})]),_:2},1032,["onClick"])):$("",!0)])]}),_:2},1032,["class"]))),128))]),_:1})]),_:1}),s(Ct,{class:"pa-6 pt-4"},{default:i(()=>[s(Te),s(K,{variant:"elevated",color:"primary",onClick:M[0]||(M[0]=n=>d.$emit("close"))},{default:i(()=>[s(C,{start:"",icon:"tabler-x"}),L(" Cerrar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),is=J(ns,[["__scopeId","data-v-7bc91f60"]]);function rs(r){const t=de(r);let v=-1;function o(){clearInterval(v)}function P(){o(),at(()=>t.value=r)}function u(_){const g=_?getComputedStyle(_):{transitionDuration:.2},f=parseFloat(g.transitionDuration)*1e3||200;if(o(),t.value<=0)return;const k=performance.now();v=window.setInterval(()=>{const V=performance.now()-k+f;t.value=Math.max(r-V,0),t.value<=0&&o()},f)}return tt(o),{clear:o,time:t,start:u,reset:P}}const ls=Ge({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...et({location:"bottom"}),...Ze(),...Xe(),...Je(),...Qe(),...Ke(wt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),cs=Ee()({name:"VSnackbar",props:ls(),emits:{"update:modelValue":r=>!0},setup(r,t){let{slots:v}=t;const o=Oe(r,"modelValue"),{positionClasses:P}=qe(r),{scopeId:u}=Pt(),{themeClasses:_}=je(r),{colorClasses:g,colorStyles:f,variantClasses:k}=De(r),{roundedClasses:V}=He(r),l=rs(Number(r.timeout)),w=B(),h=B(),x=de(!1),y=de(0),d=B(),M=xe(Fe,void 0);We(()=>!!M,()=>{const E=st();ot(()=>{d.value=E.mainStyles.value})}),j(o,I),j(()=>r.timeout,I),_e(()=>{o.value&&I()});let n=-1;function I(){l.reset(),window.clearTimeout(n);const E=Number(r.timeout);if(!o.value||E===-1)return;const Z=Ue(h.value);l.start(Z),n=window.setTimeout(()=>{o.value=!1},E)}function U(){l.reset(),window.clearTimeout(n)}function X(){x.value=!0,U()}function m(){x.value=!1,I()}function Q(E){y.value=E.touches[0].clientY}function se(E){Math.abs(y.value-E.changedTouches[0].clientY)>50&&(o.value=!1)}const W=A(()=>r.location.split(" ").reduce((E,Z)=>(E[`v-snackbar--${Z}`]=!0,E),{}));return Ye(()=>{const E=ve.filterProps(r),Z=!!(v.default||v.text||r.text);return s(ve,z({ref:w,class:["v-snackbar",{"v-snackbar--active":o.value,"v-snackbar--multi-line":r.multiLine&&!r.vertical,"v-snackbar--timer":!!r.timer,"v-snackbar--vertical":r.vertical},W.value,P.value,r.class],style:[d.value,r.style]},E,{modelValue:o.value,"onUpdate:modelValue":oe=>o.value=oe,contentProps:z({class:["v-snackbar__wrapper",_.value,g.value,V.value,k.value],style:[f.value],onPointerenter:X,onPointerleave:m},E.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:Q,onTouchend:se},u),{default:()=>{var oe,be;return[nt(!1,"v-snackbar"),r.timer&&!x.value&&s("div",{key:"timer",class:"v-snackbar__timer"},[s(ie,{ref:h,color:typeof r.timer=="string"?r.timer:"info",max:r.timeout,"model-value":l.time.value},null)]),Z&&s("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((oe=v.text)==null?void 0:oe.call(v))??r.text,(be=v.default)==null?void 0:be.call(v)]),v.actions&&s(it,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[s("div",{class:"v-snackbar__actions"},[v.actions({isActive:o})])]})]},activator:v.activator})}),St({},w)}}),us={key:1,class:"minimized-overlay"},ds={class:"minimized-info ms-3"},vs={class:"text-caption font-weight-medium"},ms={class:"text-caption text-medium-emphasis"},ps=O({__name:"GlobalLoadingManager",setup(r){const t=Ne(),v=B(!1);A(()=>t.currentProgress.value);const o=A(()=>{const h=t.currentProcess.value,x=t.currentProgress.value;return h?x>=100?"¡Importación Completada!":x===0?"Procesando importación":h.current_action||"Procesando importación":"Sin proceso activo"}),P=A(()=>{const h=t.currentProcess.value,x=t.currentProgress.value;if(!h)return"Sin proceso activo";if(x>=100)return"¡El archivo se ha procesado exitosamente!";if(x===0)return"Iniciando proceso de importación...";let y=`${Math.round(x)}% completado - ${h.current_student}`;return t.queuedProcesses.value.length>0&&(y+=` • ${t.queuedProcesses.value.length} en cola`),y}),u=()=>{console.log("✅ [MANAGER] Loading completed")},_=()=>{t.minimize()},g=()=>{t.restore()},f=()=>{t.showProcessListModal()},k=h=>{t.removeProcess(h)},V=()=>{t.clearCompletedProcesses()},l=()=>{t.hideProcessListModal()},w=()=>{t.onCompleted(h=>{console.log(`🎉 [MANAGER] ¡IMPORTACIÓN COMPLETADA! Batch: ${h}`),t.isMinimized.value&&(v.value=!0)}),t.onError((h,x)=>{console.error(`❌ [MANAGER] Error en batch ${h}:`,x)}),t.onProgressUpdated((h,x)=>{console.log(`📊 [MANAGER] Progreso: ${x}% para batch ${h}`)})};return _e(()=>{console.log("🚀 [MANAGER] GlobalLoadingManager mounted"),w()}),rt(()=>{console.log("🧹 [MANAGER] GlobalLoadingManager unmounting"),t.cleanup()}),(h,x)=>(c(),S(ae,null,[e(t).isLoading.value&&!e(t).isMinimized.value?(c(),b(ra,{key:0,"is-loading":!0,progress:e(t).currentProgress.value,title:o.value,subtitle:P.value,onMinimized:_,onCompleted:u,"show-multiple-button":e(t).hasMultipleProcesses.value,onShowMultiple:f,"debug-data":e(t).debugInfo.value},null,8,["progress","title","subtitle","show-multiple-button","debug-data"])):e(t).isLoading.value&&e(t).isMinimized.value?(c(),S("div",us,[s(G,{class:"minimized-card",onClick:g},{default:i(()=>[s(lt,{"model-value":e(t).currentProgress.value,color:"primary",size:"40",width:"3"},{default:i(()=>[L(p(Math.round(e(t).currentProgress.value))+"% ",1)]),_:1},8,["model-value"]),a("div",ds,[a("div",vs,p(e(t).activeProcesses.value.length)+" activo"+p(e(t).activeProcesses.value.length!==1?"s":"")+" "+p(e(t).queuedProcesses.value.length>0?`, ${e(t).queuedProcesses.value.length} en cola`:""),1),a("div",ms,p(Math.round(e(t).currentProgress.value))+"% completado ",1)]),s(K,{icon:"",size:"small",variant:"text",onClick:ue(f,["stop"]),class:"ms-2"},{default:i(()=>[s(C,{icon:"tabler-list"})]),_:1}),s(C,{class:"minimize-icon ms-2",icon:"tabler-chevron-up",onClick:ue(g,["stop"])})]),_:1})])):$("",!0),e(t).showProcessList.value?(c(),b(is,{key:2,"all-processes":e(t).allProcesses.value,"active-processes":e(t).activeProcesses.value,"completed-processes":e(t).completedProcesses.value,"queued-processes":e(t).queuedProcesses.value,"sorted-processes":e(t).sortedProcesses.value,onRemoveProcess:k,onClearCompleted:V,onClose:l},null,8,["all-processes","active-processes","completed-processes","queued-processes","sorted-processes"])):$("",!0),s(cs,{modelValue:v.value,"onUpdate:modelValue":x[1]||(x[1]=y=>v.value=y),timeout:5e3,color:"success",location:"top"},{actions:i(()=>[s(K,{variant:"text",onClick:x[0]||(x[0]=y=>v.value=!1)},{default:i(()=>[L(" Cerrar ")]),_:1})]),default:i(()=>[s(C,{start:"",icon:"tabler-check"}),L(" ¡Importación completada exitosamente! ")]),_:1},8,["modelValue"])],64))}}),fs=J(ps,[["__scopeId","data-v-8f23b7df"]]),gs={class:"layout-content-wrapper"},hs={class:"navbar-content-container"},_s={class:"layout-page-content"},bs={class:"page-content-container"},ys=O({__name:"VerticalNavLayout",props:{navItems:{},verticalNavAttrs:{default:()=>({})}},setup(r){const t=r,{width:v}=ct(),o=te(),P=B(!1),u=B(!1),_=ut(P);dt(P,u),j(v,()=>{!o.isLessThanOverlayNavBreakpoint&&u.value&&(u.value=!1)});const g=A(()=>{const f=vt(t,"verticalNavAttrs"),{wrapper:k,wrapperProps:V,...l}=f.value;return{verticalNavWrapper:k,verticalNavWrapperProps:V,additionalVerticalNavAttrs:l}});return(f,k)=>{const V=fs;return c(),S("div",{class:R(["layout-wrapper",e(o)._layoutClasses])},[(c(),b(T(e(g).verticalNavWrapper?e(g).verticalNavWrapper:"div"),z(e(g).verticalNavWrapperProps,{class:"vertical-nav-wrapper"}),{default:i(()=>[s(e(qt),z({"is-overlay-nav-active":e(P),"toggle-is-overlay-nav-active":e(_),"nav-items":t.navItems},{...e(g).additionalVerticalNavAttrs}),{"nav-header":i(()=>[D(f.$slots,"vertical-nav-header")]),"before-nav-items":i(()=>[D(f.$slots,"before-vertical-nav-items")]),_:3},16,["is-overlay-nav-active","toggle-is-overlay-nav-active","nav-items"])]),_:3},16)),a("div",gs,[a("header",{class:R(["layout-navbar",[{"navbar-blur":e(o).isNavbarBlurEnabled}]])},[a("div",hs,[D(f.$slots,"navbar",{toggleVerticalOverlayNavActive:e(_)})])],2),a("main",_s,[a("div",bs,[D(f.$slots,"default")])]),s(V)]),a("div",{class:R(["layout-overlay",[{visible:e(u)}]]),onClick:k[0]||(k[0]=()=>{u.value=!e(u)})},null,2)],2)}}}),Me=O({__name:"VerticalNavLink",props:{item:{}},setup(r){const v=te().isVerticalNavMini();return(o,P)=>e(Ie)(o.item.action,o.item.subject)?(c(),S("li",{key:0,class:R(["nav-link",{disabled:o.item.disable}])},[(c(),b(T(o.item.to?"RouterLink":"a"),z(e(pt)(o.item),{class:{"router-link-active router-link-exact-active":e(mt)(o.item,o.$router)}}),{default:i(()=>[(c(),b(T(e(N).app.iconRenderer||"div"),z(o.item.icon||e(N).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),s($e,{name:"transition-slide-x"},{default:i(()=>[H((c(),b(T(e(N).app.i18n.enable?"i18n-t":"span"),z({key:"title",class:"nav-item-title"},e(ee)(o.item.title,"span")),{default:i(()=>[L(p(o.item.title),1)]),_:1},16)),[[F,!e(v)]]),o.item.badgeContent?H((c(),b(T(e(N).app.i18n.enable?"i18n-t":"span"),z({key:"badge",class:["nav-item-badge",o.item.badgeClass]},e(ee)(o.item.badgeContent,"span")),{default:i(()=>[L(p(o.item.badgeContent),1)]),_:1},16,["class"])),[[F,!e(v)]]):$("",!0)]),_:1})]),_:1},16,["class"]))],2)):$("",!0)}}),Ps={key:0,class:"nav-section-title"},ws={class:"title-wrapper"},ks=O({__name:"VerticalNavSectionTitle",props:{item:{}},setup(r){const v=te().isVerticalNavMini();return(o,P)=>e(Ie)(o.item.action,o.item.subject)?(c(),S("li",Ps,[a("div",ws,[s(pe,{name:"vertical-nav-section-title",mode:"out-in"},{default:i(()=>[(c(),b(T(e(v)?e(N).app.iconRenderer:e(N).app.i18n.enable?"i18n-t":"span"),z({key:e(v),class:e(v)?"placeholder-icon":"title-text"},{...e(N).icons.sectionTitlePlaceholder,...e(ee)(o.item.heading,"span")}),{default:i(()=>[L(p(e(v)?null:o.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):$("",!0)}}),Cs={key:0},Vs={class:"text-capitalize"},xs=O({__name:"BtnShowAllLoading",setup(r){const t=Ne(),v=A(()=>t.activeProcesses.value.length>0||t.queuedProcesses.value.length>0),o=A(()=>v.value?"tabler-blend-mode":t.completedProcesses.value.length>0?"tabler-history":"tabler-stack-3"),P=A(()=>t.activeProcesses.value.length>0?"rgb(var(--v-theme-primary))":t.queuedProcesses.value.length>0?"rgb(var(--v-theme-warning))":t.completedProcesses.value.length>0?"rgb(var(--v-theme-success))":"rgba(var(--v-theme-on-surface), var(--v-high-emphasis-opacity))"),u=A(()=>{const f=t.allProcesses.value.length,k=t.activeProcesses.value.length,V=t.queuedProcesses.value.length,l=t.completedProcesses.value.length;if(f===0)return"No hay procesos";let w=`Ver Todas (${f})`;return k>0&&(w+=` • ${k} activo${k!==1?"s":""}`),V>0&&(w+=` • ${V} en cola`),l>0&&(w+=` • ${l} completado${l!==1?"s":""}`),w}),_=A(()=>t.allProcesses.value.length>0),g=A(()=>{const f=["loading-icon"];return v.value&&f.push("spin-animation"),f.join(" ")});return(f,k)=>{const V=fe("IconBtn");return _.value?(c(),S("div",Cs,[s(V,{color:P.value,onClick:k[0]||(k[0]=l=>e(t).showProcessListModal()),class:R(["loading-btn",{"loading-btn--animated":v.value,"loading-btn--active":e(t).activeProcesses.value.length>0,"loading-btn--queued":e(t).queuedProcesses.value.length>0,"loading-btn--completed":e(t).completedProcesses.value.length>0&&e(t).activeProcesses.value.length===0}])},{default:i(()=>[s(Se,{activator:"parent",location:"bottom"},{default:i(()=>[a("span",Vs,p(u.value),1)]),_:1}),s(C,{icon:o.value,class:R(g.value),size:"20"},null,8,["icon","class"]),e(t).allProcesses.value.length>0?(c(),b(ft,{key:0,content:e(t).allProcesses.value.length,color:e(t).activeProcesses.value.length>0?"primary":e(t).queuedProcesses.value.length>0?"warning":"success",class:R(["loading-badge",{"loading-badge--pulse":v.value}])},null,8,["content","color","class"])):$("",!0)]),_:1},8,["color","class"])])):$("",!0)}}}),$s=J(xs,[["__scopeId","data-v-ca090eb7"]]),{getMenuData:Ns}=ke(we()),Ss={class:"d-flex h-100 align-center"},go=O({__name:"DefaultLayoutWithVerticalNav",setup(r){return(t,v)=>{const o=fe("IconBtn"),P=$s;return c(),b(e(ys),{"nav-items":e(Ns)},{navbar:i(({toggleVerticalOverlayNavActive:u})=>{var _;return[a("div",Ss,[s(o,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:g=>u(!0)},{default:i(()=>[s(C,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),s(ht),s(P),s(Te),e(le).app.i18n.enable&&((_=e(le).app.i18n.langConfig)!=null&&_.length)?(c(),b(yt,{key:0,languages:e(le).app.i18n.langConfig},null,8,["languages"])):$("",!0),s(_t)])]}),footer:i(()=>[s(gt)]),default:i(()=>[D(t.$slots,"default")]),_:3},8,["nav-items"])}}});export{go as default};

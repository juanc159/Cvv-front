import{V as O,r as _}from"./VForm-86168020.js";import{d as P,a6 as F,aB as S,o as p,c as k,n as l,g as h,f as a,t as v,v as Q,y as B,b as e,az as W,i as E,z as X,aC as A,aD as z,x as Y,e as q,r as C,j as Z,$ as x,E as ee,w as ae,a9 as U,F as le,aw as te,ax as re,a1 as oe,a7 as se}from"./index-43b494b0.js";import{V as ie}from"./VField-5f0834de.js";import{V as ne}from"./VSelect-1a020726.js";import{_ as de}from"./AppTextField.vue_vue_type_script_setup_true_lang-0578ac2f.js";import{u as ue}from"./useCrudCompanyStore-274e930e.js";import{u as me,V as ce}from"./VFileInput-b1c108b0.js";import{b as N,V as I}from"./VCard-e073de75.js";import{V as M}from"./VCardText-5b1ac524.js";import{V as g}from"./VRow-e83751c2.js";import{V as d}from"./VCol-8c142312.js";import{V as pe}from"./VImg-3893aa66.js";import"./VTextField-933f56df.js";import"./VList-d24e8115.js";import"./ssrBoot-1e6a55dd.js";import"./VAvatar-7effcf6a.js";import"./VDivider-de480bfc.js";import"./dialog-transition-25180d06.js";import"./VMenu-7f827920.js";import"./VChip-e8f0c416.js";import"./sweetalert2.all-ae952bba.js";import"./_commonjsHelpers-725317a4.js";const fe={key:0},Ve=q("b",{class:"text-warning"},"*",-1),_e=P({name:"AppSelect",inheritAttrs:!1,__name:"AppSelect",setup(G){const u=F(()=>{const n=S(),m=n.id||n.label;return m?`app-select-${m}-${Math.random().toString(36).slice(2,7)}`:void 0}),f=F(()=>S().label),$=F(()=>S().requiredField);return(n,m)=>(p(),k("div",{class:Y(["app-select flex-grow-1",n.$attrs.class])},[l(f)?(p(),h(ie,{key:0,for:l(u),class:"mb-1 text-body-2 text-high-emphasis"},{default:a(()=>[v(Q(l(f))+" ",1),l($)?(p(),k("span",fe,[v("  "),Ve])):B("",!0)]),_:1},8,["for"])):B("",!0),e(ne,A(z({...n.$attrs,class:null,label:void 0,variant:"outlined",id:l(u),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",n.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),W({_:2},[E(n.$slots,(s,b)=>({name:b,fn:a(w=>[X(n.$slots,b,A(z(w||{})))])}))]),1040)],2))}}),ge=q("b",{class:"text-warning"},"*",-1),ve={class:"d-flex justify-space-between"},be=q("span",null,"Información de adicional",-1),je=P({__name:"Form",setup(G){const u=C(me()),f=Z(),{toast:$}=re(),n=C(),m=ue(),{form:s,loading:b,typeDetails:w}=x(m),V=C({}),D=C([]),R=async()=>{var o,y;const t=await((o=n.value)==null?void 0:o.validate());if(t!=null&&t.valid){const i=await m.fetchSave();(i==null?void 0:i.code)===200&&(D.value=[],V.value={},u.value.clearData(),await((y=n.value)==null?void 0:y.resetValidation())),(i==null?void 0:i.code)===422&&(V.value=i.errors??{})}else $("Faltan Campos Por Diligenciar","","danger")};ee(async()=>{m.clearForm(),f.params.id&&await m.fetchDataForm(Number(f.params.id),f.params.action)});const j=F(()=>s.value.arrayDetails.filter(t=>t.delete!=1)),K=()=>{s.value.arrayDetails.push({type_detail_id:null,icon:null,color:null,content:null,delete:0})},L=t=>{s.value.arrayDetails[t].id?s.value.arrayDetails[t].delete=1:s.value.arrayDetails.splice(t,1)};ae(s,(t,o)=>{t.id?D.value.image_principal=null:D.value.image_principal=[_(u.value.imageUrl)]},{deep:!0});const H=t=>{u.value.handleImageSelected(t),setTimeout(()=>{s.value.image_principal=u.value.imageFile},1e3)};return(t,o)=>{const y=te,i=de,J=_e;return p(),k("div",null,[e(y,{"sub-title":"Formulario de compañia",action:String(t.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:t.$router.back},null,8,["action","onChangeScreenBack"]),e(I,null,{default:a(()=>[e(N,{"primary-title":""},{default:a(()=>[v("Información principal")]),_:1}),e(M,null,{default:a(()=>[e(g,null,{default:a(()=>[e(d)]),_:1}),e(l(O),{ref_key:"formValidation",ref:n,"lazy-validation":""},{default:a(()=>[e(g,null,{default:a(()=>[e(d,{cols:"12",md:"4"},{default:a(()=>[e(i,{clearable:"",modelValue:l(s).name,"onUpdate:modelValue":o[0]||(o[0]=r=>l(s).name=r),rules:["requiredValidator"in t?t.requiredValidator:l(_)],"error-messages":l(V).name,label:"Nombre",onKeypress:o[1]||(o[1]=r=>l(V).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),e(d,{cols:"12",md:"4"},{default:a(()=>[e(i,{clearable:"",modelValue:l(s).slogan,"onUpdate:modelValue":o[2]||(o[2]=r=>l(s).slogan=r),rules:["requiredValidator"in t?t.requiredValidator:l(_)],"error-messages":l(V).slogan,label:"Eslogan",onKeypress:o[3]||(o[3]=r=>l(V).slogan=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),e(d,{cols:"12",md:"4"},{default:a(()=>[e(i,{clearable:"",modelValue:l(s).iframeGoogleMap,"onUpdate:modelValue":o[4]||(o[4]=r=>l(s).iframeGoogleMap=r),label:"iframeGoogleMap",requiredField:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(d,{cols:"12",sm:"3"},{default:a(()=>[(p(),h(ce,{accept:"image/*",key:l(u).key,onChange:o[5]||(o[5]=r=>H(r)),"onClick:clear":l(u).clearData},{label:a(()=>[v(" Imagen Principal "),ge]),_:1},8,["onClick:clear"]))]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(I,{width:"400"},{default:a(()=>[e(pe,{src:l(u).imageUrl??l(s).image_principal},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}),e(I,{class:"mt-5"},{default:a(()=>[e(N,{"primary-title":""},{default:a(()=>[q("div",ve,[be,e(U,{color:"success",onClick:o[6]||(o[6]=r=>K())},{default:a(()=>[v("Agregar")]),_:1})])]),_:1}),e(M,null,{default:a(()=>[(p(!0),k(le,null,E(l(j),(r,T)=>(p(),h(g,{key:T},{default:a(()=>[e(d,{cols:"12",md:"2"},{default:a(()=>[e(J,{items:l(w),modelValue:r.type_detail_id,"onUpdate:modelValue":c=>r.type_detail_id=c,label:"Tipo",requiredField:!0},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),e(d,{cols:"12",md:"2"},{default:a(()=>[e(i,{clearable:"",modelValue:r.icon,"onUpdate:modelValue":c=>r.icon=c,rules:["requiredValidator"in t?t.requiredValidator:l(_)],label:"Icono",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(d,{cols:"12",md:"2"},{default:a(()=>[e(i,{clearable:"",modelValue:r.color,"onUpdate:modelValue":c=>r.color=c,rules:["requiredValidator"in t?t.requiredValidator:l(_)],label:"Color",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(d,{cols:"12",md:"5"},{default:a(()=>[e(i,{clearable:"",modelValue:r.content,"onUpdate:modelValue":c=>r.content=c,rules:["requiredValidator"in t?t.requiredValidator:l(_)],label:"Contenido",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(d,{cols:"12",md:"1"},{default:a(()=>[e(U,{icon:"",size:"x-small",color:"error",variant:"text",class:"mt-6",onClick:c=>L(T)},{default:a(()=>[e(oe,{icon:"tabler-trash"}),e(se,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(g,{class:"mt-5"},{default:a(()=>[e(d,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(U,{loading:l(b).form,color:"primary",onClick:R},{default:a(()=>[v(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})])}}});export{je as default};

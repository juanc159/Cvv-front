import{r as B}from"./validators-HMCtv8cK.js";import{_ as Y}from"./ModalQuestion.vue_vue_type_script_setup_true_lang-CpRBG7xm.js";import{d as j,Y as w,c5 as $,c as M,o as v,G as H,h as F,y as C,b as t,l as e,f as o,D as g,E as p,e as l,ac as J,a7 as K,B as O,b7 as W,n as I,k as S,c6 as X,q as Z,I as ee,r as m,ab as ae,aU as N,ct as te,a9 as U}from"./index-u3uCcp0U.js";import{V as oe}from"./VTextarea-DENfMWLq.js";import{_ as se}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-DGnluLV1.js";import{V as le}from"./VDialog-B1xiXXYP.js";import{V as ne}from"./VCard-BkC9YkE3.js";import{V as re,a as ie}from"./VToolbar-IsmhzA0u.js";import{V as P}from"./VCardText-CxgYmRY-.js";import{V as de}from"./VAlert-D8SMbVNk.js";import{V as ue}from"./VForm-CWjbSSbs.js";import{V as ce}from"./VContainer-Cradm-He.js";import{V as me,a as Q}from"./VRow-CjKMUkpB.js";const fe={key:0},pe=l("b",{class:"text-warning"},"*",-1),_e=j({name:"AppTextarea",inheritAttrs:!1,__name:"AppTextarea",setup(G){const x=w(()=>{const u=$(),V=u.id||u.label;return V?`app-textarea-${V}-${Math.random().toString(36).slice(2,7)}`:void 0}),k=w(()=>$().label),T=w(()=>$().requiredField),d=w(()=>$().tooltip);return(u,V)=>(v(),M("div",{class:H(["app-textarea flex-grow-1",u.$attrs.class])},[e(k)?(v(),F(W,{key:0,for:e(x),class:"mb-1 text-body-2 text-high-emphasis"},{default:o(()=>[g(p(e(k))+" ",1),e(T)?(v(),M("span",fe,[g("  "),pe])):C("",!0),e(d)?(v(),F(J,{key:1,location:e(d).location??"top"},{activator:o(({props:c})=>[e(d).icon?(v(),F(K,O({key:0},c,{icon:e(d).icon}),null,16,["icon"])):C("",!0)]),default:o(()=>[l("span",null,p(e(d).text),1)]),_:1},8,["location"])):C("",!0)]),_:1},8,["for"])):C("",!0),t(oe,I(S({...u.$attrs,class:null,label:void 0,variant:"outlined",id:e(x)})),X({_:2},[Z(u.$slots,(c,n)=>({name:n,fn:o(r=>[ee(u.$slots,n,I(S(r||{})))])}))]),1040)],2))}}),ve={class:"student-info"},Ve={class:"text-h6 mb-2"},be={class:"d-flex gap-4"},ge=l("span",{class:"text-caption"},"Identificación:",-1),xe={class:"font-weight-medium"},ke=l("span",{class:"text-caption"},"Grado:",-1),ye={class:"font-weight-medium"},he=l("span",{class:"text-caption"},"Sección:",-1),we={class:"font-weight-medium"},Pe=j({__name:"ModalUnsubscribe",emits:["execute"],setup(G,{expose:x,emit:k}){const T=k,d=m({}),u=m(),V=m("Dar de baja"),c=m(!1),n=m(!1),r=m({id:null,date:null,reason:null}),A=()=>{for(const s in r.value)r.value[s]=null},y=()=>{c.value=!c.value},L=async s=>{A(),y(),r.value.id=s,await R()},R=async()=>{var f;const s=`/student/show/${r.value.id}`;n.value=!0;const{data:a,response:_}=await N(s).get();n.value=!1,(f=_.value)!=null&&f.ok&&a.value&&(b.value={fullName:a.value.student.full_name,document:a.value.student.identity_document,grade:a.value.student.grade_name,section:a.value.student.section_name})},z=async s=>{var _,f;const a=await((_=u.value)==null?void 0:_.validate());if(a!=null&&a.valid){const q="/student/withdraw";n.value=!0;const{response:D,data:i}=await N(q).post({student_id:r.value.id,date:r.value.date,reason:r.value.reason});n.value=!1,(f=D.value)!=null&&f.ok&&i.value&&(A(),y(),T("execute")),i.value.code==422&&(d.value=i.value.errors??{})}},h=m(),E=async()=>{var a;const s=await((a=u.value)==null?void 0:a.validate());s!=null&&s.valid&&(h.value.openModal(),h.value.componentData.title="¿Seguro desea dar de baja al estudiante?",h.value.componentData.subTitle="Verifique la información")},b=m({fullName:"",document:"",grade:"",section:""});return x({openModal:L}),(s,a)=>{const _=se,f=te,q=_e,D=Y;return v(),M("div",null,[t(le,{modelValue:e(c),"onUpdate:modelValue":a[6]||(a[6]=i=>ae(c)?c.value=i:null),overlay:!1,"max-width":"50rem",transition:"dialog-transition",persistent:""},{default:o(()=>[t(_,{onClick:y}),t(ne,{loading:e(n),disabled:e(n),class:"w-100"},{default:o(()=>[l("div",null,[t(re,{color:"primary"},{default:o(()=>[t(ie,null,{default:o(()=>[g(p(e(V)),1)]),_:1})]),_:1})]),t(P,{class:"pt-4 pb-0"},{default:o(()=>[t(de,{color:"info",variant:"tonal",border:"start",class:"mb-4"},{default:o(()=>[l("div",ve,[l("div",Ve,p(e(b).fullName),1),l("div",be,[l("div",null,[ge,l("span",xe,p(e(b).document),1)]),l("div",null,[ke,l("span",ye,p(e(b).grade),1)]),l("div",null,[he,l("span",we,p(e(b).section),1)])])])]),_:1}),t(ue,{ref_key:"refForm",ref:u},{default:o(()=>[t(ce,null,{default:o(()=>[t(me,null,{default:o(()=>[t(Q,{cols:"6"},{default:o(()=>[t(f,{clearable:"",modelValue:e(r).date,"onUpdate:modelValue":a[0]||(a[0]=i=>e(r).date=i),label:"Fecha",rules:["requiredValidator"in s?s.requiredValidator:e(B)],requiredField:!0,"error-messages":e(d).date,onInput:a[1]||(a[1]=i=>e(d).date="")},null,8,["modelValue","rules","error-messages"])]),_:1}),t(Q,{cols:"12"},{default:o(()=>[t(q,{requiredField:!0,rules:["requiredValidator"in s?s.requiredValidator:e(B)],label:"Motivo",modelValue:e(r).reason,"onUpdate:modelValue":a[2]||(a[2]=i=>e(r).reason=i),clearable:"",counter:"",maxlength:"255","error-messages":e(d).reason,onInput:a[3]||(a[3]=i=>e(d).reason="")},null,8,["rules","modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),t(P,{class:"d-flex justify-end gap-3 flex-wrap mt-5"},{default:o(()=>[t(U,{disabled:e(n),loading:e(n),onClick:a[4]||(a[4]=i=>y()),color:"secondary"},{default:o(()=>[g(" Cancelar ")]),_:1},8,["disabled","loading"]),t(U,{disabled:e(n),loading:e(n),onClick:a[5]||(a[5]=i=>E())},{default:o(()=>[g(" Guardar ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"]),t(D,{ref_key:"refModalQuestion",ref:h,onSuccess:z},null,512)])}}});export{Pe as _};

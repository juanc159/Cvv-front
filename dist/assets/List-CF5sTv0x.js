import{a as j}from"./formatters-flBwE4fh.js";import{ag as L,ah as Q,as as N,b as t,aY as F,bP as J,Y as R,a$ as K,aQ as G,bQ as O,a_ as W,aM as C,bE as X,an as Z,bq as ee,ax as ae,bH as te,b4 as re,a7 as P,aG as se,F as E,B as oe,d as le,V as ie,U as ne,r as w,N as de,c as A,o as V,f as r,a9 as M,D as _,l as $,q,h as I,e as B,E as h,Q as ue,ac as ce,R as me,y as ve,aU as U}from"./index-u3uCcp0U.js";import{_ as fe}from"./ModalQuestion.vue_vue_type_script_setup_true_lang-CpRBG7xm.js";import{_ as be}from"./ModalForm.vue_vue_type_script_setup_true_lang-Dh8Y_1pq.js";import{c as pe}from"./createUrl-FP-g9SSp.js";import{V as x}from"./VCardText-CxgYmRY-.js";import{V as ge}from"./VSkeletonLoader-BK-KKOEW.js";import{V as _e,a as ye}from"./VRow-CjKMUkpB.js";import{V as z}from"./VCard-BkC9YkE3.js";import{V as Ce}from"./VSpacer-DmOvfHvo.js";import{V as Y}from"./VAvatar-CNTIVpoH.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-DGnluLV1.js";import"./VDialog-B1xiXXYP.js";import"./dialog-transition-DgJH26s6.js";import"./validators-HMCtv8cK.js";import"./helpers-BYlhGQ9-.js";import"./constants-2GBt7OCP.js";import"./VList-BCHZ89lP.js";import"./ssrBoot-CyUYJk7f.js";import"./VDivider-B1Lyz9XH.js";import"./VSwitch-IydBCN1J.js";import"./VSelectionControl-Com20bhz.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-DCkJahWn.js";import"./VTextField-Duve1Hnw.js";/* empty css                   */import"./VCounter-BIc85nI4.js";import"./VImg-dor5jAhO.js";import"./VForm-CWjbSSbs.js";import"./index-0F-JFElI.js";/* empty css              */const Ve=Q({divider:[Number,String],...F()},"VBreadcrumbsDivider"),ke=L()({name:"VBreadcrumbsDivider",props:Ve(),setup(e,b){let{slots:a}=b;return N(()=>{var m;return t("li",{class:["v-breadcrumbs-divider",e.class],style:e.style},[((m=a==null?void 0:a.default)==null?void 0:m.call(a))??e.divider])}),{}}}),he=Q({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...F(),...O(),...G({tag:"li"})},"VBreadcrumbsItem"),Be=L()({name:"VBreadcrumbsItem",props:he(),setup(e,b){let{slots:a,attrs:m}=b;const v=J(e,m),d=R(()=>{var o;return e.active||((o=v.isActive)==null?void 0:o.value)}),u=R(()=>d.value?e.activeColor:e.color),{textColorClasses:p,textColorStyles:i}=K(u);return N(()=>t(e.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":d.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:d.value&&e.activeClass},p.value,e.class],style:[i.value,e.style],"aria-current":d.value?"page":void 0},{default:()=>{var o,y;return[v.isLink.value?t("a",{class:"v-breadcrumbs-item--link",href:v.href.value,"aria-current":d.value?"page":void 0,onClick:v.navigate},[((y=a.default)==null?void 0:y.call(a))??e.title]):((o=a.default)==null?void 0:o.call(a))??e.title]}})),{}}}),Se=Q({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:re,items:{type:Array,default:()=>[]},...F(),...te(),...ae(),...G({tag:"ul"})},"VBreadcrumbs"),De=L()({name:"VBreadcrumbs",props:Se(),setup(e,b){let{slots:a}=b;const{backgroundColorClasses:m,backgroundColorStyles:v}=W(C(e,"bgColor")),{densityClasses:d}=X(e),{roundedClasses:u}=Z(e);ee({VBreadcrumbsDivider:{divider:C(e,"divider")},VBreadcrumbsItem:{activeClass:C(e,"activeClass"),activeColor:C(e,"activeColor"),color:C(e,"color"),disabled:C(e,"disabled")}});const p=R(()=>e.items.map(i=>typeof i=="string"?{item:{title:i},raw:i}:{item:i,raw:i}));return N(()=>{const i=!!(a.prepend||e.icon);return t(e.tag,{class:["v-breadcrumbs",m.value,d.value,u.value,e.class],style:[v.value,e.style]},{default:()=>{var o;return[i&&t("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[a.prepend?t(se,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},a.prepend):t(P,{key:"prepend-icon",start:!0,icon:e.icon},null)]),p.value.map((y,f,S)=>{var s;let{item:c,raw:T}=y;return t(E,null,[((s=a.item)==null?void 0:s.call(a,{item:c,index:f}))??t(Be,oe({key:f,disabled:f>=S.length-1},typeof c=="string"?{title:c}:c),{default:a.title?()=>{var n;return(n=a.title)==null?void 0:n.call(a,{item:c,index:f})}:void 0}),f<S.length-1&&t(ke,null,{default:a.divider?()=>{var n;return(n=a.divider)==null?void 0:n.call(a,{item:T,index:f})}:void 0})])}),(o=a.default)==null?void 0:o.call(a)]}})}),{}}}),we={class:"text-body-1"},$e=B("b",null,"Total usuarios",-1),xe={class:"v-avatar-group demo-avatar-group"},Pe={class:"text-h5"},Re={class:"d-flex mt-5 gap-3 flex-wrap"},na=le({__name:"List",setup(e){const b=ie(),{company:a}=ne(b),m=R(()=>({0:"primary",1:"secondary",2:"info"})),v=[{title:"Acceso de usuarios",disabled:!1},{title:"Roles",disabled:!0}],d=w([]),u=w(!1),p=async()=>{var k,l;u.value=!0;const{data:s,response:n}=await U(pe("/role/list",{query:{company_id:a.value.id}}));u.value=!1,(k=n.value)!=null&&k.ok&&((l=s.value)==null?void 0:l.code)==200&&(d.value=s.value.tableData)};de(async()=>{await p()});const i=async()=>{await p()},o=w(),y=()=>{o.value.handleCreate()},f=s=>{o.value.handleEdit(s)},S=async s=>{u.value=!0;const{response:n,data:k}=await U(`/role/${s}`).delete();u.value=!1,p()},c=w(),T=s=>{c.value.componentData.title="¿Está seguro que desea eliminar el registro?",c.value.openModal(s)};return(s,n)=>{const k=fe;return V(),A("div",null,[t(De,{items:v}),t(z,{title:"Listado de roles"},{default:r(()=>[t(x,null,{default:r(()=>[t(M,{color:"primary",onClick:n[0]||(n[0]=l=>y())},{prepend:r(()=>[t(P,{icon:"tabler-plus"})]),default:r(()=>[_(" Añadir nuevo rol ")]),_:1})]),_:1}),t(x,null,{default:r(()=>[t(ge,{type:"image, list-item-two-line",loading:$(u)},{default:r(()=>[t(_e,null,{default:r(()=>[(V(!0),A(E,null,q($(d),(l,H)=>(V(),I(ye,{cols:"12",sm:"6",lg:"4",key:H},{default:r(()=>[t(z,{variant:"elevated",density:"default"},{default:r(()=>[t(x,{style:{width:"100%",height:"40px"},class:"d-flex align-center pb-4"},{default:r(()=>[B("div",we,[$e,_(": "+h(l.count_users||0),1)]),t(Ce),B("div",xe,[(V(!0),A(E,null,q(l.users,(g,D)=>(V(),I(Y,{color:$(m)[D],size:"40",key:D},{default:r(()=>[_(h(("avatarText"in s?s.avatarText:$(j))(`${g.name} ${g.surname}`))+" ",1),t(ce,{activator:"parent",location:"top"},{default:r(()=>[_(h(`${g.name} ${g.surname}`),1)]),_:2},1024)]),_:2},1032,["color"]))),128)),ue(t(Y,{color:s.$vuetify.theme.current.dark?"#373b50":"#eeedf0",size:"40"},{default:r(()=>[_(" +"+h(l.count_users_extras),1)]),_:2},1032,["color"]),[[me,l.count_users_extras>0]])])]),_:2},1024),t(x,null,{default:r(()=>{var g;return[B("h5",Pe,h(l.description),1),B("div",Re,[t(M,{onClick:D=>f(l)},{prepend:r(()=>[t(P,{icon:"tabler-edit"})]),default:r(()=>[_(" Editar rol ")]),_:2},1032,["onClick"]),((g=l.users)==null?void 0:g.length)==0?(V(),I(M,{key:0,color:"error",onClick:D=>T(l.id)},{prepend:r(()=>[t(P,{icon:"tabler-trash"})]),default:r(()=>[_(" Eliminar rol ")]),_:2},1032,["onClick"])):ve("",!0)])]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),t(be,{ref_key:"refModalForm",ref:o,onUpdateDataTable:i},null,512),t(k,{ref_key:"refModalQuestion",ref:c,onSuccess:S},null,512)])}}});export{na as default};

import{a as F,s as S}from"./helpers-DMPihPy4.js";import{a as $}from"./formatters-DULOiX1-.js";import{_ as A}from"./ModalQuestion.vue_vue_type_script_setup_true_lang-BJpVPN2L.js";import{_ as D}from"./TableFull.vue_vue_type_script_setup_true_lang-Dz3zOcNP.js";import{d as N,U as P,r as p,ax as I,o as d,c as k,b as a,f as o,e as i,ad as g,C as v,k as m,E as M,g as Q,D as G,a8 as u,al as f,af as b}from"./index-BnMU6SOz.js";import{b as j,V as L}from"./VCard-4lHw_yfF.js";import{V as O}from"./VCardText-C-8fFDxR.js";import{V as R}from"./VAvatar-C6sCZYF7.js";import{V as z}from"./VImg-CvyRp-B7.js";import{a as _}from"./VList-yEQ61EqX.js";import"./constants-2GBt7OCP.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-n7FoeAe7.js";import"./VDialog-DcbCawmP.js";import"./VOverlay-Bq7nlilv.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-D8GOCM2Q.js";import"./VInput-u9OE8Jzy.js";import"./VTooltip-rlI8DxYZ.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-CqPbdItr.js";import"./VSelect-B5V4GlqC.js";import"./VTextField-CNB-_0xH.js";import"./VMenu-C66TI31h.js";import"./VCheckboxBtn-EmjcGnU9.js";import"./VSelectionControl-CTTrupHO.js";import"./VChip-Cz6ropqt.js";import"./VDivider-DL_6J2Jy.js";import"./VRow-q-wjhN7r.js";/* empty css              */import"./AppTextField.vue_vue_type_script_setup_true_lang-BoEDEEs8.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VAlert-CId_XgkD.js";import"./createUrl-DTo1A6M2.js";import"./index-0F-JFElI.js";import"./VContainer-DWFaUTXm.js";import"./VDataTable-B023zjvU.js";import"./VSkeletonLoader-CgyZxB0D.js";import"./VCheckbox-D_4FgRS1.js";import"./ssrBoot-1g-vkhDV.js";const U=i("span",null," Docentes ",-1),q={class:"d-flex justify-end gap-3 flex-wrap"},H={key:1},J=i("span",null,"Descargar Nómina",-1),K=i("span",null,"Resetear contraseña",-1),W=i("span",null,"Planificación",-1),Ie=N({__name:"List",setup(X){const w=P(),s=(e={action:"create",id:null})=>{if(e.action=="order")return f.push({name:"Teacher-Order"}),!1;if(e.action=="planning")return f.push({name:"Teacher-Planning",params:{id:e.id}}),!1;f.push({name:"Teacher-Form",params:{action:e.action,id:e.id}})},C=p(),V={url:"/teacher/list",params:{company_id:w.company.id},headers:[{title:"Acciones",key:"actions",sortable:!1,width:50},{title:"Estado",key:"is_active",sortable:!1},{title:"Foto",key:"photo",sortable:!1},{title:"Tipo de educación",key:"type_education_name",sortable:!1},{title:"Cargo",key:"job_position_name",sortable:!1},{title:"Nombre(s)",key:"name",sortable:!1},{title:"Apellido(s)",key:"last_name",sortable:!1},{title:"Correo",key:"email",sortable:!1},{title:"Telefono",key:"phone",sortable:!1}],actions:{changeStatus:{url:"/teacher/changeStatus"},view:{show:!1},delete:{url:"/teacher/delete"}}},x=p({inputGeneral:{relationsGeneral:{all:["name","last_name","email","phone"],typeEducation:["name"],jobPosition:["name"]}},dialog:{width:500,inputs:[{input_type:"selectInfinite",title:"Tipo de educación",key:"typeEducation",relation:"typeEducation",relation_key:"type_education_id",multiple:!0,api:"selectInifiniteTypeEducation"}]}}),h=I({excel:!1}),T=async e=>{var r;h.excel=!0;const{data:n,response:c}=await b("/teacher-downloadConsolidated/"+e.id).get();if(h.excel=!1,(r=c.value)!=null&&r.ok&&n.value){const t="Nómina "+e.name+" "+e.last_name;F(n.value.excel,t)}},l=p(),B=e=>{l.value.componentData.title="¿Seguro desea reiniciar la contraseña al registro?",l.value.openModal(e)},E=async e=>{await b("/teacher-resetPassword/"+e).get()};return(e,n)=>{const c=D,r=A;return d(),k("div",null,[a(L,null,{default:o(()=>[a(j,{class:"d-flex justify-space-between"},{default:o(()=>[U,i("div",q,[a(g,{color:"primary",onClick:n[0]||(n[0]=t=>s({action:"order",id:null}))},{default:o(()=>[v(" Ordenar Docentes ")]),_:1}),a(g,{onClick:n[1]||(n[1]=t=>s())},{default:o(()=>[v(" Agregar docente ")]),_:1})])]),_:1}),a(O,{class:"mt-2"},{default:o(()=>[a(c,{ref_key:"tableFull",ref:C,optionsTable:V,optionsFilter:m(x),onGoView:s},{"item.photo":o(({item:t})=>[a(R,{color:t.photo?"":"primary",class:M(t.photo?null:"v-avatar-light-bg primary--text"),variant:t.photo?void 0:"tonal"},{default:o(()=>[t.photo?(d(),Q(z,{key:0,style:{width:"80px"},src:("storageBack"in e?e.storageBack:m(S))(t.photo)},null,8,["src"])):(d(),k("span",H,G(("avatarText"in e?e.avatarText:m($))(t.name+" "+t.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.actions2":o(({item:t})=>[a(_,{onClick:y=>T(t)},{prepend:o(()=>[a(u,{icon:"tabler-file-download"})]),default:o(()=>[J]),_:2},1032,["onClick"]),a(_,{onClick:y=>B(t.id)},{prepend:o(()=>[a(u,{icon:"tabler-lock-open"})]),default:o(()=>[K]),_:2},1032,["onClick"]),a(_,{onClick:y=>s({action:"planning",id:t.id})},{prepend:o(()=>[a(u,{icon:"tabler-file"})]),default:o(()=>[W]),_:2},1032,["onClick"])]),_:1},8,["optionsFilter"])]),_:1})]),_:1}),a(r,{ref_key:"refModalQuestion",ref:l,onSuccess:E},null,512)])}}});export{Ie as default};

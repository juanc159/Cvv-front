import{a as W}from"./formatters-1588bd0d.js";import{a as X,d as Y}from"./helpers-53221d8d.js";import{_ as Z}from"./ModalChangePassword.vue_vue_type_script_setup_true_lang-468e1553.js";import{V as ee,r as L}from"./VForm-93a57085.js";import{_ as ae}from"./AppSelect.vue_vue_type_script_setup_true_lang-56c369f6.js";import{_ as le}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-0d50680a.js";import{d as H,R as J,r as g,aF as P,o as u,c as T,b as e,f as a,k as t,g as b,E as j,e as i,B as D,C as p,ae as S,af as B,aA as oe,Q as te,ab as ne,L as se,a6 as $,F as z,m as R,V as ie}from"./index-ba2685b5.js";import{u as re}from"./useImageUpload-548d0096.js";import{V as de,a as ue}from"./VToolbar-c87cc0c6.js";import{V as A,b as M,a as me}from"./VCard-1dca3b92.js";import{V as k}from"./VCardText-27ca00f5.js";import{V as C}from"./VRow-3431edda.js";import{V}from"./VCol-b72a8398.js";import{V as fe}from"./VField-e5cc8e8a.js";import{V as ce}from"./VFileInput-ee25622e.js";import{V as pe}from"./VDialog-36be7163.js";import{V as _e}from"./VImg-2b1475bc.js";import{V as G}from"./VAvatar-ade85f75.js";import{V as Q}from"./VDivider-c2c0a35b.js";import{V as ve}from"./VDataTable-19d538e8.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-5b730ec1.js";import"./VTextField-0453d93a.js";import"./VSelect-8440ed8f.js";import"./VList-dc57db0b.js";import"./ssrBoot-5fdfebdb.js";import"./dialog-transition-c42e04e3.js";import"./VMenu-0d10e868.js";import"./VChip-c897905c.js";import"./sweetalert2.esm.all-562d67d8.js";/* empty css              */const ge=H({__name:"ModalUploadExcelNomina",emits:["execute"],setup(K,{expose:_,emit:O}){const N=J(),E=g({}),{toast:U}=oe(),d=P({titleDialog:"Subir Nómina",isDialogVisible:!1,isLoading:!1}),f=()=>{d.isDialogVisible=!d.isDialogVisible},q=async()=>{f(),o()},h=g(),v=g({company_id:null,type_education_id:null,archive:null}),c=g(re());c.value.allowedExtensions=["xls","xlsx"];const F=g([]),n=P({form:!1}),o=async()=>{var r;n.form=!0;const{data:s,response:l}=await B("note-dataForm").get();n.form=!1,(r=l.value)!=null&&r.ok&&s.value&&(F.value=s.value.typeEducations)},x=async()=>{var l,r;v.value.archive=c.value.imageFile,v.value.company_id=N.user.company_id;const s=await((l=h.value)==null?void 0:l.validate());if(s!=null&&s.valid){const y=new FormData;for(const I in v.value)y.append(I,v.value[I]);n.form=!0;const{data:m,response:w}=await B("note-store").post(y);n.form=!1,(r=w.value)!=null&&r.ok&&m.value&&f()}else U("Faltan Campos Por Diligenciar","","danger")};return _({openDialog:q}),(s,l)=>{const r=le,y=ae;return u(),T("div",null,[e(pe,{modelValue:t(d).isDialogVisible,"onUpdate:modelValue":l[4]||(l[4]=m=>t(d).isDialogVisible=m),persistent:"","max-width":"40rem",transition:"dialog-transition"},{default:a(()=>[t(n).form?j("",!0):(u(),b(r,{key:0,onClick:l[0]||(l[0]=m=>f())})),i("div",null,[e(de,{color:"primary"},{default:a(()=>[e(ue,null,{default:a(()=>[D(p(t(d).titleDialog),1)]),_:1})]),_:1})]),e(A,null,{default:a(()=>[e(k,null,{default:a(()=>[e(ee,{ref_key:"formValidation",ref:h,"lazy-validation":""},{default:a(()=>[e(C,null,{default:a(()=>[e(V,{cols:"12",sm:"6"},{default:a(()=>[e(y,{clearable:"",modelValue:t(v).type_education_id,"onUpdate:modelValue":l[1]||(l[1]=m=>t(v).type_education_id=m),rules:["requiredValidator"in s?s.requiredValidator:t(L)],"error-messages":t(E).type_education_id,label:"Tipo",onChange:l[2]||(l[2]=m=>t(E).type_education_id=""),requiredField:!0,items:t(F)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:a(()=>[e(fe,null,{default:a(()=>l[5]||(l[5]=[D("Archivo "),i("b",{class:"text-warning"},"*",-1)])),_:1}),(u(),b(ce,{key:t(c).key,onChange:t(c).handleImageSelected,"onClick:clear":t(c).clearData,rules:["requiredValidator"in s?s.requiredValidator:t(L)]},null,8,["onChange","onClick:clear","rules"]))]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(V,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(S,{loading:t(n).form,disbaled:t(n).form,color:"primary",onClick:l[3]||(l[3]=m=>x())},{default:a(()=>l[6]||(l[6]=[D(" Cargar información ")])),_:1},8,["loading","disbaled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Ve={class:"title-text"},ye={class:"membership-pricing d-flex flex-column align-center h-100 justify-center"},be={class:"me-auto pe-4"},xe={class:"d-flex align-center mb-6"},ke={class:"d-flex align-center mb-0"},Ce={class:"ms-auto ps-4"},De={class:"d-flex align-center mb-0"},he={class:"d-flex align-center py-1"},we=["onClick"],Te=H({__name:"DashboarTeacher",setup(K){const _=J(),{company:O,user:N}=te(_),E=ne(()=>{var o;const n=((o=_.user)==null?void 0:o.full_name)||"";return n||"S/N"}),U=[{title:"Título",key:"name",sortable:!1}],d=P({form:!1,excel:!1}),f=g();se(async()=>{var s,l;d.form=!0;const{data:n,response:o,error:x}=await B("/teacher-planningShow/"+((s=_.user)==null?void 0:s.id)).get();d.form=!1,(l=o.value)!=null&&l.ok&&n.value&&(f.value=n.value.data)});const q=async n=>{var s;d.excel=!0;const{data:o,response:x}=await B("/teacher-downloadConsolidated/"+n.id).get();if(d.excel=!1,(s=x.value)!=null&&s.ok&&o.value){const l="Nómina "+n.full_name;X(o.value.excel,l)}},h=g(),v=()=>{h.value.openDialog()},c=g(),F=()=>{c.value.componentData.module="Teacher",c.value.openDialog(N.value.id,!1)};return(n,o)=>{const x=ge,s=Z;return u(),T("div",null,[e(A,{class:"mb-6"},{default:a(()=>[e(M,{class:"d-flex justify-center align-center title-container"},{default:a(()=>[i("h3",Ve,p(t(N).full_name),1)]),_:1}),e(C,null,{default:a(()=>[e(V,{cols:"12",sm:"4",md:"12",lg:"5",class:"member-pricing-bg text-center"},{default:a(()=>{var l;return[i("div",ye,[(l=t(_).user)!=null&&l.photo?(u(),b(G,{key:0,color:"primary",variant:"tonal",size:"250"},{default:a(()=>{var r;return[e(_e,{src:(r=t(_).user)==null?void 0:r.photo},null,8,["src"])]}),_:1})):(u(),b(G,{key:1,color:"primary",variant:"tonal",size:"50"},{default:a(()=>[D(p(("avatarText"in n?n.avatarText:t(W))(t(E))),1)]),_:1}))])]}),_:1}),e(V,{cols:"12",sm:"8",md:"12",lg:"7"},{default:a(()=>[e(me,null,{default:a(()=>[e(M,null,{default:a(()=>o[3]||(o[3]=[D("¡Bienvenido! 🎉")])),_:1})]),_:1}),e(k,null,{default:a(()=>o[4]||(o[4]=[D(" Estimado profesor, En esta sección puede consultar todo lo relacionado con su planificación. Se agradece que revise cuidadosamente y, ante cualquier novedad, informe. Muchas gracias. ")])),_:1}),e(k,null,{default:a(()=>[e(Q)]),_:1}),e(k,{class:"d-flex justify-center"},{default:a(()=>[i("div",be,[i("p",xe,[e(S,{variant:"outlined",disabled:t(d).excel,loading:t(d).excel,onClick:o[0]||(o[0]=l=>q(t(_).user))},{default:a(()=>[e($,{icon:"tabler-download"}),o[5]||(o[5]=i("span",null,"Descargar Nómina",-1))]),_:1},8,["disabled","loading"])]),i("p",ke,[e(S,{variant:"outlined",onClick:o[1]||(o[1]=l=>v())},{default:a(()=>[e($,{icon:"tabler-download"}),o[6]||(o[6]=i("span",null,"Subir Nómina",-1))]),_:1})])]),n.$vuetify.display.smAndUp?(u(),b(Q,{key:0,vertical:"",inset:""})):j("",!0),i("div",Ce,[i("p",De,[e(S,{variant:"outlined",onClick:o[2]||(o[2]=l=>F())},{default:a(()=>[e($,{icon:"tabler-lock-open"}),o[7]||(o[7]=i("span",null,"Cambiar contraseña",-1))]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{class:"mb-6",outlined:""},{default:a(()=>[e(M,{class:"d-flex justify-center"},{default:a(()=>o[8]||(o[8]=[i("h2",null,"Planificaciones ",-1)])),_:1}),t(f)?(u(),b(k,{key:0},{default:a(()=>[e(C,null,{default:a(()=>[e(V,{cols:"12",sm:"6"},{default:a(()=>{var l,r;return[i("h2",null,p((l=t(f))==null?void 0:l.name)+" "+p((r=t(f))==null?void 0:r.last_name),1)]}),_:1})]),_:1}),e(C,null,{default:a(()=>[(u(!0),T(z,null,R(t(f).complementaries,(l,r)=>(u(),b(V,{cols:"12",key:r},{default:a(()=>[e(A,null,{default:a(()=>[e(M,{"primary-title":""},{default:a(()=>[i("h2",null,"Grado: "+p(l.grade_name)+" "+p(l.section_name),1)]),_:2},1024),e(k,null,{default:a(()=>[(u(!0),T(z,null,R(l.subjects,(y,m)=>(u(),T("div",{key:m},[i("h3",null,"Planificacion: "+p(y.title),1),e(C,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(t(ve),{headers:U,items:y.files,"items-per-page":999},{"item.name":a(({item:w,index:I})=>[i("div",he,[e($,{icon:"tabler-file",color:"primary"}),i("a",{href:"#",onClick:Ne=>("descargarArchivo"in n?n.descargarArchivo:t(Y))(w.file,w.name)},[i("b",null,p(w.name),1)],8,we)])]),bottom:a(()=>o[9]||(o[9]=[])),_:2},1032,["items"])]),_:2},1024)]),_:2},1024)]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):j("",!0)]),_:1}),e(x,{ref_key:"refModalUploadExcelNomina",ref:h},null,512),e(s,{ref_key:"refModalChangePassword",ref:c},null,512)])}}});const na=ie(Te,[["__scopeId","data-v-1788b6f8"]]);export{na as default};

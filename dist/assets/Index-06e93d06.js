import{u as j}from"./useCrudSubjectStore-a741463e.js";import{d as A,R as E,q as N,Q as R,r as M,L,w as g,aD as Q,ad as U,a as q,o as F,c as G,b as t,f as e,B as x,k as i,aE as H,e as l,ab as h,ag as f,a8 as v,C,ae as y}from"./index-a73ef7a4.js";import{S as J}from"./sweetalert2.all-e795d634.js";import{b as K,V as O}from"./VCard-3c846ebb.js";import{V as b}from"./VCardText-f167dd9c.js";import{V as w}from"./VContainer-87eb0ce4.js";import{V as W}from"./VSelect-b998c46f.js";import{V as X}from"./VSpacer-f8361de1.js";import{V as Y}from"./VImg-92b32f5d.js";import{V as Z}from"./VChip-eb33449f.js";import{V as tt}from"./VRow-be98792f.js";import{V as et}from"./VPagination-1065b445.js";import{V as at}from"./VDataTable-e37c6b40.js";import"./_commonjsHelpers-725317a4.js";import"./VAvatar-c8033367.js";/* empty css              */import"./VTextField-cd57f2d2.js";import"./VField-c03f9512.js";import"./VList-572a06e0.js";import"./ssrBoot-b167cbc0.js";import"./VDivider-3bf501b7.js";import"./dialog-transition-20d407fc.js";import"./VMenu-8ce68b31.js";const ot={class:"me-3",style:{"inline-size":"80px"}},st={class:"app-subject-search-filter d-flex align-center flex-wrap gap-4"},nt={class:"d-flex align-center py-2",style:{"inline-size":"10rem"}},it={colspan:"4"},lt={style:{"inline-size":"100"},class:"d-flex justify-center"},rt={class:"text-sm text-disabled"},$t=A({__name:"Index",setup(ct){const c=j(),S=E(),k=N(),{currentPage:n,totalPage:d,lastPage:D,totalData:T,subjects:p,loading:z}=R(c),r=M(10),m=async(s=[])=>{await c.fetchAll({company_id:S.company.id,perPage:r.value,page:n.value,searchQuery:s})};L(async()=>{await m()}),g(n,async()=>{n.value>d.value&&(n.value=d.value)}),g(r,async()=>{n.value=1}),Q([n,r],async()=>{await m()});const B=U(()=>{const s=p.value.length?(n.value-1)*d.value+1:0,a=p.value.length+(n.value-1)*d.value;return`Mostrando ${s} a ${a} de ${T.value} registros`}),V=async(s="create",a)=>{k.push({name:"Subject-Form",params:{action:s,id:a}})},P=async(s,a)=>{const u=!s[a];(await c.changeState({id:s.id,value:u,field:a})).code==200&&(s.state=u)},I=async s=>{J.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await c.fetchDelete(s),await m()):a.isDenied})},$=[{title:"Tipo",key:"type_education_name"},{title:"Nombre",key:"name"},{title:"Código",key:"code"},{title:"Acciones",key:"actions"}];return(s,a)=>{const u=q("PreloadInterno");return F(),G("div",null,[t(O,null,{default:e(()=>[t(K,{"primary-title":""},{default:e(()=>[x("Listado de materias")]),_:1}),t(b,null,{default:e(()=>[t(i(at),{headers:$,items:i(p),"items-per-page":i(r)},H({top:e(()=>[t(w,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:e(()=>[l("div",ot,[t(W,{modelValue:i(r),"onUpdate:modelValue":a[0]||(a[0]=o=>h(r)?r.value=o:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(X),l("div",st,[t(f,{color:"primary",onClick:a[1]||(a[1]=o=>V())},{default:e(()=>[x(" Crear Materia ")]),_:1})])]),_:1})]),"item.path":e(({item:o})=>[l("div",nt,[t(Y,{src:o.path,class:"rounded"},null,8,["src"])])]),"item.state":e(({item:o})=>[t(Z,{color:o.state==1?"success":"error",onClick:_=>P(o,"state")},{default:e(()=>[t(v,{start:"",size:"16",icon:o.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),l("span",null,C(o.state==1?"Activo":"Inactivo"),1),t(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":e(({item:o})=>[t(f,{icon:"",size:"x-small",color:"error",variant:"text",onClick:_=>I(o.id)},{default:e(()=>[t(v,{size:"22",icon:"tabler-trash"}),t(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),t(f,{icon:"",size:"x-small",color:"default",variant:"text",onClick:_=>V("edit",o.id)},{default:e(()=>[t(v,{size:"22",icon:"tabler-edit"}),t(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"])]),bottom:e(()=>[t(b,{class:"pt-2"},{default:e(()=>[t(tt,null,{default:e(()=>[t(w,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:e(()=>[l("span",rt,C(i(B)),1),t(et,{modelValue:i(n),"onUpdate:modelValue":a[2]||(a[2]=o=>h(n)?n.value=o:null),size:"small","total-visible":5,length:i(D)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[i(z).table?{name:"body",fn:e(()=>[l("tr",null,[l("td",it,[l("div",lt,[t(u)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]),_:1})]),_:1})])}}});export{$t as default};

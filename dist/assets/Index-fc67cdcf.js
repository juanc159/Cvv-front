import{a as $}from"./formatters-1588bd0d.js";import{_ as A,a as I}from"./TableFullNew.vue_vue_type_script_setup_true_lang-1f4eb409.js";import{u as L}from"./useCrudTeacherStore-cdd77af2.js";import{d as j,R as P,r as v,aF as R,o as l,c as u,b as t,f as o,e as _,ae as s,B as y,k as V,D as G,g as w,C as k,F as T,m as O,a6 as p,ac as m,af as q,q as H,E as J}from"./index-e87c998e.js";import{S as K}from"./sweetalert2.esm.all-562d67d8.js";import{c as M}from"./helpers-1cd3e8aa.js";import{b as Q,V as U}from"./VCard-4a612500.js";import{V as W}from"./VCardText-ecc7b3c9.js";import{V as X}from"./VAvatar-310879b2.js";import{V as Y}from"./VImg-b8e40629.js";import{V as Z,a as tt,b as et}from"./VList-725590b5.js";import{V as at}from"./VChip-2fe349dc.js";import{V as ot}from"./VDivider-92bccdc3.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-5cff8612.js";import"./VDialog-95a7a5d8.js";import"./dialog-transition-e0e81da4.js";import"./VField-48555cec.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-80afef27.js";import"./VSelect-117c2caf.js";import"./VTextField-19c0923c.js";import"./VMenu-ccd8d291.js";import"./VRow-dbcc1c85.js";/* empty css              */import"./VCol-40d12692.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-1438879e.js";import"./_commonjsHelpers-725317a4.js";import"./index-9c720871.js";import"./VContainer-483cff4f.js";import"./VPagination-0e66100e.js";import"./VDataTable-9c66d06f.js";import"./ssrBoot-db5986a3.js";const nt={class:"app-teacher-search-filter d-flex align-center flex-wrap gap-4"},it={key:1},jt=j({__name:"Index",setup(rt){const h=L(),F=P(),f=H(),d=async(n="create",e)=>{if(n=="order")return f.push({name:"Teacher-Order"}),!1;if(n=="planning")return f.push({name:"Teacher-Planning",params:{id:e}}),!1;f.push({name:"Teacher-Form",params:{action:n,id:e}})},D=async(n,e)=>{const r=!n[e];(await h.changeState({id:n.id,value:r,field:e})).code==200&&(n.state=r)},N=async n=>{K.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async e=>{e.isConfirmed?(await h.fetchDelete(n),await b(C.value)):e.isDenied})},x=v(),S={url:"/teacher-list",headers:[{title:"Acciones",key:"actions"},{title:"Estado",key:"state"},{title:"Foto",key:"photo"},{title:"Tipo de educación",key:"type_education_name"},{title:"Cargo",key:"job_position_name"},{title:"Nombre(s)",key:"name"},{title:"Apellido(s)",key:"last_name"},{title:"Correo",key:"email"},{title:"Telefono",key:"phone"}],params:{company_id:F.company.id}},C=v({}),b=(n={})=>{C.value=n,x.value.changeFilter(n)},B=v({inputGeneral:{relationsGeneral:{all:["name","last_name","email","phone"],typeEducation:["name"],jobPosition:["name"]}},dialog:{width:500,inputs:[{input_type:"booleanActive",title:"Estado",key:"state"}]}}),g=R({excel:!1}),z=async n=>{var c;g.excel=!0;const{data:e,response:r}=await q("/teacher-downloadConsolidated/"+n).get();g.excel=!1,(c=r.value)!=null&&c.ok&&e.value&&M(e.value.excel,"Consolidado")};return(n,e)=>{const r=A,c=I;return l(),u("div",null,[t(U,null,{default:o(()=>[t(Q,{class:"d-flex justify-space-between"},{default:o(()=>[e[4]||(e[4]=_("div",null," Listado de docentes ",-1)),_("div",nt,[t(s,{color:"primary",onClick:e[0]||(e[0]=a=>d("order"))},{default:o(()=>e[2]||(e[2]=[y(" Ordenar Docentes ")])),_:1}),t(s,{color:"primary",onClick:e[1]||(e[1]=a=>d())},{default:o(()=>e[3]||(e[3]=[y(" Crear Docente ")])),_:1})])]),_:1}),t(W,null,{default:o(()=>[t(r,{ref:"filterDialogNewRef",optionsFilter:V(B),onSendFilter:b},null,8,["optionsFilter"])]),_:1}),t(c,{ref_key:"tableFullNew",ref:x,optionsTable:S},{"item.photo":o(({item:a})=>[t(X,{color:a.photo?"":"primary",class:G(a.photo?null:"v-avatar-light-bg primary--text"),variant:a.photo?void 0:"tonal"},{default:o(()=>[a.photo?(l(),w(Y,{key:0,src:a.photo},null,8,["src"])):(l(),u("span",it,k(("avatarText"in n?n.avatarText:V($))(a.name+" "+a.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.subjects":o(({item:a})=>[t(Z,{border:""},{default:o(()=>[(l(!0),u(T,null,O(a.subjects,(i,E)=>(l(),u(T,{key:i.name},[t(tt,null,{default:o(()=>[t(et,null,{default:o(()=>[y(k(i),1)]),_:2},1024)]),_:2},1024),E!==a.subjects.length-1?(l(),w(ot,{key:0})):J("",!0)],64))),128))]),_:2},1024)]),"item.state":o(({item:a})=>[t(at,{color:a.state==1?"success":"error",onClick:i=>D(a,"state")},{default:o(()=>[t(p,{start:"",size:"16",icon:a.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),_("span",null,k(a.state==1?"Activo":"Inactivo"),1),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":o(({item:a})=>[t(s,{icon:"",size:"x-small",color:"error",variant:"text",onClick:i=>N(a.id)},{default:o(()=>[t(p,{size:"22",icon:"tabler-trash"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),t(s,{icon:"",size:"x-small",color:"default",variant:"text",onClick:i=>d("edit",a.id)},{default:o(()=>[t(p,{size:"22",icon:"tabler-edit"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),t(s,{icon:"",size:"x-small",color:"default",variant:"text",onClick:i=>d("planning",a.id)},{default:o(()=>[t(p,{size:"22",icon:"tabler-file"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Planificación"})]),_:2},1032,["onClick"]),t(s,{icon:"",size:"x-small",variant:"text",onClick:i=>z(a.id)},{default:o(()=>[t(p,{size:"22",icon:"tabler-file-download"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Descargar nomina"})]),_:2},1032,["onClick"])]),_:1},512)]),_:1})])}}});export{jt as default};

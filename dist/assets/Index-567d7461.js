import{a as z}from"./formatters-1588bd0d.js";import{_ as E,a as $}from"./TableFullNew.vue_vue_type_script_setup_true_lang-dcf91738.js";import{u as A}from"./useCrudTeacherStore-54596389.js";import{d as I,R as L,r as f,o as n,c as p,b as t,f as o,e as v,ae as l,B as _,k as x,D as j,g,C as y,F as T,m as P,a6 as m,ac as u,q as R,E as G}from"./index-4f81429d.js";import{S as O}from"./sweetalert2.esm.all-562d67d8.js";import{b as q,V as H}from"./VCard-832cd683.js";import{V as J}from"./VCardText-29420ad3.js";import{V as K}from"./VAvatar-509cb4e6.js";import{V as M}from"./VImg-6edd56e6.js";import{V as Q,a as U,b as W}from"./VList-ae9a511e.js";import{V as X}from"./VChip-c78765a0.js";import{V as Y}from"./VDivider-ad38f8d0.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-b4c0aa9f.js";import"./VDialog-0fd7b1bb.js";import"./dialog-transition-8b568a2e.js";import"./VField-83b24b5b.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-31281979.js";import"./VSelect-26aece5f.js";import"./VTextField-59dde88f.js";import"./VMenu-63c59ac1.js";import"./VRow-6a50fe05.js";/* empty css              */import"./VCol-a7c5bc1b.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-4fc0a184.js";import"./_commonjsHelpers-725317a4.js";import"./helpers-3edea678.js";import"./index-9c720871.js";import"./VContainer-011b00cc.js";import"./VPagination-1611e072.js";import"./VDataTable-528cab17.js";import"./ssrBoot-b118532f.js";const Z={class:"app-teacher-search-filter d-flex align-center flex-wrap gap-4"},tt={key:1},Et=I({__name:"Index",setup(et){const h=A(),w=L(),d=R(),s=async(r="create",a)=>{if(r=="order")return d.push({name:"Teacher-Order"}),!1;if(r=="planning")return d.push({name:"Teacher-Planning",params:{id:a}}),!1;d.push({name:"Teacher-Form",params:{action:r,id:a}})},F=async(r,a)=>{const c=!r[a];(await h.changeState({id:r.id,value:c,field:a})).code==200&&(r.state=c)},D=async r=>{O.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await h.fetchDelete(r),await b(C.value)):a.isDenied})},k=f(),N={url:"/teacher-list",headers:[{title:"Acciones",key:"actions"},{title:"Estado",key:"state"},{title:"Foto",key:"photo"},{title:"Tipo de educación",key:"type_education_name"},{title:"Cargo",key:"job_position_name"},{title:"Nombre(s)",key:"name"},{title:"Apellido(s)",key:"last_name"},{title:"Correo",key:"email"},{title:"Telefono",key:"phone"}],params:{company_id:w.company.id}},C=f({}),b=(r={})=>{C.value=r,k.value.changeFilter(r)},S=f({inputGeneral:{relationsGeneral:{all:["name","last_name","email","phone"],typeEducation:["name"],jobPosition:["name"]}},dialog:{width:500,inputs:[{input_type:"booleanActive",title:"Estado",key:"state"}]}});return(r,a)=>{const c=E,V=$;return n(),p("div",null,[t(H,null,{default:o(()=>[t(q,{class:"d-flex justify-space-between"},{default:o(()=>[a[4]||(a[4]=v("div",null," Listado de docentes ",-1)),v("div",Z,[t(l,{color:"primary",onClick:a[0]||(a[0]=e=>s("order"))},{default:o(()=>a[2]||(a[2]=[_(" Ordenar Docentes ")])),_:1}),t(l,{color:"primary",onClick:a[1]||(a[1]=e=>s())},{default:o(()=>a[3]||(a[3]=[_(" Crear Docente ")])),_:1})])]),_:1}),t(J,null,{default:o(()=>[t(c,{ref:"filterDialogNewRef",optionsFilter:x(S),onSendFilter:b},null,8,["optionsFilter"])]),_:1}),t(V,{ref_key:"tableFullNew",ref:k,optionsTable:N},{"item.photo":o(({item:e})=>[t(K,{color:e.photo?"":"primary",class:j(e.photo?null:"v-avatar-light-bg primary--text"),variant:e.photo?void 0:"tonal"},{default:o(()=>[e.photo?(n(),g(M,{key:0,src:e.photo},null,8,["src"])):(n(),p("span",tt,y(("avatarText"in r?r.avatarText:x(z))(e.name+" "+e.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.subjects":o(({item:e})=>[t(Q,{border:""},{default:o(()=>[(n(!0),p(T,null,P(e.subjects,(i,B)=>(n(),p(T,{key:i.name},[t(U,null,{default:o(()=>[t(W,null,{default:o(()=>[_(y(i),1)]),_:2},1024)]),_:2},1024),B!==e.subjects.length-1?(n(),g(Y,{key:0})):G("",!0)],64))),128))]),_:2},1024)]),"item.state":o(({item:e})=>[t(X,{color:e.state==1?"success":"error",onClick:i=>F(e,"state")},{default:o(()=>[t(m,{start:"",size:"16",icon:e.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),v("span",null,y(e.state==1?"Activo":"Inactivo"),1),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":o(({item:e})=>[t(l,{icon:"",size:"x-small",color:"error",variant:"text",onClick:i=>D(e.id)},{default:o(()=>[t(m,{size:"22",icon:"tabler-trash"}),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),t(l,{icon:"",size:"x-small",color:"default",variant:"text",onClick:i=>s("edit",e.id)},{default:o(()=>[t(m,{size:"22",icon:"tabler-edit"}),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),t(l,{icon:"",size:"x-small",color:"default",variant:"text",onClick:i=>s("planning",e.id)},{default:o(()=>[t(m,{size:"22",icon:"tabler-file"}),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Planificación"})]),_:2},1032,["onClick"])]),_:1},512)]),_:1})])}}});export{Et as default};

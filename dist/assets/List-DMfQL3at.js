import{s as V}from"./helpers-DrAmOTMm.js";import{a as R}from"./formatters-CkoAiZCB.js";import{_ as q}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-CvHAtEDK.js";import{_ as H}from"./ModalQuestion.vue_vue_type_script_setup_true_lang-DULAyU_C.js";import{_ as J,a as K}from"./FilterDialogNew-DINftwb_.js";import{_ as O}from"./ModalUnsubscribe.vue_vue_type_script_setup_true_lang-CE6jAbFW.js";import{d as W,U as X,r as s,ax as Y,c as Z,o as c,b as e,f as o,e as i,ad as ee,C as h,k as n,a8 as w,g as d,D as C,x as te,ae as oe,al as S,af as ae}from"./index-BJUCe1vL.js";import{b as le,V as T}from"./VCard-Dygl7xMZ.js";import{V as f}from"./VCardText-CCNeC4Nm.js";import{a as x}from"./VList-CVA68oNc.js";import{V as _}from"./VAvatar-wfGGIPDq.js";import{V as B}from"./VImg-DctYmKea.js";import{V as ne}from"./VDialog-DGaftMPP.js";import"./constants-2GBt7OCP.js";import"./useAxios-Bs744Ehv.js";import"./VDataTable-Bw3IGDqZ.js";import"./VSelect-BTx5u8RY.js";import"./VTextField-Cl0FCkx_.js";/* empty css                   */import"./VCounter-EDn728mP.js";import"./VInput-DTWyWEXY.js";import"./VOverlay-sgQ3GttL.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-zGiuqqrh.js";import"./VMenu-DAB-tn-2.js";import"./VCheckboxBtn-DOn_shtF.js";import"./VSelectionControl-Vxg5ogbK.js";import"./VChip-ClLiiPxb.js";import"./VTable-Bg4oGxfg.js";import"./filter-BhTZUIra.js";import"./VDivider-CAcL7Mrg.js";import"./VSkeletonLoader-10k2LGWs.js";import"./VRow-DcvbP0bf.js";/* empty css              */import"./VTooltip-BID3mrur.js";import"./AppDateTimePicker.vue_vue_type_style_index_0_lang-XCzDXy7y.js";import"./AppSelectRemote-Dmiexhx0.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-QICBF3-I.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-DR_pIzi-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VToolbar-Bwnsj3_f.js";import"./validators-hCPLgb8B.js";import"./VAlert-BR8Nq-gh.js";import"./VForm-DqtglXbC.js";import"./VContainer-CUa7xODj.js";import"./ssrBoot-CZW1b9Lq.js";const se=i("span",null," Estudiantes ",-1),ie={class:"d-flex justify-end gap-3 flex-wrap"},re={class:"my-3"},ue=i("span",null,"Resetear contraseña",-1),ce=i("span",null,"Dar de baja",-1),lt=W({__name:"List",setup(pe){const D=X(),p=s(),F={url:"/student/list",paramsGlobal:{company_id:D.company.id},headers:[{title:"Acciones",key:"actions",sortable:!1},{title:"Foto ",key:"photo",sortable:!1},{title:"Grado ",key:"grade_name"},{title:"Sección ",key:"section_name"},{title:"Tipo de documento ",key:"type_document_name"},{title:"Documento ",key:"identity_document"},{title:"Nombre",key:"full_name"},{title:"Tipo de educación",key:"type_education_name"}],actions:{changeStatus:{show:!1},view:{show:!1},delete:{url:"/student/delete"}}},M=s({dialog:{width:500,inputs:[{type:"selectApi",label:"Sección",name:"section_id",url:"selectInfiniteSection",arrayInfo:"section",multiple:!0},{type:"select",name:"photo",label:"Foto",value:null,options:[{value:1,title:"Con foto"},{value:0,title:"Sin foto"}]}]},filterLabels:{inputGeneral:"Buscar en todo",is_active:"Estado"}}),b=Y({table:!1,btnPdf:!1}),$=async t=>{b.table=!0;const{data:l,response:y}=await ae("/student-resetPassword/"+t).get();b.table=!1},m=s(),N=t=>{m.value.openModal(t),m.value.componentData.title="¿Seguro desea reiniciar la contraseña al registro?"},r=s(!1),u=s(null),A=(t=null)=>{r.value=!0,u.value=t},E=()=>{u.value=null,r.value=!1},v=s(),P=t=>{v.value.openModal(t)},U=t=>{var l;(l=tableFull.value)==null||l.fetchTableData()},z=t=>{S.push({name:"Student-Form",params:{action:"edit",id:t.id}})},I=()=>{S.push({name:"Student-Form",params:{action:"create"}})},k=s(!1),L=()=>{p.value&&p.value.fetchTableData(null,!1,!0)};return(t,l)=>{const y=J,Q=K,j=H,G=q;return c(),Z("div",null,[e(T,null,{default:o(()=>[e(le,{class:"d-flex justify-space-between"},{default:o(()=>[se,i("div",ie,[e(ee,{onClick:l[0]||(l[0]=a=>I())},{default:o(()=>[h(" Agregar estudiante ")]),_:1})])]),_:1}),e(f,null,{default:o(()=>[e(y,{"options-filter":n(M),onForceSearch:L,"table-loading":n(k)},null,8,["options-filter","table-loading"])]),_:1}),e(f,{class:"mt-2"},{default:o(()=>[e(Q,{ref_key:"refTableFull",ref:p,options:F,onEdit:z,"onUpdate:loading":l[1]||(l[1]=a=>k.value=a)},{"item.photo":o(({item:a})=>[i("div",re,[a.photo?(c(),d(_,{key:0,rounded:"",size:"120",color:"primary",variant:"tonal",class:"user-profile-avatar mx-auto",style:{cursor:"pointer"},onClick:g=>A(a)},{default:o(()=>[e(B,{src:("storageBack"in t?t.storageBack:n(V))(a.photo)},null,8,["src"])]),_:2},1032,["onClick"])):(c(),d(_,{key:1,color:"primary",variant:"tonal",size:"50"},{default:o(()=>[h(C(("avatarText"in t?t.avatarText:n(R))(a.full_name)),1)]),_:2},1024))])]),"item.actions2":o(({item:a})=>[e(x,{onClick:g=>N(a.id)},{prepend:o(()=>[e(w,{size:"22",icon:"tabler-lock-open"})]),default:o(()=>[ue]),_:2},1032,["onClick"]),e(x,{onClick:g=>P(a.id)},{prepend:o(()=>[e(w,{size:"22",icon:"tabler-user-down"})]),default:o(()=>[ce]),_:2},1032,["onClick"])]),_:1},512)]),_:1})]),_:1}),e(j,{ref_key:"refModalQuestion",ref:m,onSuccess:$},null,512),e(ne,{modelValue:n(r),"onUpdate:modelValue":l[3]||(l[3]=a=>oe(r)?r.value=a:null),"max-width":"40rem"},{default:o(()=>[e(G,{onClick:l[2]||(l[2]=a=>E())}),n(u)?(c(),d(T,{key:0},{default:o(()=>[e(f,{class:"text-center"},{default:o(()=>[i("h3",null,C(n(u).full_name),1),e(_,{rounded:"",size:"520",color:"primary",variant:"tonal",class:"user-profile-avatar mx-auto"},{default:o(()=>[e(B,{src:("storageBack"in t?t.storageBack:n(V))(n(u).photo)},null,8,["src"])]),_:1})]),_:1})]),_:1})):te("",!0)]),_:1},8,["modelValue"]),e(O,{ref_key:"refModalUnsubscribe",ref:v,onExecute:U},null,512)])}}});export{lt as default};

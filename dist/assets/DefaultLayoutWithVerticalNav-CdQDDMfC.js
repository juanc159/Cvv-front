import{s as Ae}from"./helpers-k4gBJwIF.js";import{a as Xe}from"./formatters-CLTvqFSU.js";import{d as F,W as Ie,T as Pe,V as ne,U as he,r as I,X as Je,x as ue,t as Re,w as W,Y as z,z as L,a as _e,h as C,o as p,i as G,G as O,l as t,f as s,e as n,I as Q,b as a,Q as Y,R as K,E as y,B,c as A,F as te,q as de,Z as be,$ as ye,a0 as Ze,a1 as Be,v as Ee,a2 as De,y as M,C as ce,D as T,a3 as Ge,H as Me,a4 as Z,N as me,a5 as et,a6 as Ce,a7 as S,a8 as fe,a9 as U,aa as tt,ab as at,ac as oe,ad as Te,ae as Ve,af as se,ag as Oe,ah as Ue,ai as ot,aj as st,ak as nt,al as it,am as lt,an as rt,ao as ae,ap as ct,aq as ut,ar as dt,as as Se,at as mt,au as vt,av as pt,aw as ft,ax as gt,ay as ht,az as _t,aA as bt,aB as yt,aC as xe,aD as kt,aE as wt,aF as Ct,aG as xt,aH as Pt,aI as ge,aJ as Vt,aK as St,aL as $t,aM as Nt,J as It,K as Mt,aN as Tt,aO as Lt,aP as zt,aQ as At,aR as Rt,aS as Bt,aT as Et,aU as Dt,O as ke}from"./index-C9b6hrcK.js";import{V as qe}from"./VBadge-nkz8Z8g-.js";import{V as H,a as je,b as Gt,c as Ot}from"./VCard-e9jpbFqx.js";import{V as pe}from"./VChip-DuawQfnX.js";import{V as we}from"./VDivider-DvYWI5ti.js";import{V as Fe,a as He}from"./VList-MUuu6vN0.js";import{V as $e}from"./VAvatar-CaIuQVp3.js";import{V as We}from"./VImg-MODgQ4GY.js";import{V as Ne}from"./VSpacer-CXy3pG2W.js";import{V as ee}from"./VCardText-CxJltrbS.js";import{V as Ut}from"./VMenu-CsSg1Nwp.js";import{u as qt}from"./useNotificationStore-B0Mda58C.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import jt from"./Footer-C6gs2Pwr.js";import{_ as Ft}from"./NavbarThemeSwitcher.vue_vue_type_script_setup_true_lang-DMsnGid0.js";import{_ as Ht}from"./UserProfile.vue_vue_type_script_setup_true_lang-BmpbAYuE.js";import{c as Wt,a as Ye,_ as Yt}from"./I18n.vue_vue_type_script_setup_true_lang-f7IjJMbE.js";import{_ as Kt,a as Qt}from"./FilterDialogNew-CkvPBYr2.js";import{_ as Xt}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-D7mzW6Fx.js";import{V as Ke}from"./VDialog-RqZjDXAw.js";import{V as Jt,a as Zt}from"./VToolbar-DDoD9cgh.js";import{V as ea,a as ve}from"./VRow-ZGlPE998.js";import{C as ta}from"./vue3-perfect-scrollbar-BToxweBX.js";import{V as aa}from"./VNodeRenderer-CDZFS9vm.js";import"./constants-30sb_wC2.js";import"./ssrBoot-DxvvqgRH.js";/* empty css              */import"./dialog-transition-Di1pGNk8.js";import"./ModalChangePassword.vue_vue_type_script_setup_true_lang-BgMmxyeE.js";import"./validators-BHTN6IsO.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-1kb894KG.js";import"./VTextField-J-V-HBXf.js";/* empty css                   */import"./VCounter-J0O_p47B.js";import"./VForm-CokzWhvo.js";import"./ModalQuestion.vue_vue_type_script_setup_true_lang-CLeitNmU.js";import"./VDataTable-CmrjvY0j.js";import"./VSelect-BhKRerLF.js";import"./VCheckboxBtn-CZeXJj-D.js";import"./VSelectionControl-CN7dOi7m.js";import"./VTable-DPNAykMc.js";import"./filter-BDNlLOSp.js";import"./VSkeletonLoader-j5ZQdz4i.js";import"./AppSelectRemote-DXBzlG4S.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-CBNeKW5u.js";const oa=F({name:"TransitionExpand",setup(o,{slots:d}){const e=g=>{const _=getComputedStyle(g).width;g.style.width=_,g.style.position="absolute",g.style.visibility="hidden",g.style.height="auto";const u=getComputedStyle(g).height;g.style.width="",g.style.position="",g.style.visibility="",g.style.height="0px",getComputedStyle(g).height,requestAnimationFrame(()=>{g.style.height=u})},i=g=>{g.style.height="auto"},f=g=>{const _=getComputedStyle(g).height;g.style.height=_,getComputedStyle(g).height,requestAnimationFrame(()=>{g.style.height="0px"})};return()=>Ie(Ie(Pe),{name:"expand",onEnter:e,onAfterEnter:i,onLeave:f},()=>{var g;return(g=d.default)==null?void 0:g.call(d)})}}),sa=ie(oa,[["__scopeId","data-v-dd57622d"]]),na=o=>(be("data-v-7ba133df"),o=o(),ye(),o),ia={class:"nav-header"},la={class:"header-action"},ra=na(()=>n("div",{class:"vertical-nav-items-shadow"},null,-1)),ca=F({__name:"VerticalNav",props:{tag:{default:"aside"},navItems:{},isOverlayNavActive:{type:Boolean},toggleIsOverlayNavActive:{}},setup(o){const d=ne(),{company:e,user:i}=he(d),f=o,g=I(),_=Je(g);Ze(Be,_);const u=ue(),m=h=>"heading"in h?To:"children"in h?ma:Qe,x=Re();W(()=>x.name,()=>{f.toggleIsOverlayNavActive(!1)});const r=I(!1),l=h=>r.value=h,k=h=>{r.value=h.target.scrollTop>0},V=u.isVerticalNavMini(_),E=z(()=>{var h=e.value.name??L.app.title,$=9;return h.length<=$?h:h.slice(0,$)+"..."});return(h,$)=>{const c=_e("RouterLink");return p(),C(G(f.tag),{ref_key:"refNav",ref:g,class:O(["layout-vertical-nav",[{"overlay-nav":t(u).isLessThanOverlayNavBreakpoint,hovered:t(_),visible:h.isOverlayNavActive,scrolled:t(r)}]])},{default:s(()=>[n("div",ia,[Q(h.$slots,"nav-header",{},()=>[a(c,{to:{name:"Home"},class:"app-logo app-title-wrapper"},{default:s(()=>{var w,b;return[(w=t(e))!=null&&w.logo?(p(),C(We,{key:0,style:{width:"80px"},src:("storageBack"in h?h.storageBack:t(Ae))((b=t(e))==null?void 0:b.logo)},null,8,["src"])):(p(),C(t(aa),{key:1,nodes:t(L).app.logo},null,8,["nodes"])),a(Pe,{name:"vertical-nav-app-title"},{default:s(()=>[Y(n("h1",{class:"app-logo-title"},y(t(E)),513),[[K,!t(V)]])]),_:1})]}),_:1}),n("div",la,[Y((p(),C(G(t(L).app.iconRenderer||"div"),B({class:["d-none nav-unpin",t(u).isVerticalNavCollapsed&&"d-lg-block"]},t(L).icons.verticalNavUnPinned,{onClick:$[0]||($[0]=w=>t(u).isVerticalNavCollapsed=!t(u).isVerticalNavCollapsed)}),null,16,["class"])),[[K,t(u).isVerticalNavCollapsed]]),Y((p(),C(G(t(L).app.iconRenderer||"div"),B({class:["d-none nav-pin",!t(u).isVerticalNavCollapsed&&"d-lg-block"]},t(L).icons.verticalNavPinned,{onClick:$[1]||($[1]=w=>t(u).isVerticalNavCollapsed=!t(u).isVerticalNavCollapsed)}),null,16,["class"])),[[K,!t(u).isVerticalNavCollapsed]]),(p(),C(G(t(L).app.iconRenderer||"div"),B({class:"d-lg-none"},t(L).icons.close,{onClick:$[2]||($[2]=w=>h.toggleIsOverlayNavActive(!1))}),null,16))])],!0)]),Q(h.$slots,"before-nav-items",{},()=>[ra],!0),Q(h.$slots,"nav-items",{updateIsVerticalNavScrolled:l},()=>[(p(),C(t(ta),{key:t(u).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:k},{default:s(()=>[(p(!0),A(te,null,de(h.navItems,(w,b)=>(p(),C(G(m(w)),{key:b,item:w},null,8,["item"]))),128))]),_:1}))],!0),Q(h.$slots,"after-nav-items",{},void 0,!0)]),_:3},8,["class"])}}}),ua=ie(ca,[["__scopeId","data-v-7ba133df"]]),da={class:"nav-group-children"},ma=F({name:"VerticalNavGroup",__name:"VerticalNavGroup",props:{item:{}},setup(o){const d=o,e=Re(),i=Ee(),f=ue(),g=f.isVerticalNavMini(),_=De(Be,I(!1)),u=I(!1),m=I(!1),x=l=>l.some(k=>{let V=Z.value.includes(k.title);return"children"in k&&(V=x(k.children)||V),V}),r=l=>{l.forEach(k=>{"children"in k&&r(k.children),Z.value=Z.value.filter(V=>V!==k.title)})};return W(()=>e.path,()=>{const l=Me(d.item.children,i);m.value=l&&!f.isVerticalNavMini(_).value,u.value=l},{immediate:!0}),W(m,l=>{const k=Z.value.indexOf(d.item.title);l&&k===-1?Z.value.push(d.item.title):!l&&k!==-1&&(Z.value.splice(k,1),r(d.item.children))},{immediate:!0}),W(Z,l=>{if(l.at(-1)===d.item.title)return;const V=Me(d.item.children,i);V||x(d.item.children)||(m.value=V,u.value=V)},{deep:!0}),W(f.isVerticalNavMini(_),l=>{m.value=l?!1:u.value}),(l,k)=>t(Wt)(l.item)?(p(),A("li",{key:0,class:O(["nav-group",[{active:t(u),open:t(m),disabled:l.item.disable}]])},[n("div",{class:"nav-group-label",onClick:k[0]||(k[0]=V=>m.value=!t(m))},[(p(),C(G(t(L).app.iconRenderer||"div"),B(l.item.icon||t(L).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(p(),C(G(Ge),{name:"transition-slide-x"},{default:s(()=>[Y((p(),C(G(t(L).app.i18n.enable?"i18n-t":"span"),B(t(ce)(l.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:s(()=>[T(y(l.item.title),1)]),_:1},16)),[[K,!t(g)]]),l.item.badgeContent?Y((p(),C(G(t(L).app.i18n.enable?"i18n-t":"span"),B({key:0},t(ce)(l.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",l.item.badgeClass]}),{default:s(()=>[T(y(l.item.badgeContent),1)]),_:1},16,["class"])),[[K,!t(g)]]):M("",!0),Y((p(),C(G(t(L).app.iconRenderer||"div"),B(t(L).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[K,!t(g)]])]),_:1}))]),a(t(sa),null,{default:s(()=>[Y(n("ul",da,[(p(!0),A(te,null,de(l.item.children,V=>(p(),C(G("children"in V?"VerticalNavGroup":t(Qe)),{key:V.title,item:V},null,8,["item"]))),128))],512),[[K,t(m)]])]),_:1})],2)):M("",!0)}}),va=o=>(be("data-v-2c4971bc"),o=o(),ye(),o),pa={class:"text-center mb-6"},fa={class:"d-flex align-center justify-center mb-4"},ga={class:"text-h5 font-weight-bold text-white mb-2"},ha={class:"text-body-1 text-grey-400 mb-0"},_a={class:"progress-section mb-6"},ba={class:"d-flex justify-space-between align-center mb-3"},ya=va(()=>n("span",{class:"text-body-2 font-weight-medium text-grey-300"}," Progreso ",-1)),ka={class:"d-flex align-center"},wa={class:"text-h6 font-weight-bold text-primary mr-2"},Ca={class:"steps-section mb-6"},xa={key:0,class:"tips-section mb-6"},Pa={class:"d-flex align-center"},Va={class:"text-body-2 text-grey-300 tip-text"},Sa={class:"actions-section d-flex justify-space-between align-center"},$a={class:"d-flex gap-2"},Na=F({__name:"LoadingV2Enhanced",props:{progress:{type:Number,default:0,validator:o=>o>=0&&o<=100},isLoading:{type:Boolean,default:!0},title:{type:String,default:"Procesando"},subtitle:{type:String,default:"Por favor espera mientras completamos la operaciÃ³n"},showTips:{type:Boolean,default:!0},showMultipleButton:{type:Boolean,default:!1},totalProcesses:{type:Number,default:2},tips:{type:Array,default:()=>["ðŸ’¡ Puedes cargar mÃºltiples archivos simultÃ¡neamente","ðŸš€ El proceso continuarÃ¡ ejecutÃ¡ndose en segundo plano","âš¡ RecibirÃ¡s una notificaciÃ³n cuando termine","ðŸŽ¨ Puedes cambiar entre modo claro y oscuro","ðŸ”§ El progreso se guarda automÃ¡ticamente"]},steps:{type:Array,default:()=>["Validando archivo Excel","Procesando estructura de datos","Importando registros de estudiantes","Guardando notas en base de datos","Finalizando importaciÃ³n"]}},emits:["minimized","restored","completed","show-multiple"],setup(o,{expose:d,emit:e}){const i=o,f=e,g=I(0),_=I(0),u=I(!1);let m=null;const x=()=>{u.value=!0,f("minimized")},r=()=>{u.value=!1,f("restored")},l=z(()=>{const v=Math.max(0,Math.min(100,i.progress));return v>=100&&f("completed"),v}),k=z(()=>{const v=l.value;return v>=100?"ðŸŽ‰ Â¡Proceso completado con Ã©xito!":v>=90?"ðŸ” Realizando verificaciones finales...":v>=80?"ðŸ“¤ Guardando resultados en el sistema...":v>=70?"âš™ï¸ Optimizando datos procesados...":v>=60?"ðŸ“Š Procesando informaciÃ³n recolectada...":v>=50?"ðŸ“¦ Organizando datos intermedios...":v>=40?"ðŸ”„ Cargando mÃ³dulos secundarios...":v>=30?"ðŸš€ Proceso en marcha, avanzando...":v>=20?"âš¡ Preparando componentes principales...":v>=10?"ðŸ”Œ Conectando con los servicios...":v>=0?"â³ Inicializando sistema...":i.title||"Preparando carga..."}),V=z(()=>{const v=l.value;return v>=100?"Todo estÃ¡ listo para usar":v>=80?"Aplicando configuraciones finales":v>=60?"Organizando la informaciÃ³n":v>=40?"Descargando componentes necesarios":v>=0?"Preparando el sistema":i.subtitle}),E=z(()=>{const v=l.value;return v>=100?"tabler-checks":v>=80?"tabler-circle-check":v>=60?"tabler-database":v>=40?"tabler-settings":v>=20?"tabler-rotate-2":"tabler-rotate-clockwise-2"}),h=z(()=>i.tips[g.value]||""),$=z(()=>i.steps);W(()=>i.progress,v=>{const q=Math.floor(v/100*i.steps.length);_.value=Math.min(q,i.steps.length-1)});const c=v=>v<_.value?"tabler-circle-check-filled":v===_.value&&l.value<100?"tabler-loader-2":v===_.value&&l.value>=100?"tabler-circle-check-filled":"tabler-circle",w=v=>v<_.value?"success":v===_.value?l.value>=100?"success":"primary":"grey-600",b=v=>v<_.value?"text-success font-weight-medium":v===_.value?l.value>=100?"text-success font-weight-medium":"text-primary font-weight-medium":"text-grey-500",N=()=>{i.showTips&&i.tips.length>1&&(m=setInterval(()=>{g.value=(g.value+1)%i.tips.length},5e3))},P=()=>{m&&(clearInterval(m),m=null)};return me(()=>{N()}),et(()=>{P()}),W(()=>i.isLoading,v=>{v?N():P()}),d({minimize:x,restore:r,isMinimized:u}),(v,q)=>!u.value&&o.isLoading?(p(),C(Ce,{key:0,"model-value":o.isLoading,class:"loading-overlay d-flex align-center justify-center",persistent:!0,opacity:.98,"z-index":9999},{default:s(()=>[a(H,{class:"loading-card",elevation:"0",rounded:"xl","min-width":"420",width:"90%","max-width":"500"},{default:s(()=>[a(ee,{class:"pa-8"},{default:s(()=>[n("div",pa,[n("div",fa,[a($e,{size:"72",class:"loading-avatar",color:l.value>=100?"success":"primary"},{default:s(()=>[a(S,{size:l.value>=100?"32":"28",icon:E.value,color:"white",class:O(l.value<100?"spin-animation":"")},null,8,["size","icon","class"])]),_:1},8,["color"])]),n("h2",ga,y(k.value),1),n("p",ha,y(V.value),1)]),n("div",_a,[n("div",ba,[ya,n("div",ka,[n("span",wa,y(Math.round(l.value))+"% ",1),l.value>=100?(p(),C(S,{key:0,icon:"tabler-eye",size:"16",color:"grey-400"})):M("",!0)])]),a(fe,{"model-value":l.value,height:"6",rounded:"",color:"primary","bg-color":"grey-800",class:"loading-progress"},null,8,["model-value"])]),n("div",Ca,[a(H,{class:"steps-card pa-4",color:"grey-900",variant:"elevated",elevation:"2",rounded:"lg"},{default:s(()=>[(p(!0),A(te,null,de($.value,(R,j)=>(p(),A("div",{key:j,class:O(["step-item d-flex align-center mb-3",{"mb-0":j===$.value.length-1}])},[a(S,{icon:c(j),color:w(j),size:"20",class:O(["step-icon mr-3",{"spin-animation":j===_.value&&l.value<100}])},null,8,["icon","color","class"]),n("span",{class:O(["text-body-2",b(j)])},y(R),3)],2))),128))]),_:1})]),o.showTips?(p(),A("div",xa,[a(H,{class:"tip-card pa-3",color:"grey-800",variant:"flat",rounded:"lg"},{default:s(()=>[n("div",Pa,[a(S,{icon:"tabler-bulb",color:"warning",size:"20",class:"mr-3"}),n("span",Va,y(h.value),1)])]),_:1})])):M("",!0),n("div",Sa,[a(U,{variant:"elevated",color:"info",class:"text-none",onClick:x},{default:s(()=>[a(S,{start:"",icon:"tabler-minimize",size:"18"}),T(" Minimizar ")]),_:1}),n("div",$a,[o.showMultipleButton?(p(),C(U,{key:0,variant:"elevated",color:"warning",class:"text-none",onClick:q[0]||(q[0]=R=>v.$emit("show-multiple"))},{default:s(()=>[a(S,{start:"",icon:"tabler-stack-2",size:"18"}),T(" Ver todos ("+y(o.totalProcesses||2)+") ",1)]),_:1})):M("",!0)])])]),_:1})]),_:1})]),_:1},8,["model-value"])):M("",!0)}}),Ia=ie(Na,[["__scopeId","data-v-2c4971bc"]]),Ma={class:"d-flex justify-end gap-3 flex-wrap"},Ta=F({__name:"ModalListErrors",emits:["execute"],setup(o,{expose:d,emit:e}){const i=I("Listado de errores"),f=I(!1),g=()=>{f.value=!f.value},_=tt({csv:!1,excel:!1}),u=ne(),m=I(),x=I({url:"/processBatch/errorsPaginate",headers:[{key:"error_type",title:"Tipo de error"},{key:"column_name",title:"Columna"},{key:"row_number",title:"Fila"},{key:"error_value",title:"Valor"},{key:"error_message",title:"Mensaje de error"}],paramsGlobal:{batch_id:""}}),r=I({filterLabels:{inputGeneral:"Buscar en todo"}}),l=I(!1),k=I(!0),V=c=>{m.value&&(k.value&&c?m.value.fetchTableData(null,!1,!0,c):m.value.fetchTableData(null,!1,!0))},E=async c=>{g(),console.log("batchId",c),x.value.paramsGlobal.batch_id=c},h=async()=>{_.csv=!0;try{const{data:c,response:w}=await Te("/processBatch/generateCsvReportErrors").post({user_id:u.user.id,batch_id:x.value.paramsGlobal.batch_id})}catch(c){console.error("Error downloading CSV:",c)}finally{_.csv=!1}},$=async()=>{_.excel=!0;try{const{data:c,response:w}=await Te("/processBatch/generateExcelReportData").post({user_id:u.user.id,batch_id:x.value.paramsGlobal.batch_id})}catch(c){console.error("Error downloading XLSX:",c)}finally{_.excel=!1}};return d({openModal:E}),(c,w)=>{const b=Xt,N=Kt,P=Qt;return p(),A("div",null,[a(Ke,{modelValue:t(f),"onUpdate:modelValue":w[1]||(w[1]=v=>at(f)?f.value=v:null),"max-width":"70rem",transition:"dialog-transition",persistent:""},{default:s(()=>[a(b,{onClick:g}),a(H,{class:"w-100"},{default:s(()=>[n("div",null,[a(Jt,{color:"primary"},{default:s(()=>[a(Zt,null,{default:s(()=>[T(y(t(i)),1)]),_:1})]),_:1})]),a(ee,{class:"d-flex justify-space-between"},{default:s(()=>[n("div",Ma,[a(U,{loading:t(_).csv,disabled:t(_).csv,size:"38",color:"primary",icon:"",onClick:h},{default:s(()=>[a(S,{icon:"tabler-file-spreadsheet"}),a(oe,{location:"top",transition:"scale-transition",activator:"parent",text:"Descargar errores en formato CSV"})]),_:1},8,["loading","disabled"]),a(U,{loading:t(_).excel,disabled:t(_).excel,size:"38",color:"primary",icon:"",onClick:$},{default:s(()=>[a(S,{icon:"tabler-file-spreadsheet"}),a(oe,{location:"top",transition:"scale-transition",activator:"parent",text:"Descargar datos en formato excel"})]),_:1},8,["loading","disabled"])])]),_:1}),a(ee,null,{default:s(()=>[a(N,{"options-filter":t(r),onForceSearch:V,"table-loading":t(l),"disable-url-update":t(k)},null,8,["options-filter","table-loading","disable-url-update"])]),_:1}),a(ee,null,{default:s(()=>[a(P,{ref_key:"refTableFull",ref:m,options:t(x),"onUpdate:loading":w[0]||(w[0]=v=>l.value=v),"disable-url-update":t(k)},null,8,["options","disable-url-update"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),le=o=>(be("data-v-4a829f97"),o=o(),ye(),o),La={class:"d-flex align-center"},za=le(()=>n("div",null,[n("h2",{class:"text-h5 font-weight-bold"},"Procesos de ImportaciÃ³n"),n("p",{class:"text-body-2 text-medium-emphasis mb-0"},"Gestiona tus importaciones activas y completadas")],-1)),Aa={class:"d-flex align-center gap-2"},Ra={class:"d-flex justify-space-between align-center mb-3"},Ba={class:"d-flex align-center"},Ea=le(()=>n("span",{class:"text-h6 font-weight-medium"},"Progreso General",-1)),Da={class:"text-h5 font-weight-bold text-primary"},Ga={class:"d-flex justify-space-between text-body-2 text-medium-emphasis"},Oa={class:"d-flex align-center justify-space-between mb-3"},Ua={class:"d-flex align-center"},qa={class:"text-h6 font-weight-bold"},ja={class:"d-flex align-center mt-1"},Fa={class:"text-right"},Ha={class:"text-h5 font-weight-bold text-primary"},Wa={class:"text-caption text-medium-emphasis"},Ya={class:"mb-3"},Ka={class:"d-flex justify-space-between text-body-2 text-medium-emphasis"},Qa={key:0},Xa={key:0,class:"metadata-section"},Ja={class:"d-flex align-center"},Za=le(()=>n("div",{class:"text-caption text-medium-emphasis"},"Registros",-1)),eo={class:"text-h6 font-weight-bold"},to={class:"d-flex align-center"},ao=le(()=>n("div",{class:"text-caption text-medium-emphasis"},"Hojas",-1)),oo={class:"text-h6 font-weight-bold"},so={class:"d-flex align-center"},no=le(()=>n("div",{class:"text-caption text-medium-emphasis"},"Errores",-1)),io={class:"text-h6 font-weight-bold"},lo={class:"d-flex align-center"},ro=le(()=>n("div",{class:"text-caption text-medium-emphasis"},"Tiempo Rest.",-1)),co={class:"text-h6 font-weight-bold"},uo={class:"d-flex justify-end mt-3"},mo=F({__name:"ProcessListModal",emits:["removeProcess","showDataProcess","clearCompleted","close"],setup(o,{emit:d}){const e=Ve(),i=d,f=z({get:()=>e.showProcessList.value,set:h=>{h||e.hideProcessListModal()}}),g=z(()=>e.allProcesses.value.length===0?0:e.allProcesses.value.reduce(($,c)=>$+c.progress,0)/e.allProcesses.value.length),_=()=>e.activeProcesses.value.length===0?"success":"primary",u=()=>i("clearCompleted"),m=h=>{switch(h){case"active":return"primary";case"completed":return"success";case"failed":return"error";case"completed_with_errors":return"warning";case"queued":return"warning";default:return"secondary"}},x=h=>{switch(h){case"active":return"tabler-loader-2";case"completed":return"tabler-circle-check-filled";case"failed":return"tabler-alert-circle";case"completed_with_errors":return"tabler-circle-minus";case"queued":return"tabler-clock";default:return"tabler-help-circle"}},r=h=>{switch(h.status){case"active":return"Procesando";case"completed":return"Completado";case"failed":return"Error";case"completed_with_errors":return"Completado con Errores";case"queued":return"En Cola";default:return"Desconocido"}},l=h=>{switch(h){case"connected":return"success";case"connecting":return"warning";case"reconnecting":return"info";case"polling":return"info";case"error":return"error";case"disconnected":return"secondary";default:return"secondary"}},k=h=>{switch(h){case"connected":return"tabler-wifi";case"connecting":return"tabler-loader";case"reconnecting":return"tabler-refresh";case"polling":return"tabler-cloud-download";case"error":return"tabler-wifi-off";case"disconnected":return"tabler-wifi-off";default:return"tabler-help-circle"}},V=h=>h?new Date(h).toLocaleTimeString():"N/A",E=h=>{if(!h||h===0)return"N/A";if(h<60)return`${h}s`;const $=Math.floor(h/60),c=h%60;return`${$}m ${c}s`};return(h,$)=>(p(),C(Ke,{modelValue:f.value,"onUpdate:modelValue":$[1]||($[1]=c=>f.value=c),"max-width":"60rem",persistent:""},{default:s(()=>[a(H,{class:"process-list-card"},{default:s(()=>[a(je,{class:"d-flex align-center justify-space-between pa-6 pb-4"},{default:s(()=>[n("div",La,[a(S,{icon:"tabler-stack-2",class:"me-3",color:"primary",size:"28"}),za]),n("div",Aa,[a(pe,{color:_(),size:"large",variant:"elevated"},{default:s(()=>[a(S,{start:"",icon:"tabler-files"}),T(" "+y(t(e).allProcesses.value.length)+" proceso"+y(t(e).allProcesses.value.length!==1?"s":""),1)]),_:1},8,["color"]),t(e).completedProcesses.value.length>0?(p(),C(U,{key:0,variant:"outlined",color:"warning",size:"small",onClick:u},{default:s(()=>[a(S,{start:"",icon:"tabler-trash"}),T(" Limpiar ("+y(t(e).completedProcesses.value.length)+") ",1)]),_:1})):M("",!0)])]),_:1}),t(e).activeProcesses.value.length>0?(p(),C(ee,{key:0,class:"px-6 py-0"},{default:s(()=>[a(H,{class:"overall-progress-card pa-4 mb-4",color:"grey-50",variant:"tonal"},{default:s(()=>[n("div",Ra,[n("div",Ba,[a(S,{icon:"tabler-chart-line",color:"primary",class:"me-2"}),Ea]),n("span",Da,y(Math.round(g.value))+"%",1)]),a(fe,{"model-value":g.value,height:"12",rounded:"",color:"primary",class:"mb-3"},null,8,["model-value"]),n("div",Ga,[n("span",null,y(t(e).completedProcesses.value.length)+" de "+y(t(e).allProcesses.value.length)+" procesos completados",1),n("span",null,y(t(e).activeProcesses.value.length)+" activo"+y(t(e).activeProcesses.value.length!==1?"s":""),1)])]),_:1})]),_:1})):M("",!0),a(ee,{class:"pa-4"},{default:s(()=>[a(Fe,{class:"process-list"},{default:s(()=>[(p(!0),A(te,null,de(t(e).sortedProcesses.value,c=>(p(),C(He,{key:c.batch_id,class:O(["process-item pa-4 ma-2 rounded-lg",{"active-process":c.status==="active","queued-process":c.status==="queued","completed-process":c.status==="completed","error-process":c.status==="failed","completed-with-errors-process":c.status==="completed_with_errors"}])},{default:s(()=>{var w,b,N,P;return[n("div",Oa,[n("div",Ua,[a($e,{color:m(c.status),size:"48",class:"me-3"},{default:s(()=>[a(S,{icon:x(c.status),color:"white",size:"24",class:O(c.status==="active"?"spin-animation":"")},null,8,["icon","class"])]),_:2},1032,["color"]),n("div",null,[n("h3",qa,y((w=c.metadata)==null?void 0:w.file_name),1),n("div",ja,[a(pe,{color:m(c.status),size:"small",class:"me-2"},{default:s(()=>[T(y(r(c)),1)]),_:2},1032,["color"]),(b=c.metadata)!=null&&b.connection_status?(p(),C(pe,{key:0,color:l(c.metadata.connection_status),size:"small",variant:"outlined"},{default:s(()=>[a(S,{start:"",icon:k(c.metadata.connection_status),size:"14"},null,8,["icon"]),T(" "+y(c.metadata.connection_status==="polling"?"Sincronizando":c.metadata.connection_status),1)]),_:2},1032,["color"])):M("",!0)])])]),n("div",Fa,[n("div",Ha,y(Math.round(c.progress))+"%",1),n("div",Wa,y(V(c.started_at)),1)])]),n("div",Ya,[a(fe,{"model-value":c.progress,height:"8",rounded:"",color:m(c.status),class:"mb-2"},null,8,["model-value","color"]),n("div",Ka,[n("span",null,y(c.current_action),1),(N=c.metadata)!=null&&N.processing_speed?(p(),A("span",Qa,y(c.metadata.processing_speed)+" reg/s ",1)):M("",!0)])]),c.metadata?(p(),A("div",Xa,[a(ea,{class:"metadata-grid"},{default:s(()=>[a(ve,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(H,{class:"metadata-card pa-3",variant:"tonal",color:"info"},{default:s(()=>[n("div",Ja,[a(S,{icon:"tabler-database",color:"info",class:"me-2"}),n("div",null,[Za,n("div",eo,y(c.metadata.processed_records||0)+" / "+y(c.metadata.total_records||0),1)])])]),_:2},1024)]),_:2},1024),a(ve,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(H,{class:"metadata-card pa-3",variant:"tonal",color:"success"},{default:s(()=>[n("div",to,[a(S,{icon:"tabler-file-spreadsheet",color:"success",class:"me-2"}),n("div",null,[ao,n("div",oo,y(c.metadata.current_sheet||1)+" / "+y(c.metadata.total_sheets||1),1)])])]),_:2},1024)]),_:2},1024),a(ve,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(H,{class:"metadata-card pa-3",variant:"tonal",color:(c.metadata.errors_count||0)>0?"error":"grey"},{default:s(()=>[n("div",so,[a(S,{icon:(c.metadata.errors_count||0)>0?"tabler-alert-circle":"tabler-check-circle",color:(c.metadata.errors_count||0)>0?"error":"success",class:"me-2"},null,8,["icon","color"]),n("div",null,[no,n("div",io,y(c.metadata.errors_count||0),1)])])]),_:2},1032,["color"])]),_:2},1024),a(ve,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(H,{class:"metadata-card pa-3",variant:"tonal",color:"warning"},{default:s(()=>[n("div",lo,[a(S,{icon:"tabler-clock",color:"warning",class:"me-2"}),n("div",null,[ro,n("div",co,y(E(c.metadata.estimated_time_remaining)),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024)])):M("",!0),n("div",uo,[(c.status==="completed"||c.status==="failed"||c.status==="completed_with_errors")&&((P=c.metadata)==null?void 0:P.errors_count)>0?(p(),C(U,{key:0,icon:"",size:"small",variant:"text",color:"warning",onClick:se(v=>h.$emit("showDataProcess",c.batch_id),["stop"])},{default:s(()=>[a(S,{icon:"tabler-eye"}),a(oe,{activator:"parent",location:"top"},{default:s(()=>[T("Visualizar errores")]),_:1})]),_:2},1032,["onClick"])):M("",!0),c.status==="completed"||c.status==="failed"||c.status==="completed_with_errors"?(p(),C(U,{key:1,icon:"",size:"small",variant:"text",color:"error",onClick:se(v=>h.$emit("removeProcess",c.batch_id),["stop"])},{default:s(()=>[a(S,{icon:"tabler-trash"}),a(oe,{activator:"parent",location:"top"},{default:s(()=>[T("Eliminar proceso")]),_:1})]),_:2},1032,["onClick"])):M("",!0)])]}),_:2},1032,["class"]))),128))]),_:1})]),_:1}),a(Gt,{class:"pa-6 pt-4"},{default:s(()=>[a(Ne),a(U,{variant:"elevated",color:"primary",onClick:$[0]||($[0]=c=>h.$emit("close"))},{default:s(()=>[a(S,{start:"",icon:"tabler-x"}),T(" Cerrar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),vo=ie(mo,[["__scopeId","data-v-4a829f97"]]);function po(o){const d=ae(o);let e=-1;function i(){clearInterval(e)}function f(){i(),xe(()=>d.value=o)}function g(_){const u=_?getComputedStyle(_):{transitionDuration:.2},m=parseFloat(u.transitionDuration)*1e3||200;if(i(),d.value<=0)return;const x=performance.now();e=window.setInterval(()=>{const r=performance.now()-x+m;d.value=Math.max(o-r,0),d.value<=0&&i()},m)}return yt(i),{clear:i,time:d,start:g,reset:f}}const fo=Ue({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,..._t({location:"bottom"}),...ht(),...gt(),...ft(),...pt(),...vt(bt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Le=Oe()({name:"VSnackbar",props:fo(),emits:{"update:modelValue":o=>!0},setup(o,d){let{slots:e}=d;const i=ot(o,"modelValue"),{positionClasses:f}=st(o),{scopeId:g}=nt(),{themeClasses:_}=it(o),{colorClasses:u,colorStyles:m,variantClasses:x}=lt(o),{roundedClasses:r}=rt(o),l=po(Number(o.timeout)),k=I(),V=I(),E=ae(!1),h=ae(0),$=I(),c=De(ct,void 0);ut(()=>!!c,()=>{const D=kt();wt(()=>{$.value=D.mainStyles.value})}),W(i,b),W(()=>o.timeout,b),me(()=>{i.value&&b()});let w=-1;function b(){l.reset(),window.clearTimeout(w);const D=Number(o.timeout);if(!i.value||D===-1)return;const X=dt(V.value);l.start(X),w=window.setTimeout(()=>{i.value=!1},D)}function N(){l.reset(),window.clearTimeout(w)}function P(){E.value=!0,N()}function v(){E.value=!1,b()}function q(D){h.value=D.touches[0].clientY}function R(D){Math.abs(h.value-D.changedTouches[0].clientY)>50&&(i.value=!1)}const j=z(()=>o.location.split(" ").reduce((D,X)=>(D[`v-snackbar--${X}`]=!0,D),{}));return Se(()=>{const D=Ce.filterProps(o),X=!!(e.default||e.text||o.text);return a(Ce,B({ref:k,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":o.multiLine&&!o.vertical,"v-snackbar--timer":!!o.timer,"v-snackbar--vertical":o.vertical},j.value,f.value,o.class],style:[$.value,o.style]},D,{modelValue:i.value,"onUpdate:modelValue":J=>i.value=J,contentProps:B({class:["v-snackbar__wrapper",_.value,u.value,r.value,x.value],style:[m.value],onPointerenter:P,onPointerleave:v},D.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:q,onTouchend:R},g),{default:()=>{var J,re;return[Ct(!1,"v-snackbar"),o.timer&&!E.value&&a("div",{key:"timer",class:"v-snackbar__timer"},[a(fe,{ref:V,color:typeof o.timer=="string"?o.timer:"info",max:o.timeout,"model-value":l.time.value},null)]),X&&a("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((J=e.text)==null?void 0:J.call(e))??o.text,(re=e.default)==null?void 0:re.call(e)]),e.actions&&a(xt,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[a("div",{class:"v-snackbar__actions"},[e.actions({isActive:i})])]})]},activator:e.activator})}),mt({},k)}}),go=o=>(be("data-v-28033b3e"),o=o(),ye(),o),ho={key:1,class:"minimized-overlay"},_o={class:"minimized-info ms-3"},bo={class:"text-caption font-weight-medium"},yo={class:"text-caption text-medium-emphasis"},ko={class:"d-flex align-center"},wo=go(()=>n("div",null,[n("div",{class:"font-weight-bold"},"ImportaciÃ³n Iniciada"),n("div",{class:"text-caption"},"El proceso continÃºa en segundo plano.")],-1)),Co=F({__name:"GlobalLoadingManager",setup(o){const d=ne(),e=Ve(),i=I(!1),f=I(!1),g=I(),_=w=>{g.value.openModal(w)},u=z(()=>{const w=e.currentProcess.value,b=e.currentProgress.value;return w?b>=100&&w.status==="completed"?"Â¡ImportaciÃ³n Completada!":b===0?"Procesando importaciÃ³n":w.current_action||"Procesando importaciÃ³n":"Sin proceso activo"}),m=z(()=>{const w=e.currentProcess.value,b=e.currentProgress.value;if(!w)return"Sin proceso activo";if(b>=100&&w.status==="completed")return"Â¡El archivo se ha procesado exitosamente!";if(b===0)return"Iniciando proceso de importaciÃ³n...";let N=`${Math.round(b)}% completado - ${w.current_element}`;return e.queuedProcesses.value.length>0&&(N+=` â€¢ ${e.queuedProcesses.value.length} en cola`),N}),x=()=>{console.log("âœ… [MANAGER] Loading completed")},r=()=>{e.minimize()},l=()=>{e.restore(),f.value=!1},k=()=>{e.showProcessListModal()},V=w=>{e.removeProcess(w)},E=w=>{_(w)},h=()=>{e.clearCompletedProcesses()},$=()=>{e.hideProcessListModal()},c=()=>{var w;e.onStarted(b=>{console.log(`ðŸš€ [MANAGER] NotificaciÃ³n inicio para ${b}`),f.value=!0}),e.onCompleted(b=>{var N;console.log(`ðŸŽ‰ [MANAGER] Completado ${b}`),(((N=e.currentProcess.value)==null?void 0:N.batch_id)===b||e.isMinimized.value)&&(i.value=!0)}),e.onError((b,N)=>{console.error(`âŒ [MANAGER] Error en batch ${b}:`,N)}),e.onProgressUpdated((b,N)=>{}),(w=d.user)!=null&&w.id?e.getUserProcesses(d.user.id):W(()=>{var b;return(b=d.user)==null?void 0:b.id},b=>{b&&e.getUserProcesses(b)},{immediate:!0})};return me(()=>{console.log("ðŸš€ [MANAGER] Mounted"),c()}),Pt(()=>{console.log("ðŸ§¹ [MANAGER] Unmounting"),e.cleanup()}),(w,b)=>(p(),A(te,null,[t(e).isLoading.value&&t(e).currentProcess.value&&!t(e).isMinimized.value&&!t(e).showProcessList.value?(p(),C(Ia,{key:0,"is-loading":!0,progress:t(e).currentProgress.value,title:u.value,subtitle:m.value,onMinimized:r,onCompleted:x,"show-multiple-button":t(e).hasMultipleProcesses.value,onShowMultiple:k,"debug-data":t(e).debugInfo.value},null,8,["progress","title","subtitle","show-multiple-button","debug-data"])):t(e).isLoading.value&&t(e).currentProcess.value&&t(e).isMinimized.value?(p(),A("div",ho,[a(H,{class:"minimized-card",onClick:l},{default:s(()=>[a(ge,{"model-value":t(e).currentProgress.value,color:"primary",size:"40",width:"3"},{default:s(()=>[T(y(Math.round(t(e).currentProgress.value))+"% ",1)]),_:1},8,["model-value"]),n("div",_o,[n("div",bo,y(t(e).activeProcesses.value.length)+" activo"+y(t(e).activeProcesses.value.length!==1?"s":"")+" "+y(t(e).queuedProcesses.value.length>0?`, ${t(e).queuedProcesses.value.length} en cola`:""),1),n("div",yo,y(Math.round(t(e).currentProgress.value))+"% completado ",1)]),a(U,{icon:"",size:"small",variant:"text",onClick:se(k,["stop"]),class:"ms-2"},{default:s(()=>[a(S,{icon:"tabler-list"})]),_:1}),a(S,{class:"minimize-icon ms-2",icon:"tabler-chevron-up",onClick:se(l,["stop"])})]),_:1})])):M("",!0),t(e).showProcessList.value?(p(),C(vo,{key:2,onRemoveProcess:V,onClearCompleted:h,onClose:$,onShowDataProcess:E})):M("",!0),a(Ta,{ref_key:"refModalListErrors",ref:g},null,512),a(Le,{modelValue:f.value,"onUpdate:modelValue":b[1]||(b[1]=N=>f.value=N),timeout:4e3,color:"info",location:"top right",variant:"tonal"},{actions:s(()=>[a(U,{variant:"text",size:"small",onClick:l},{default:s(()=>[T("Ver")]),_:1}),a(U,{icon:"tabler-x",variant:"text",size:"small",onClick:b[0]||(b[0]=N=>f.value=!1)})]),default:s(()=>[n("div",ko,[a(S,{start:"",icon:"tabler-loader-2",class:"spin-animation me-2"}),wo])]),_:1},8,["modelValue"]),a(Le,{modelValue:i.value,"onUpdate:modelValue":b[3]||(b[3]=N=>i.value=N),timeout:5e3,color:"success",location:"top"},{actions:s(()=>[a(U,{variant:"text",onClick:b[2]||(b[2]=N=>i.value=!1)},{default:s(()=>[T(" Cerrar ")]),_:1})]),default:s(()=>[a(S,{start:"",icon:"tabler-check"}),T(" Â¡ImportaciÃ³n completada exitosamente! ")]),_:1},8,["modelValue"])],64))}}),xo=ie(Co,[["__scopeId","data-v-28033b3e"]]),Po={class:"layout-content-wrapper"},Vo={class:"navbar-content-container"},So={class:"layout-page-content"},$o={class:"page-content-container"},No=F({__name:"VerticalNavLayout",props:{navItems:{},verticalNavAttrs:{default:()=>({})}},setup(o){const d=ne(),{company:e,user:i}=he(d),f=o,{width:g}=Vt(),_=ue(),u=I(!1),m=I(!1),x=St(u);$t(u,m),W(g,()=>{!_.isLessThanOverlayNavBreakpoint&&m.value&&(m.value=!1)});const r=z(()=>{const l=Nt(f,"verticalNavAttrs"),{wrapper:k,wrapperProps:V,...E}=l.value;return{verticalNavWrapper:k,verticalNavWrapperProps:V,additionalVerticalNavAttrs:E}});return(l,k)=>{const V=xo;return p(),A("div",{class:O(["layout-wrapper",t(_)._layoutClasses])},[(p(),C(G(t(r).verticalNavWrapper?t(r).verticalNavWrapper:"div"),B(t(r).verticalNavWrapperProps,{class:"vertical-nav-wrapper"}),{default:s(()=>[a(t(ua),B({"is-overlay-nav-active":t(u),"toggle-is-overlay-nav-active":t(x),"nav-items":f.navItems},{...t(r).additionalVerticalNavAttrs}),{"nav-header":s(()=>[Q(l.$slots,"vertical-nav-header")]),"before-nav-items":s(()=>[Q(l.$slots,"before-vertical-nav-items")]),_:3},16,["is-overlay-nav-active","toggle-is-overlay-nav-active","nav-items"])]),_:3},16)),n("div",Po,[n("header",{class:O(["layout-navbar",[{"navbar-blur":t(_).isNavbarBlurEnabled}]])},[n("div",Vo,[Q(l.$slots,"navbar",{toggleVerticalOverlayNavActive:t(x)})])],2),n("main",So,[n("div",$o,[Q(l.$slots,"default")])]),t(i).type_user!="student"?(p(),C(V,{key:0})):M("",!0)]),n("div",{class:O(["layout-overlay",[{visible:t(m)}]]),onClick:k[0]||(k[0]=()=>{m.value=!t(m)})},null,2)],2)}}}),Qe=F({__name:"VerticalNavLink",props:{item:{}},setup(o){const e=ue().isVerticalNavMini();return(i,f)=>t(Ye)(i.item.action,i.item.subject)?(p(),A("li",{key:0,class:O(["nav-link",{disabled:i.item.disable}])},[(p(),C(G(i.item.to?"RouterLink":"a"),B(t(Mt)(i.item),{class:{"router-link-active router-link-exact-active":t(It)(i.item,i.$router)}}),{default:s(()=>[(p(),C(G(t(L).app.iconRenderer||"div"),B(i.item.icon||t(L).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),a(Ge,{name:"transition-slide-x"},{default:s(()=>[Y((p(),C(G(t(L).app.i18n.enable?"i18n-t":"span"),B({key:"title",class:"nav-item-title"},t(ce)(i.item.title,"span")),{default:s(()=>[T(y(i.item.title),1)]),_:1},16)),[[K,!t(e)]]),i.item.badgeContent?Y((p(),C(G(t(L).app.i18n.enable?"i18n-t":"span"),B({key:"badge",class:["nav-item-badge",i.item.badgeClass]},t(ce)(i.item.badgeContent,"span")),{default:s(()=>[T(y(i.item.badgeContent),1)]),_:1},16,["class"])),[[K,!t(e)]]):M("",!0)]),_:1})]),_:1},16,["class"]))],2)):M("",!0)}}),Io={key:0,class:"nav-section-title"},Mo={class:"title-wrapper"},To=F({__name:"VerticalNavSectionTitle",props:{item:{}},setup(o){const e=ue().isVerticalNavMini();return(i,f)=>t(Ye)(i.item.action,i.item.subject)?(p(),A("li",Io,[n("div",Mo,[a(Pe,{name:"vertical-nav-section-title",mode:"out-in"},{default:s(()=>[(p(),C(G(t(e)?t(L).app.iconRenderer:t(L).app.i18n.enable?"i18n-t":"span"),B({key:t(e),class:t(e)?"placeholder-icon":"title-text"},{...t(L).icons.sectionTitlePlaceholder,...t(ce)(i.item.heading,"span")}),{default:s(()=>[T(y(t(e)?null:i.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):M("",!0)}}),Lo=Ue({color:String,direction:{type:String,default:"vertical",validator:o=>["vertical","horizontal"].includes(o)},side:{type:String,default:"end",validator:o=>["start","end","both"].includes(o)},mode:{type:String,default:"intersect",validator:o=>["intersect","manual"].includes(o)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Rt(),...At()},"VInfiniteScroll"),ze=Bt({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootRef:null,rootMargin:String},emits:{intersect:(o,d)=>!0},setup(o,d){let{emit:e}=d;const{intersectionRef:i,isIntersecting:f}=Et(g=>{},o.rootMargin?{rootMargin:o.rootMargin}:void 0);return W(f,async g=>{e("intersect",o.side,g)}),Se(()=>a("div",{class:"v-infinite-scroll-intersect",ref:i},[T("Â ")])),{}}}),zo=Oe()({name:"VInfiniteScroll",props:Lo(),emits:{load:o=>!0},setup(o,d){let{slots:e,emit:i}=d;const f=I(),g=ae("ok"),_=ae("ok"),u=z(()=>Tt(o.margin)),m=ae(!1);function x(P){if(!f.value)return;const v=o.direction==="vertical"?"scrollTop":"scrollLeft";f.value[v]=P}function r(){if(!f.value)return 0;const P=o.direction==="vertical"?"scrollTop":"scrollLeft";return f.value[P]}function l(){if(!f.value)return 0;const P=o.direction==="vertical"?"scrollHeight":"scrollWidth";return f.value[P]}function k(){if(!f.value)return 0;const P=o.direction==="vertical"?"clientHeight":"clientWidth";return f.value[P]}me(()=>{f.value&&(o.side==="start"?x(l()):o.side==="both"&&x(l()/2-k()/2))});function V(P,v){P==="start"?g.value=v:P==="end"&&(_.value=v)}function E(P){return P==="start"?g.value:_.value}let h=0;function $(P,v){m.value=v,m.value&&c(P)}function c(P){if(o.mode!=="manual"&&!m.value)return;const v=E(P);if(!f.value||["empty","loading"].includes(v))return;h=l(),V(P,"loading");function q(R){V(P,R),xe(()=>{R==="empty"||R==="error"||(R==="ok"&&P==="start"&&x(l()-h+r()),o.mode!=="manual"&&xe(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{c(P)})})})}))})}i("load",{side:P,done:q})}const{t:w}=Lt();function b(P,v){var j,D,X,J,re;if(o.side!==P&&o.side!=="both")return;const q=()=>c(P),R={side:P,props:{onClick:q,color:o.color}};return v==="error"?(j=e.error)==null?void 0:j.call(e,R):v==="empty"?((D=e.empty)==null?void 0:D.call(e,R))??a("div",null,[w(o.emptyText)]):o.mode==="manual"?v==="loading"?((X=e.loading)==null?void 0:X.call(e,R))??a(ge,{indeterminate:!0,color:o.color},null):((J=e["load-more"])==null?void 0:J.call(e,R))??a(U,{variant:"outlined",color:o.color,onClick:q},{default:()=>[w(o.loadMoreText)]}):((re=e.loading)==null?void 0:re.call(e,R))??a(ge,{indeterminate:!0,color:o.color},null)}const{dimensionStyles:N}=zt(o);Se(()=>{const P=o.tag,v=o.side==="start"||o.side==="both",q=o.side==="end"||o.side==="both",R=o.mode==="intersect";return a(P,{ref:f,class:["v-infinite-scroll",`v-infinite-scroll--${o.direction}`,{"v-infinite-scroll--start":v,"v-infinite-scroll--end":q}],style:N.value},{default:()=>{var j;return[a("div",{class:"v-infinite-scroll__side"},[b("start",g.value)]),f.value&&v&&R&&a(ze,{key:"start",side:"start",onIntersect:$,rootRef:f.value,rootMargin:u.value},null),(j=e.default)==null?void 0:j.call(e),f.value&&q&&R&&a(ze,{key:"end",side:"end",onIntersect:$,rootRef:f.value,rootMargin:u.value},null),a("div",{class:"v-infinite-scroll__side"},[b("end",_.value)])]}})})}}),Ao={class:"d-flex align-start gap-3"},Ro={key:2},Bo={class:"text-sm font-weight-medium mb-1 text-wrap"},Eo={class:"text-body-2 mb-2 text-wrap",style:{"line-height":"1.4"}},Do={class:"text-caption text-disabled mb-0"},Go={class:"d-flex flex-column align-end"},Oo={class:"d-flex justify-center pa-4"},Uo=n("div",{class:"text-center pa-2 text-caption text-disabled"},"No hay mÃ¡s notificaciones",-1),qo={key:1,class:"text-center pa-6 text-medium-emphasis"},jo=n("p",{class:"text-body-2 mb-0"},"Â¡No tienes notificaciones!",-1),Fo=F({__name:"NotificationsList",props:{notifications:{},badgeProps:{default:void 0},location:{default:"bottom end"},loading:{type:Boolean},unreadCount:{default:0},nextPageUrl:{}},emits:["read","unread","remove","click:notification","load-more","click:view-all"],setup(o,{emit:d}){const e=o,i=d,f=z(()=>e.notifications.length>0&&e.notifications.every(u=>u.isSeen)),g=()=>{if(f.value){const u=e.notifications.map(m=>m.id);u.length&&i("unread",u)}else{const u=e.notifications.filter(m=>!m.isSeen).map(m=>m.id);u.length&&i("read",u)}},_=(u,m)=>{u?i("unread",[m]):i("read",[m])};return(u,m)=>{const x=_e("IconBtn");return p(),C(x,{id:"notification-btn"},{default:s(()=>[a(qe,B({dot:""},e.badgeProps,{"model-value":e.unreadCount>0,content:e.unreadCount,color:"error","offset-x":"2","offset-y":"3"}),{default:s(()=>[a(S,{icon:"tabler-bell"})]),_:1},16,["model-value","content"]),a(Ut,{activator:"parent",width:"380px",location:e.location,offset:"12px","close-on-content-click":!1},{default:s(()=>[a(H,{class:"d-flex flex-column"},{default:s(()=>[a(Ot,{class:"notification-section"},{append:s(()=>[e.unreadCount>0?(p(),C(pe,{key:0,size:"small",color:"primary",class:"me-2"},{default:s(()=>[T(y(e.unreadCount)+" Nueva(s) ",1)]),_:1})):M("",!0),Y(a(x,{size:"34",onClick:g},{default:s(()=>[a(S,{size:"20",color:"high-emphasis",icon:f.value?"tabler-mail-opened":"tabler-mail"},null,8,["icon"]),a(oe,{activator:"parent",location:"start"},{default:s(()=>[T(y(f.value?"Marcar todo como no leÃ­do":"Marcar todo como leÃ­do"),1)]),_:1})]),_:1},512),[[K,e.notifications.length]])]),default:s(()=>[a(je,{class:"text-h6"},{default:s(()=>[T("Notificaciones")]),_:1})]),_:1}),a(we),a(Fe,{class:"notification-list rounded-0 py-0",style:{"max-height":"400px","overflow-y":"auto"}},{default:s(()=>[e.notifications.length?(p(),C(zo,{key:0,mode:"manual",items:e.notifications,onLoad:m[0]||(m[0]=r=>u.$emit("load-more",r)),style:{"overflow-y":"hidden"}},{loading:s(()=>[n("div",Oo,[a(ge,{indeterminate:"",color:"primary",size:"24"})])]),empty:s(()=>[Uo]),"load-more":s(({props:r})=>[a(U,B(r,{variant:"text",size:"small",block:"",loading:r.loading}),{default:s(()=>[T("Cargar mÃ¡s")]),_:2},1040,["loading"])]),default:s(()=>[(p(!0),A(te,null,de(e.notifications,(r,l)=>(p(),A(te,{key:r.id},[l>0?(p(),C(we,{key:0})):M("",!0),a(He,{link:"",lines:"one","min-height":"66px",class:"list-item-hover-class",onClick:k=>u.$emit("click:notification",r)},{default:s(()=>[n("div",Ao,[a($e,{color:r.color&&!r.img?r.color:void 0,variant:r.img?void 0:"tonal"},{default:s(()=>[r.img?(p(),C(We,{key:0,src:("storageBack"in u?u.storageBack:t(Ae))(r.img)},null,8,["src"])):r.icon?(p(),C(S,{key:1,icon:r.icon},null,8,["icon"])):(p(),A("span",Ro,y(("avatarText"in u?u.avatarText:t(Xe))(r.title)),1))]),_:2},1032,["color","variant"]),n("div",null,[n("p",Bo,y(r.title),1),n("p",Eo,y(r.subtitle),1),n("p",Do,y(r.time),1)]),a(Ne),n("div",Go,[a(S,{size:"10",icon:"tabler-circle-filled",color:r.isSeen?"disabled":"primary",class:O([r.isSeen?"visible-in-hover":"","mb-2"]),title:"Marcar leÃ­do/no leÃ­do",onClick:se(k=>_(r.isSeen,r.id),["stop"])},null,8,["color","class","onClick"]),r.isSeen?(p(),C(S,{key:0,size:"18",icon:"tabler-x",class:"visible-in-hover text-medium-emphasis",title:"Eliminar",onClick:se(k=>u.$emit("remove",r.id),["stop"])},null,8,["onClick"])):M("",!0)])])]),_:2},1032,["onClick"])],64))),128))]),_:1},8,["items"])):(p(),A("div",qo,[a(S,{icon:"tabler-bell-off",size:"40",class:"mb-2 text-disabled"}),jo]))]),_:1}),a(we),a(ee,{class:"pa-2 text-center"},{default:s(()=>[a(U,{variant:"text",size:"x-small",color:"primary",block:"",onClick:m[1]||(m[1]=r=>u.$emit("click:view-all"))},{default:s(()=>[T(" Ver todas ")]),_:1})]),_:1})]),_:1})]),_:1},8,["location"])]),_:1})}}}),Ho=F({__name:"NavBarNotificationBell",setup(o){const d=Ee(),e=qt(),i=I(!1);me(async()=>{e.notifications.length===0&&(i.value=!0,await e.fetchNotifications(),i.value=!1),e.initializeListener()});const f=async({done:r})=>{if(!e.nextPageUrl){r("empty");return}try{await e.fetchNotifications(e.nextPageUrl),r("ok")}catch{r("error")}},g=()=>{d.push({name:"Notifications-Index"})},_=r=>e.remove(r),u=r=>e.markAsRead(r),m=async r=>{await Dt("/notification/markMultipleAsUnread").post({notification_ids:r});const l=e.notifications.find(k=>k.id===r[0]);l&&(l.isSeen=!1,e.unreadCount++)},x=r=>{r.isSeen||e.markAsRead([r.id]),r.action_url};return(r,l)=>{const k=Fo;return p(),C(k,{notifications:t(e).notifications,unreadCount:t(e).unreadCount,loading:i.value,nextPageUrl:t(e).nextPageUrl,onRemove:_,onRead:u,onUnread:m,"onClick:notification":x,onLoadMore:f,"onClick:viewAll":g},null,8,["notifications","unreadCount","loading","nextPageUrl"])}}}),Wo={class:"text-capitalize"},Yo=F({__name:"BtnShowAllLoading",setup(o){const d=Ve(),e=z(()=>d.activeProcesses.value.length>0||d.queuedProcesses.value.length>0),i=z(()=>e.value?"tabler-blend-mode":d.completedProcesses.value.length>0?"tabler-history":"tabler-stack-3"),f=z(()=>d.activeProcesses.value.length>0?"rgb(var(--v-theme-primary))":d.queuedProcesses.value.length>0?"rgb(var(--v-theme-warning))":d.completedProcesses.value.length>0?"rgb(var(--v-theme-success))":"rgba(var(--v-theme-on-surface), var(--v-high-emphasis-opacity))"),g=z(()=>{const u=d.allProcesses.value.length,m=d.activeProcesses.value.length,x=d.queuedProcesses.value.length,r=d.completedProcesses.value.length;if(u===0)return"No hay procesos";let l=`Ver Todas (${u})`;return m>0&&(l+=` â€¢ ${m} activo${m!==1?"s":""}`),x>0&&(l+=` â€¢ ${x} en cola`),r>0&&(l+=` â€¢ ${r} completado${r!==1?"s":""}`),l});z(()=>d.allProcesses.value.length>0);const _=z(()=>{const u=["loading-icon"];return e.value&&u.push("spin-animation"),u.join(" ")});return(u,m)=>{const x=_e("IconBtn");return p(),A("div",null,[a(x,{color:f.value,onClick:m[0]||(m[0]=r=>t(d).showProcessListModal()),class:O(["loading-btn",{"loading-btn--animated":e.value,"loading-btn--active":t(d).activeProcesses.value.length>0,"loading-btn--queued":t(d).queuedProcesses.value.length>0,"loading-btn--completed":t(d).completedProcesses.value.length>0&&t(d).activeProcesses.value.length===0}])},{default:s(()=>[a(oe,{activator:"parent",location:"bottom"},{default:s(()=>[n("span",Wo,y(g.value),1)]),_:1}),a(S,{icon:i.value,class:O(_.value),size:"20"},null,8,["icon","class"]),t(d).allProcesses.value.length>0?(p(),C(qe,{key:0,content:t(d).allProcesses.value.length,color:t(d).activeProcesses.value.length>0?"primary":t(d).queuedProcesses.value.length>0?"warning":"success",class:O(["loading-badge",{"loading-badge--pulse":e.value}])},null,8,["content","color","class"])):M("",!0)]),_:1},8,["color","class"])])}}}),Ko=ie(Yo,[["__scopeId","data-v-8f9322c2"]]),{getMenuData:Qo}=he(ne()),Xo={class:"d-flex h-100 align-center"},Fs=F({__name:"DefaultLayoutWithVerticalNav",setup(o){const d=ne(),{company:e,user:i}=he(d);return(f,g)=>{const _=_e("IconBtn"),u=Ko,m=Ho;return p(),C(t(No),{"nav-items":t(Qo)},{navbar:s(({toggleVerticalOverlayNavActive:x})=>{var r;return[n("div",Xo,[a(_,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:l=>x(!0)},{default:s(()=>[a(S,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),a(Ft),a(Ne),t(i).type_user!="student"?(p(),C(u,{key:0})):M("",!0),t(ke).app.i18n.enable&&((r=t(ke).app.i18n.langConfig)!=null&&r.length)?(p(),C(Yt,{key:1,languages:t(ke).app.i18n.langConfig},null,8,["languages"])):M("",!0),a(m,{class:"me-1"}),a(Ht)])]}),footer:s(()=>[a(jt)]),default:s(()=>[Q(f.$slots,"default")]),_:3},8,["nav-items"])}}});export{Fs as default};

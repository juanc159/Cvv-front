import{aA as c,ab as u}from"./index-62a8d4f5.js";const h=c("useCrudSubjectStore",{state:()=>({loading:{form:!1,table:!1},form:{id:null,type_education_id:null,name:null,code:null},subjectData:{},subjects:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,typeEducations:[]}),getters:{},actions:{clearForm(){this.form={id:null,type_education_id:null,name:null,code:null}},async fetchAll(e){var o;this.loading.table=!0;const{data:t,response:l,error:s,isFetching:a}=await u("/subject-list").post(e);this.loading.table=a.value,(o=l.value)!=null&&o.ok&&t.value&&(this.subjects=t.value.subjects,this.totalData=t.value.totalData,this.totalPage=t.value.totalPage,this.currentPage=t.value.currentPage,this.lastPage=t.value.lastPage)},async fetchDataForm(e,t="create"){var r,n;this.loading.form=!0;const l=e?`/subject-dataForm/${t}/${e}`:`/subject-dataForm/${t}`,{data:s,response:a,error:o,isFetching:i}=await u(l).get();this.loading.form=i.value,(r=a.value)!=null&&r.ok&&s.value&&(this.typeEducations=s.value.typeEducations),(n=a.value)!=null&&n.ok&&s.value.form&&(this.form=s.value.form)},async fetchSave(){var o;const e=new FormData;for(const i in this.form)e.append(i,this.form[i]);this.loading.form=!0;const{data:t,response:l,error:s,isFetching:a}=await u("/subject-create").post(e);return this.loading.form=a.value,(o=l.value)!=null&&o.ok&&t.value&&(this.form=t.value.data),t.value},async fetchDelete(e){this.loading.table=!0;const{isFetching:t}=await u("/subject-delete/"+e).delete();this.loading.table=t.value},async changeState(e){var a;this.loading.table=!0;const{data:t,response:l,isFetching:s}=await u("/subject-changeState").post(e);return this.loading.table=s.value,(a=l.value)!=null&&a.ok&&t.value&&(this.form=t.value.data),t.value}}});export{h as u};

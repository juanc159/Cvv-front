import{a as $}from"./formatters-1588bd0d.js";import{_ as A,a as I}from"./TableFullNew.vue_vue_type_script_setup_true_lang-97cc8020.js";import{u as L}from"./useCrudTeacherStore-6500f727.js";import{d as P,R,r as v,aF as j,o as l,c as u,b as t,f as n,e as _,ae as s,B as y,k as b,D as G,g as w,C as k,F as T,m as O,a6 as p,ac as m,af as q,q as H,E as J}from"./index-ba2685b5.js";import{S as K}from"./sweetalert2.esm.all-562d67d8.js";import{a as M}from"./helpers-53221d8d.js";import{b as Q,V as U}from"./VCard-1dca3b92.js";import{V as W}from"./VCardText-27ca00f5.js";import{V as X}from"./VAvatar-ade85f75.js";import{V as Y}from"./VImg-2b1475bc.js";import{V as Z,a as tt,b as et}from"./VList-dc57db0b.js";import{V as at}from"./VChip-c897905c.js";import{V as ot}from"./VDivider-c2c0a35b.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-0d50680a.js";import"./VDialog-36be7163.js";import"./dialog-transition-c42e04e3.js";import"./VField-e5cc8e8a.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-56c369f6.js";import"./VSelect-8440ed8f.js";import"./VTextField-0453d93a.js";import"./VMenu-0d10e868.js";import"./VRow-3431edda.js";/* empty css              */import"./VCol-b72a8398.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-5b730ec1.js";import"./_commonjsHelpers-725317a4.js";import"./createUrl-4a1dbebf.js";import"./index-9c720871.js";import"./VContainer-1d646a20.js";import"./VPagination-db7fed11.js";import"./VDataTable-19d538e8.js";import"./ssrBoot-5fdfebdb.js";const nt={class:"app-teacher-search-filter d-flex align-center flex-wrap gap-4"},it={key:1},Rt=P({__name:"Index",setup(rt){const x=L(),F=R(),f=H(),d=async(o="create",a)=>{if(o=="order")return f.push({name:"Teacher-Order"}),!1;if(o=="planning")return f.push({name:"Teacher-Planning",params:{id:a}}),!1;f.push({name:"Teacher-Form",params:{action:o,id:a}})},N=async(o,a)=>{const r=!o[a];(await x.changeState({id:o.id,value:r,field:a})).code==200&&(o.state=r)},D=async o=>{K.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await x.fetchDelete(o),await g(C.value)):a.isDenied})},h=v(),S={url:"/teacher-list",headers:[{title:"Acciones",key:"actions"},{title:"Estado",key:"state"},{title:"Foto",key:"photo"},{title:"Tipo de educación",key:"type_education_name"},{title:"Cargo",key:"job_position_name"},{title:"Nombre(s)",key:"name"},{title:"Apellido(s)",key:"last_name"},{title:"Correo",key:"email"},{title:"Telefono",key:"phone"}],params:{company_id:F.company.id}},C=v({}),g=(o={})=>{C.value=o,h.value.changeFilter(o)},B=v({inputGeneral:{relationsGeneral:{all:["name","last_name","email","phone"],typeEducation:["name"],jobPosition:["name"]}},dialog:{width:500,inputs:[{input_type:"booleanActive",title:"Estado",key:"state"}]}}),V=j({excel:!1}),z=async o=>{var c;V.excel=!0;const{data:a,response:r}=await q("/teacher-downloadConsolidated/"+o.id).get();if(V.excel=!1,(c=r.value)!=null&&c.ok&&a.value){const e="Nómina "+o.name+" "+o.last_name;M(a.value.excel,e)}};return(o,a)=>{const r=A,c=I;return l(),u("div",null,[t(U,null,{default:n(()=>[t(Q,{class:"d-flex justify-space-between"},{default:n(()=>[a[4]||(a[4]=_("div",null," Listado de docentes ",-1)),_("div",nt,[t(s,{color:"primary",onClick:a[0]||(a[0]=e=>d("order"))},{default:n(()=>a[2]||(a[2]=[y(" Ordenar Docentes ")])),_:1}),t(s,{color:"primary",onClick:a[1]||(a[1]=e=>d())},{default:n(()=>a[3]||(a[3]=[y(" Crear Docente ")])),_:1})])]),_:1}),t(W,null,{default:n(()=>[t(r,{ref:"filterDialogNewRef",optionsFilter:b(B),onSendFilter:g},null,8,["optionsFilter"])]),_:1}),t(c,{ref_key:"tableFullNew",ref:h,optionsTable:S},{"item.photo":n(({item:e})=>[t(X,{color:e.photo?"":"primary",class:G(e.photo?null:"v-avatar-light-bg primary--text"),variant:e.photo?void 0:"tonal"},{default:n(()=>[e.photo?(l(),w(Y,{key:0,src:e.photo},null,8,["src"])):(l(),u("span",it,k(("avatarText"in o?o.avatarText:b($))(e.name+" "+e.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.subjects":n(({item:e})=>[t(Z,{border:""},{default:n(()=>[(l(!0),u(T,null,O(e.subjects,(i,E)=>(l(),u(T,{key:i.name},[t(tt,null,{default:n(()=>[t(et,null,{default:n(()=>[y(k(i),1)]),_:2},1024)]),_:2},1024),E!==e.subjects.length-1?(l(),w(ot,{key:0})):J("",!0)],64))),128))]),_:2},1024)]),"item.state":n(({item:e})=>[t(at,{color:e.state==1?"success":"error",onClick:i=>N(e,"state")},{default:n(()=>[t(p,{start:"",size:"16",icon:e.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),_("span",null,k(e.state==1?"Activo":"Inactivo"),1),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":n(({item:e})=>[t(s,{icon:"",size:"x-small",color:"error",variant:"text",onClick:i=>D(e.id)},{default:n(()=>[t(p,{size:"22",icon:"tabler-trash"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),t(s,{icon:"",size:"x-small",color:"default",variant:"text",onClick:i=>d("edit",e.id)},{default:n(()=>[t(p,{size:"22",icon:"tabler-edit"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),t(s,{icon:"",size:"x-small",color:"default",variant:"text",onClick:i=>d("planning",e.id)},{default:n(()=>[t(p,{size:"22",icon:"tabler-file"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Planificación"})]),_:2},1032,["onClick"]),t(s,{icon:"",size:"x-small",variant:"text",onClick:i=>z(e)},{default:n(()=>[t(p,{size:"22",icon:"tabler-file-download"}),t(m,{location:"top",transition:"scale-transition",activator:"parent",text:"Descargar Nómina"})]),_:2},1032,["onClick"])]),_:1},512)]),_:1})])}}});export{Rt as default};

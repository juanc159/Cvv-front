import{aF as u,ah as o}from"./index-a73ef7a4.js";const c=u("useCrudUserStore",{state:()=>({loading:{form:!1,table:!1},form:{id:null,email:null,password:null,name:null,last_name:null,photo:null},userData:{},users:[],totalData:0,totalPage:0,currentPage:1,lastPage:0}),getters:{},actions:{clearForm(){this.form={id:null,email:null,password:null,name:null,last_name:null,photo:null}},async fetchAll(e){var r;this.loading.table=!0;const{data:a,response:t,error:l,isFetching:s}=await o("/user-list").post(e);this.loading.table=s.value,(r=t.value)!=null&&r.ok&&a.value&&(this.users=a.value.users,this.totalData=a.value.totalData,this.totalPage=a.value.totalPage,this.currentPage=a.value.currentPage,this.lastPage=a.value.lastPage)},async fetchDataForm(e,a="create"){var n;this.loading.form=!0;const t=e?`/user-dataForm/${a}/${e}`:`/user-dataForm/${a}`,{data:l,response:s,error:r,isFetching:i}=await o(t).get();this.loading.form=!1,(n=s.value)!=null&&n.ok&&l.value&&(this.clearForm(),l.value.form&&(this.form=l.value.form))},async fetchSave(){var r;const e=new FormData;for(const i in this.form)e.append(i,this.form[i]);this.loading.form=!0;const{data:a,response:t,error:l,isFetching:s}=await o("/user-create").post(e);return this.loading.form=!1,(r=t.value)!=null&&r.ok&&a.value&&(this.form=a.value.data),a.value},async fetchDelete(e){this.loading.table=!0;const{isFetching:a}=await o("/user-delete/"+e).delete();this.loading.table=a.value},async changeState(e){var s;this.loading.table=!0;const{data:a,response:t,isFetching:l}=await o("/user-changeState").post(e);return this.loading.table=l.value,(s=t.value)!=null&&s.ok&&a.value&&(this.form=a.value.data),a.value}}});export{c as u};

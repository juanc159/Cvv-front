import{s as w,o as q}from"./helpers-DdkYGSV2.js";import{a as H}from"./formatters-DP0nN1yO.js";import{_ as J}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-Dn7MW0hk.js";import{_ as K}from"./ModalQuestion.vue_vue_type_script_setup_true_lang-osgM7-BI.js";import{_ as O,a as W}from"./FilterDialogNew-T6zklJTG.js";import{_ as X}from"./ModalUnsubscribe.vue_vue_type_script_setup_true_lang-CTub3YuE.js";import{d as Y,U as Z,r as l,ax as ee,c as te,o as p,b as e,f as o,e as i,ad as oe,C,k as n,a8 as b,g as v,D as S,x as ae,ae as se,al as T,af as ne}from"./index-D51GRe6t.js";import{u as le}from"./useAxios-DW8bvlc7.js";import{b as ie,V as x}from"./VCard-CL0_f1Rv.js";import{V as k}from"./VCardText-BG9Be0VU.js";import{a as y}from"./VList-CwHYFaLE.js";import{V as g}from"./VAvatar-YSQqMGG0.js";import{V as B}from"./VImg-BAMlD0AI.js";import{V as re}from"./VDialog-DEHTgb_t.js";import"./constants-2GBt7OCP.js";import"./VDataTable-DNyKYAi4.js";import"./VSelect-DsHnhIbc.js";import"./VTextField-D1dTraZf.js";/* empty css                   */import"./VCounter-Cq_xbMWB.js";import"./VInput-DOt6-JQk.js";import"./VOverlay-BKCzoZnS.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-B6ybcPVi.js";import"./VMenu-BU6phFtj.js";import"./VCheckboxBtn-DYkEu2zv.js";import"./VSelectionControl-BAtgv-0e.js";import"./VChip-cwtQUJt7.js";import"./VTable-DyDNuAbG.js";import"./filter-mrmxV9Mf.js";import"./VDivider-BNBB-q-1.js";import"./VSkeletonLoader-DzKmkdMF.js";import"./VRow-AzIICDfk.js";/* empty css              */import"./VTooltip-B0MeQ_W-.js";import"./AppDateTimePicker.vue_vue_type_style_index_0_lang-B9bVs4cO.js";import"./AppSelectRemote-BEi18a5r.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-ByqahL2b.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-Bv5NlyTN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VToolbar-Cf-07iXi.js";import"./validators-CWFTEnsF.js";import"./VAlert-C174iew7.js";import"./VForm-HzVY-XEm.js";import"./VContainer-COnyK01A.js";import"./ssrBoot-FcSyyOeW.js";const ce=i("span",null," Estudiantes ",-1),ue={class:"d-flex justify-end gap-3 flex-wrap"},de={class:"my-3"},pe=i("span",null,"Descargar constancia de estudio",-1),me=i("span",null,"Resetear contraseña",-1),fe=i("span",null,"Dar de baja",-1),rt=Y({__name:"List",setup(_e){const D=Z(),m=l(),F={url:"/student/list",paramsGlobal:{company_id:D.company.id},headers:[{title:"Acciones",key:"actions",sortable:!1},{title:"Foto ",key:"photo",sortable:!1},{title:"Grado ",key:"grade_name"},{title:"Sección ",key:"section_name"},{title:"Tipo de documento ",key:"type_document_name"},{title:"Documento ",key:"identity_document"},{title:"Nombre",key:"full_name"},{title:"Tipo de educación",key:"type_education_name"}],actions:{changeStatus:{show:!1},view:{show:!1},delete:{url:"/student/delete"}}},M=l({dialog:{width:500,inputs:[{type:"selectApi",label:"Sección",name:"section_id",url:"selectInfiniteSection",arrayInfo:"section",multiple:!0},{type:"select",name:"photo",label:"Foto",value:null,options:[{value:1,title:"Con foto"},{value:0,title:"Sin foto"}]}]},filterLabels:{inputGeneral:"Buscar en todo",is_active:"Estado"}}),u=ee({table:!1,btnPdf:!1}),$=async t=>{u.table=!0;const{data:a,response:d}=await ne("/student-resetPassword/"+t).get();u.table=!1},f=l(),P=t=>{f.value.openModal(t),f.value.componentData.title="¿Seguro desea reiniciar la contraseña al registro?"},r=l(!1),c=l(null),A=(t=null)=>{r.value=!0,c.value=t},N=()=>{c.value=null,r.value=!1},h=l(),z=t=>{h.value.openModal(t)},E=t=>{var a;(a=tableFull.value)==null||a.fetchTableData()},U=t=>{T.push({name:"Student-Form",params:{action:"edit",id:t.id}})},I=()=>{T.push({name:"Student-Form",params:{action:"create"}})},V=l(!1),L=()=>{m.value&&m.value.fetchTableData(null,!1,!0)},Q=async t=>{u.btnPdf=!0;const{data:a,response:d}=await le(`/pw-study-certificate/${t}`).get();u.btnPdf=!1,d.status==200&&a&&q(a.pdf)};return(t,a)=>{const d=O,j=W,G=K,R=J;return p(),te("div",null,[e(x,null,{default:o(()=>[e(ie,{class:"d-flex justify-space-between"},{default:o(()=>[ce,i("div",ue,[e(oe,{onClick:a[0]||(a[0]=s=>I())},{default:o(()=>[C(" Agregar estudiante ")]),_:1})])]),_:1}),e(k,null,{default:o(()=>[e(d,{"options-filter":n(M),onForceSearch:L,"table-loading":n(V)},null,8,["options-filter","table-loading"])]),_:1}),e(k,{class:"mt-2"},{default:o(()=>[e(j,{ref_key:"refTableFull",ref:m,options:F,onEdit:U,"onUpdate:loading":a[1]||(a[1]=s=>V.value=s)},{"item.photo":o(({item:s})=>[i("div",de,[s.photo?(p(),v(g,{key:0,rounded:"",size:"120",color:"primary",variant:"tonal",class:"user-profile-avatar mx-auto",style:{cursor:"pointer"},onClick:_=>A(s)},{default:o(()=>[e(B,{src:("storageBack"in t?t.storageBack:n(w))(s.photo)},null,8,["src"])]),_:2},1032,["onClick"])):(p(),v(g,{key:1,color:"primary",variant:"tonal",size:"50"},{default:o(()=>[C(S(("avatarText"in t?t.avatarText:n(H))(s.full_name)),1)]),_:2},1024))])]),"item.actions2":o(({item:s})=>[e(y,{onClick:_=>Q(s.id)},{prepend:o(()=>[e(b,{size:"22",icon:"tabler-file"})]),default:o(()=>[pe]),_:2},1032,["onClick"]),e(y,{onClick:_=>P(s.id)},{prepend:o(()=>[e(b,{size:"22",icon:"tabler-lock-open"})]),default:o(()=>[me]),_:2},1032,["onClick"]),e(y,{onClick:_=>z(s.id)},{prepend:o(()=>[e(b,{size:"22",icon:"tabler-user-down"})]),default:o(()=>[fe]),_:2},1032,["onClick"])]),_:1},512)]),_:1})]),_:1}),e(G,{ref_key:"refModalQuestion",ref:f,onSuccess:$},null,512),e(re,{modelValue:n(r),"onUpdate:modelValue":a[3]||(a[3]=s=>se(r)?r.value=s:null),"max-width":"40rem"},{default:o(()=>[e(R,{onClick:a[2]||(a[2]=s=>N())}),n(c)?(p(),v(x,{key:0},{default:o(()=>[e(k,{class:"text-center"},{default:o(()=>[i("h3",null,S(n(c).full_name),1),e(g,{rounded:"",size:"520",color:"primary",variant:"tonal",class:"user-profile-avatar mx-auto"},{default:o(()=>[e(B,{src:("storageBack"in t?t.storageBack:n(w))(n(c).photo)},null,8,["src"])]),_:1})]),_:1})]),_:1})):ae("",!0)]),_:1},8,["modelValue"]),e(X,{ref_key:"refModalUnsubscribe",ref:h,onExecute:E},null,512)])}}});export{rt as default};

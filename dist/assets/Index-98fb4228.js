import{V as h,r as V}from"./VForm-fa5c9aa5.js";import{_ as x}from"./AppSelect.vue_vue_type_script_setup_true_lang-0ed834ab.js";import{d as w,a0 as F,aB as B,r as m,E as q,ab as v,o as y,c as E,b as a,f as t,t as u,n as e,g as T,a9 as A,e as D,ax as I}from"./index-62a8d4f5.js";import{u as N}from"./useImageUpload-a6a68b5f.js";import{b as S,V as U}from"./VCard-7bf16d15.js";import{V as $}from"./VCardText-3f72e3f5.js";import{V as g}from"./VRow-40c52f12.js";import{V as c}from"./VCol-4eac919d.js";import{V as j}from"./VField-c4281105.js";import{V as z}from"./VFileInput-16d85cd4.js";import"./helpers-3edea678.js";import"./VSelect-fc294de7.js";import"./VTextField-1b4a69f4.js";import"./VImg-5c0c0084.js";import"./VList-f4c8b1f5.js";import"./ssrBoot-4d1dc1da.js";import"./VAvatar-7b61dc52.js";import"./VDivider-c783ce8f.js";import"./dialog-transition-1ac5c7f8.js";import"./VMenu-2b898e89.js";import"./VChip-a8df01b2.js";import"./sweetalert2.all-ae952bba.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */const G=D("b",{class:"text-warning"},"*",-1),ce=w({__name:"Index",setup(L){const C=F(),{toast:k}=I(),l=B({form:!1}),s=m({company_id:null,type_education_id:null,archive:null}),p=m({}),f=m(),_=m([]),n=m(N());n.value.allowedExtensions=["xls","xlsx"],q(async()=>{var i;l.form=!0;const{data:o,response:r}=await v("note-dataForm").get();l.form=!1,(i=r.value)!=null&&i.ok&&o.value&&(_.value=o.value.typeEducations)});const b=async()=>{var r;s.value.archive=n.value.imageFile,s.value.company_id=C.company.id;const o=await((r=f.value)==null?void 0:r.validate());if(o!=null&&o.valid){const i=new FormData;for(const d in s.value)i.append(d,s.value[d]);l.form=!0,await v("note-store").post(i),l.form=!1}else k("Faltan Campos Por Diligenciar","","danger")};return(o,r)=>{const i=x;return y(),E("div",null,[a(U,{disabled:e(l).form,loading:e(l).form},{default:t(()=>[a(S,{"primary-title":""},{default:t(()=>[u("Cargar Notas")]),_:1}),a($,null,{default:t(()=>[a(e(h),{ref_key:"formValidation",ref:f,"lazy-validation":""},{default:t(()=>[a(g,null,{default:t(()=>[a(c,{cols:"12",sm:"4"},{default:t(()=>[a(i,{clearable:"",modelValue:e(s).type_education_id,"onUpdate:modelValue":r[0]||(r[0]=d=>e(s).type_education_id=d),rules:["requiredValidator"in o?o.requiredValidator:e(V)],"error-messages":e(p).type_education_id,label:"Tipo",onChange:r[1]||(r[1]=d=>e(p).type_education_id=""),requiredField:!0,items:e(_)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),a(c,{cols:"12",sm:"4"},{default:t(()=>[a(j,null,{default:t(()=>[u("ArchivoÂ "),G]),_:1}),(y(),T(z,{key:e(n).key,onChange:e(n).handleImageSelected,"onClick:clear":e(n).clearData,rules:["requiredValidator"in o?o.requiredValidator:e(V)]},null,8,["onChange","onClick:clear","rules"]))]),_:1})]),_:1}),a(g,null,{default:t(()=>[a(c,{cols:"12",class:"d-flex justify-center"},{default:t(()=>[a(A,{loading:e(l).form,color:"primary",onClick:b},{default:t(()=>[u(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["disabled","loading"])])}}});export{ce as default};

import{s as ze}from"./helpers-C0EwqvCj.js";import{a as Qe}from"./formatters-BN2nx8Fd.js";import{d as j,W as Ie,T as xe,V as oe,U as he,r as N,X as Je,x as ce,t as Ae,w as W,Y as z,z as L,a as _e,h as k,o as d,i as O,G as U,l as t,f as o,e as n,I as Q,b as a,Q as Y,R as K,E as b,B as E,c as R,F as ee,q as ue,Z as be,$ as ye,a0 as Xe,a1 as Re,v as Be,a2 as Ee,y as I,C as re,D as T,a3 as De,H as Te,a4 as Z,N as de,a5 as Ze,a6 as Pe,a7 as $,a8 as pe,a9 as F,aa as et,ab as tt,ac as Ve,ad as ae,ae as fe,af as Oe,ag as Ue,ah as at,ai as st,aj as ot,ak as nt,al as it,am as lt,an as te,ao as rt,ap as ct,aq as ut,ar as Se,as as dt,at as mt,au as vt,av as pt,aw as ft,ax as gt,ay as ht,az as _t,aA as bt,aB as Ce,aC as yt,aD as kt,aE as wt,aF as Pt,aG as Ct,aH as ge,aI as xt,aJ as Vt,aK as St,aL as $t,J as Nt,K as It,aM as Tt,aN as Mt,aO as Lt,aP as zt,aQ as At,aR as Rt,aS as Bt,aT as Et,O as ke}from"./index-BaV16FCr.js";import{V as Ge}from"./VBadge-BGdcl0TC.js";import{V as H,a as qe,b as Dt,c as Ot}from"./VCard-Cu9KQF3n.js";import{V as ve}from"./VChip-DTwUZwmi.js";import{V as we}from"./VDivider-kUj94-mG.js";import{V as je,a as Fe}from"./VList-RAYwNb6B.js";import{V as $e}from"./VAvatar-BBYtPJKV.js";import{V as He}from"./VImg-Dx556MLp.js";import{V as Ne}from"./VSpacer-Cwv-1Gxm.js";import{V as se}from"./VCardText-CDLeL-c9.js";import{V as Ut}from"./VMenu-Bue79pR2.js";import{u as Gt}from"./useNotificationStore-Dri7FzR1.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import qt from"./Footer-Dc70QuVt.js";import{_ as jt}from"./NavbarThemeSwitcher.vue_vue_type_script_setup_true_lang-aLELOzLI.js";import{_ as Ft}from"./UserProfile.vue_vue_type_script_setup_true_lang-CKqwofBH.js";import{c as Ht,a as We,_ as Wt}from"./I18n.vue_vue_type_script_setup_true_lang-2hiJMlny.js";import{_ as Yt,a as Kt}from"./FilterDialogNew-VU8aYR17.js";import{_ as Qt}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-D7H4qe_I.js";import{V as Ye}from"./VDialog-CPKJ-TIk.js";import{V as Jt,a as Xt}from"./VToolbar-BSS9Uart.js";import{V as Zt,a as me}from"./VRow-BFfZTps2.js";import{C as ea}from"./vue3-perfect-scrollbar-vPNOis_a.js";import{V as ta}from"./VNodeRenderer-Cuptf-2m.js";import"./constants-2GBt7OCP.js";import"./ssrBoot-BMrzvYku.js";/* empty css              */import"./dialog-transition-DCflx0be.js";import"./ModalChangePassword.vue_vue_type_script_setup_true_lang-0LDG4kBD.js";import"./validators-aR-Q5zwJ.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-BP0KR5pZ.js";import"./VTextField-CL-0Z5oA.js";/* empty css                   */import"./VCounter-C2NgZD61.js";import"./VForm-Cakuzm8b.js";import"./ModalQuestion.vue_vue_type_script_setup_true_lang-BTbV_m4u.js";import"./VDataTable-CwT5imX9.js";import"./VSelect-Bjp9kztP.js";import"./VCheckboxBtn-Bs1gRmrB.js";import"./VSelectionControl-CEJbriLn.js";import"./VTable-BKakwtEv.js";import"./filter-NG0Xi5ff.js";import"./VSkeletonLoader-BCyUt9Id.js";import"./AppSelectRemote-Pe5c5ETG.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-CxyaLK82.js";const aa=j({name:"TransitionExpand",setup(s,{slots:u}){const e=f=>{const _=getComputedStyle(f).width;f.style.width=_,f.style.position="absolute",f.style.visibility="hidden",f.style.height="auto";const c=getComputedStyle(f).height;f.style.width="",f.style.position="",f.style.visibility="",f.style.height="0px",getComputedStyle(f).height,requestAnimationFrame(()=>{f.style.height=c})},i=f=>{f.style.height="auto"},m=f=>{const _=getComputedStyle(f).height;f.style.height=_,getComputedStyle(f).height,requestAnimationFrame(()=>{f.style.height="0px"})};return()=>Ie(Ie(xe),{name:"expand",onEnter:e,onAfterEnter:i,onLeave:m},()=>{var f;return(f=u.default)==null?void 0:f.call(u)})}}),sa=ne(aa,[["__scopeId","data-v-dd57622d"]]),oa=s=>(be("data-v-7ba133df"),s=s(),ye(),s),na={class:"nav-header"},ia={class:"header-action"},la=oa(()=>n("div",{class:"vertical-nav-items-shadow"},null,-1)),ra=j({__name:"VerticalNav",props:{tag:{default:"aside"},navItems:{},isOverlayNavActive:{type:Boolean},toggleIsOverlayNavActive:{}},setup(s){const u=oe(),{company:e,user:i}=he(u),m=s,f=N(),_=Je(f);Xe(Re,_);const c=ce(),v=h=>"heading"in h?Ns:"children"in h?da:Ke,x=Ae();W(()=>x.name,()=>{m.toggleIsOverlayNavActive(!1)});const l=N(!1),r=h=>l.value=h,w=h=>{l.value=h.target.scrollTop>0},C=c.isVerticalNavMini(_),A=z(()=>{var h=e.value.name??L.app.title,S=9;return h.length<=S?h:h.slice(0,S)+"..."});return(h,S)=>{const p=_e("RouterLink");return d(),k(O(m.tag),{ref_key:"refNav",ref:f,class:U(["layout-vertical-nav",[{"overlay-nav":t(c).isLessThanOverlayNavBreakpoint,hovered:t(_),visible:h.isOverlayNavActive,scrolled:t(l)}]])},{default:o(()=>[n("div",na,[Q(h.$slots,"nav-header",{},()=>[a(p,{to:{name:"Home"},class:"app-logo app-title-wrapper"},{default:o(()=>{var P,y;return[(P=t(e))!=null&&P.logo?(d(),k(He,{key:0,style:{width:"80px"},src:("storageBack"in h?h.storageBack:t(ze))((y=t(e))==null?void 0:y.logo)},null,8,["src"])):(d(),k(t(ta),{key:1,nodes:t(L).app.logo},null,8,["nodes"])),a(xe,{name:"vertical-nav-app-title"},{default:o(()=>[Y(n("h1",{class:"app-logo-title"},b(t(A)),513),[[K,!t(C)]])]),_:1})]}),_:1}),n("div",ia,[Y((d(),k(O(t(L).app.iconRenderer||"div"),E({class:["d-none nav-unpin",t(c).isVerticalNavCollapsed&&"d-lg-block"]},t(L).icons.verticalNavUnPinned,{onClick:S[0]||(S[0]=P=>t(c).isVerticalNavCollapsed=!t(c).isVerticalNavCollapsed)}),null,16,["class"])),[[K,t(c).isVerticalNavCollapsed]]),Y((d(),k(O(t(L).app.iconRenderer||"div"),E({class:["d-none nav-pin",!t(c).isVerticalNavCollapsed&&"d-lg-block"]},t(L).icons.verticalNavPinned,{onClick:S[1]||(S[1]=P=>t(c).isVerticalNavCollapsed=!t(c).isVerticalNavCollapsed)}),null,16,["class"])),[[K,!t(c).isVerticalNavCollapsed]]),(d(),k(O(t(L).app.iconRenderer||"div"),E({class:"d-lg-none"},t(L).icons.close,{onClick:S[2]||(S[2]=P=>h.toggleIsOverlayNavActive(!1))}),null,16))])],!0)]),Q(h.$slots,"before-nav-items",{},()=>[la],!0),Q(h.$slots,"nav-items",{updateIsVerticalNavScrolled:r},()=>[(d(),k(t(ea),{key:t(c).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:w},{default:o(()=>[(d(!0),R(ee,null,ue(h.navItems,(P,y)=>(d(),k(O(v(P)),{key:y,item:P},null,8,["item"]))),128))]),_:1}))],!0),Q(h.$slots,"after-nav-items",{},void 0,!0)]),_:3},8,["class"])}}}),ca=ne(ra,[["__scopeId","data-v-7ba133df"]]),ua={class:"nav-group-children"},da=j({name:"VerticalNavGroup",__name:"VerticalNavGroup",props:{item:{}},setup(s){const u=s,e=Ae(),i=Be(),m=ce(),f=m.isVerticalNavMini(),_=Ee(Re,N(!1)),c=N(!1),v=N(!1),x=r=>r.some(w=>{let C=Z.value.includes(w.title);return"children"in w&&(C=x(w.children)||C),C}),l=r=>{r.forEach(w=>{"children"in w&&l(w.children),Z.value=Z.value.filter(C=>C!==w.title)})};return W(()=>e.path,()=>{const r=Te(u.item.children,i);v.value=r&&!m.isVerticalNavMini(_).value,c.value=r},{immediate:!0}),W(v,r=>{const w=Z.value.indexOf(u.item.title);r&&w===-1?Z.value.push(u.item.title):!r&&w!==-1&&(Z.value.splice(w,1),l(u.item.children))},{immediate:!0}),W(Z,r=>{if(r.at(-1)===u.item.title)return;const C=Te(u.item.children,i);C||x(u.item.children)||(v.value=C,c.value=C)},{deep:!0}),W(m.isVerticalNavMini(_),r=>{v.value=r?!1:c.value}),(r,w)=>t(Ht)(r.item)?(d(),R("li",{key:0,class:U(["nav-group",[{active:t(c),open:t(v),disabled:r.item.disable}]])},[n("div",{class:"nav-group-label",onClick:w[0]||(w[0]=C=>v.value=!t(v))},[(d(),k(O(t(L).app.iconRenderer||"div"),E(r.item.icon||t(L).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(d(),k(O(De),{name:"transition-slide-x"},{default:o(()=>[Y((d(),k(O(t(L).app.i18n.enable?"i18n-t":"span"),E(t(re)(r.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:o(()=>[T(b(r.item.title),1)]),_:1},16)),[[K,!t(f)]]),r.item.badgeContent?Y((d(),k(O(t(L).app.i18n.enable?"i18n-t":"span"),E({key:0},t(re)(r.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",r.item.badgeClass]}),{default:o(()=>[T(b(r.item.badgeContent),1)]),_:1},16,["class"])),[[K,!t(f)]]):I("",!0),Y((d(),k(O(t(L).app.iconRenderer||"div"),E(t(L).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[K,!t(f)]])]),_:1}))]),a(t(sa),null,{default:o(()=>[Y(n("ul",ua,[(d(!0),R(ee,null,ue(r.item.children,C=>(d(),k(O("children"in C?"VerticalNavGroup":t(Ke)),{key:C.title,item:C},null,8,["item"]))),128))],512),[[K,t(v)]])]),_:1})],2)):I("",!0)}}),ma=s=>(be("data-v-2c4971bc"),s=s(),ye(),s),va={class:"text-center mb-6"},pa={class:"d-flex align-center justify-center mb-4"},fa={class:"text-h5 font-weight-bold text-white mb-2"},ga={class:"text-body-1 text-grey-400 mb-0"},ha={class:"progress-section mb-6"},_a={class:"d-flex justify-space-between align-center mb-3"},ba=ma(()=>n("span",{class:"text-body-2 font-weight-medium text-grey-300"}," Progreso ",-1)),ya={class:"d-flex align-center"},ka={class:"text-h6 font-weight-bold text-primary mr-2"},wa={class:"steps-section mb-6"},Pa={key:0,class:"tips-section mb-6"},Ca={class:"d-flex align-center"},xa={class:"text-body-2 text-grey-300 tip-text"},Va={class:"actions-section d-flex justify-space-between align-center"},Sa={class:"d-flex gap-2"},$a=j({__name:"LoadingV2Enhanced",props:{progress:{type:Number,default:0,validator:s=>s>=0&&s<=100},isLoading:{type:Boolean,default:!0},title:{type:String,default:"Procesando"},subtitle:{type:String,default:"Por favor espera mientras completamos la operaciÃ³n"},showTips:{type:Boolean,default:!0},showMultipleButton:{type:Boolean,default:!1},totalProcesses:{type:Number,default:2},tips:{type:Array,default:()=>["ðŸ’¡ Puedes cargar mÃºltiples archivos simultÃ¡neamente","ðŸš€ El proceso continuarÃ¡ ejecutÃ¡ndose en segundo plano","âš¡ RecibirÃ¡s una notificaciÃ³n cuando termine","ðŸŽ¨ Puedes cambiar entre modo claro y oscuro","ðŸ”§ El progreso se guarda automÃ¡ticamente"]},steps:{type:Array,default:()=>["Validando archivo Excel","Procesando estructura de datos","Importando registros de estudiantes","Guardando notas en base de datos","Finalizando importaciÃ³n"]}},emits:["minimized","restored","completed","show-multiple"],setup(s,{expose:u,emit:e}){const i=s,m=e,f=N(0),_=N(0),c=N(!1);let v=null;const x=()=>{c.value=!0,m("minimized")},l=()=>{c.value=!1,m("restored")},r=z(()=>{const g=Math.max(0,Math.min(100,i.progress));return g>=100&&m("completed"),g}),w=z(()=>{const g=r.value;return g>=100?"ðŸŽ‰ Â¡Proceso completado con Ã©xito!":g>=90?"ðŸ” Realizando verificaciones finales...":g>=80?"ðŸ“¤ Guardando resultados en el sistema...":g>=70?"âš™ï¸ Optimizando datos procesados...":g>=60?"ðŸ“Š Procesando informaciÃ³n recolectada...":g>=50?"ðŸ“¦ Organizando datos intermedios...":g>=40?"ðŸ”„ Cargando mÃ³dulos secundarios...":g>=30?"ðŸš€ Proceso en marcha, avanzando...":g>=20?"âš¡ Preparando componentes principales...":g>=10?"ðŸ”Œ Conectando con los servicios...":g>=0?"â³ Inicializando sistema...":i.title||"Preparando carga..."}),C=z(()=>{const g=r.value;return g>=100?"Todo estÃ¡ listo para usar":g>=80?"Aplicando configuraciones finales":g>=60?"Organizando la informaciÃ³n":g>=40?"Descargando componentes necesarios":g>=0?"Preparando el sistema":i.subtitle}),A=z(()=>{const g=r.value;return g>=100?"tabler-checks":g>=80?"tabler-circle-check":g>=60?"tabler-database":g>=40?"tabler-settings":g>=20?"tabler-rotate-2":"tabler-rotate-clockwise-2"}),h=z(()=>i.tips[f.value]||""),S=z(()=>i.steps);W(()=>i.progress,g=>{const G=Math.floor(g/100*i.steps.length);_.value=Math.min(G,i.steps.length-1)});const p=g=>g<_.value?"tabler-circle-check-filled":g===_.value&&r.value<100?"tabler-loader-2":g===_.value&&r.value>=100?"tabler-circle-check-filled":"tabler-circle",P=g=>g<_.value?"success":g===_.value?r.value>=100?"success":"primary":"grey-600",y=g=>g<_.value?"text-success font-weight-medium":g===_.value?r.value>=100?"text-success font-weight-medium":"text-primary font-weight-medium":"text-grey-500",M=()=>{i.showTips&&i.tips.length>1&&(v=setInterval(()=>{f.value=(f.value+1)%i.tips.length},5e3))},V=()=>{v&&(clearInterval(v),v=null)};return de(()=>{M()}),Ze(()=>{V()}),W(()=>i.isLoading,g=>{g?M():V()}),u({minimize:x,restore:l,isMinimized:c}),(g,G)=>!c.value&&s.isLoading?(d(),k(Pe,{key:0,"model-value":s.isLoading,class:"loading-overlay d-flex align-center justify-center",persistent:!0,opacity:.98,"z-index":9999},{default:o(()=>[a(H,{class:"loading-card",elevation:"0",rounded:"xl","min-width":"420",width:"90%","max-width":"500"},{default:o(()=>[a(se,{class:"pa-8"},{default:o(()=>[n("div",va,[n("div",pa,[a($e,{size:"72",class:"loading-avatar",color:r.value>=100?"success":"primary"},{default:o(()=>[a($,{size:r.value>=100?"32":"28",icon:A.value,color:"white",class:U(r.value<100?"spin-animation":"")},null,8,["size","icon","class"])]),_:1},8,["color"])]),n("h2",fa,b(w.value),1),n("p",ga,b(C.value),1)]),n("div",ha,[n("div",_a,[ba,n("div",ya,[n("span",ka,b(Math.round(r.value))+"% ",1),r.value>=100?(d(),k($,{key:0,icon:"tabler-eye",size:"16",color:"grey-400"})):I("",!0)])]),a(pe,{"model-value":r.value,height:"6",rounded:"",color:"primary","bg-color":"grey-800",class:"loading-progress"},null,8,["model-value"])]),n("div",wa,[a(H,{class:"steps-card pa-4",color:"grey-900",variant:"elevated",elevation:"2",rounded:"lg"},{default:o(()=>[(d(!0),R(ee,null,ue(S.value,(B,q)=>(d(),R("div",{key:q,class:U(["step-item d-flex align-center mb-3",{"mb-0":q===S.value.length-1}])},[a($,{icon:p(q),color:P(q),size:"20",class:U(["step-icon mr-3",{"spin-animation":q===_.value&&r.value<100}])},null,8,["icon","color","class"]),n("span",{class:U(["text-body-2",y(q)])},b(B),3)],2))),128))]),_:1})]),s.showTips?(d(),R("div",Pa,[a(H,{class:"tip-card pa-3",color:"grey-800",variant:"flat",rounded:"lg"},{default:o(()=>[n("div",Ca,[a($,{icon:"tabler-bulb",color:"warning",size:"20",class:"mr-3"}),n("span",xa,b(h.value),1)])]),_:1})])):I("",!0),n("div",Va,[a(F,{variant:"elevated",color:"info",class:"text-none",onClick:x},{default:o(()=>[a($,{start:"",icon:"tabler-minimize",size:"18"}),T(" Minimizar ")]),_:1}),n("div",Sa,[s.showMultipleButton?(d(),k(F,{key:0,variant:"elevated",color:"warning",class:"text-none",onClick:G[0]||(G[0]=B=>g.$emit("show-multiple"))},{default:o(()=>[a($,{start:"",icon:"tabler-stack-2",size:"18"}),T(" Ver todos ("+b(s.totalProcesses||2)+") ",1)]),_:1})):I("",!0)])])]),_:1})]),_:1})]),_:1},8,["model-value"])):I("",!0)}}),Na=ne($a,[["__scopeId","data-v-2c4971bc"]]),Ia=j({__name:"ModalListErrors",emits:["execute"],setup(s,{expose:u,emit:e}){const i=N("Listado de errores"),m=N(!1),f=()=>{m.value=!m.value};et({csv:!1,excel:!1}),oe();const _=N(),c=N({url:"/processBatch/errorsPaginate",headers:[{key:"error_type",title:"Tipo de error"},{key:"column_name",title:"Columna"},{key:"row_number",title:"Fila"},{key:"error_value",title:"Valor"},{key:"error_message",title:"Mensaje de error"}],paramsGlobal:{batch_id:""}}),v=N({filterLabels:{inputGeneral:"Buscar en todo"}}),x=N(!1),l=N(!0),r=C=>{_.value&&(l.value&&C?_.value.fetchTableData(null,!1,!0,C):_.value.fetchTableData(null,!1,!0))};return u({openModal:async C=>{f(),c.value.paramsGlobal.batch_id=C}}),(C,A)=>{const h=Qt,S=Yt,p=Kt;return d(),R("div",null,[a(Ye,{modelValue:t(m),"onUpdate:modelValue":A[1]||(A[1]=P=>tt(m)?m.value=P:null),"max-width":"70rem",transition:"dialog-transition",persistent:""},{default:o(()=>[a(h,{onClick:f}),a(H,{class:"w-100"},{default:o(()=>[n("div",null,[a(Jt,{color:"primary"},{default:o(()=>[a(Xt,null,{default:o(()=>[T(b(t(i)),1)]),_:1})]),_:1})]),a(se,null,{default:o(()=>[a(S,{"options-filter":t(v),onForceSearch:r,"table-loading":t(x),"disable-url-update":t(l)},null,8,["options-filter","table-loading","disable-url-update"])]),_:1}),a(se,null,{default:o(()=>[a(p,{ref_key:"refTableFull",ref:_,options:t(c),"onUpdate:loading":A[0]||(A[0]=P=>x.value=P),"disable-url-update":t(l)},null,8,["options","disable-url-update"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),ie=s=>(be("data-v-4a829f97"),s=s(),ye(),s),Ta={class:"d-flex align-center"},Ma=ie(()=>n("div",null,[n("h2",{class:"text-h5 font-weight-bold"},"Procesos de ImportaciÃ³n"),n("p",{class:"text-body-2 text-medium-emphasis mb-0"},"Gestiona tus importaciones activas y completadas")],-1)),La={class:"d-flex align-center gap-2"},za={class:"d-flex justify-space-between align-center mb-3"},Aa={class:"d-flex align-center"},Ra=ie(()=>n("span",{class:"text-h6 font-weight-medium"},"Progreso General",-1)),Ba={class:"text-h5 font-weight-bold text-primary"},Ea={class:"d-flex justify-space-between text-body-2 text-medium-emphasis"},Da={class:"d-flex align-center justify-space-between mb-3"},Oa={class:"d-flex align-center"},Ua={class:"text-h6 font-weight-bold"},Ga={class:"d-flex align-center mt-1"},qa={class:"text-right"},ja={class:"text-h5 font-weight-bold text-primary"},Fa={class:"text-caption text-medium-emphasis"},Ha={class:"mb-3"},Wa={class:"d-flex justify-space-between text-body-2 text-medium-emphasis"},Ya={key:0},Ka={key:0,class:"metadata-section"},Qa={class:"d-flex align-center"},Ja=ie(()=>n("div",{class:"text-caption text-medium-emphasis"},"Registros",-1)),Xa={class:"text-h6 font-weight-bold"},Za={class:"d-flex align-center"},es=ie(()=>n("div",{class:"text-caption text-medium-emphasis"},"Hojas",-1)),ts={class:"text-h6 font-weight-bold"},as={class:"d-flex align-center"},ss=ie(()=>n("div",{class:"text-caption text-medium-emphasis"},"Errores",-1)),os={class:"text-h6 font-weight-bold"},ns={class:"d-flex align-center"},is=ie(()=>n("div",{class:"text-caption text-medium-emphasis"},"Tiempo Rest.",-1)),ls={class:"text-h6 font-weight-bold"},rs={class:"d-flex justify-end mt-3"},cs=j({__name:"ProcessListModal",emits:["removeProcess","showDataProcess","clearCompleted","close"],setup(s,{emit:u}){const e=Ve(),i=u,m=z({get:()=>e.showProcessList.value,set:h=>{h||e.hideProcessListModal()}}),f=z(()=>e.allProcesses.value.length===0?0:e.allProcesses.value.reduce((S,p)=>S+p.progress,0)/e.allProcesses.value.length),_=()=>e.activeProcesses.value.length===0?"success":"primary",c=()=>i("clearCompleted"),v=h=>{switch(h){case"active":return"primary";case"completed":return"success";case"failed":return"error";case"completed_with_errors":return"warning";case"queued":return"warning";default:return"secondary"}},x=h=>{switch(h){case"active":return"tabler-loader-2";case"completed":return"tabler-circle-check-filled";case"failed":return"tabler-alert-circle";case"completed_with_errors":return"tabler-circle-minus";case"queued":return"tabler-clock";default:return"tabler-help-circle"}},l=h=>{switch(h.status){case"active":return"Procesando";case"completed":return"Completado";case"failed":return"Error";case"completed_with_errors":return"Completado con Errores";case"queued":return"En Cola";default:return"Desconocido"}},r=h=>{switch(h){case"connected":return"success";case"connecting":return"warning";case"reconnecting":return"info";case"polling":return"info";case"error":return"error";case"disconnected":return"secondary";default:return"secondary"}},w=h=>{switch(h){case"connected":return"tabler-wifi";case"connecting":return"tabler-loader";case"reconnecting":return"tabler-refresh";case"polling":return"tabler-cloud-download";case"error":return"tabler-wifi-off";case"disconnected":return"tabler-wifi-off";default:return"tabler-help-circle"}},C=h=>h?new Date(h).toLocaleTimeString():"N/A",A=h=>{if(!h||h===0)return"N/A";if(h<60)return`${h}s`;const S=Math.floor(h/60),p=h%60;return`${S}m ${p}s`};return(h,S)=>(d(),k(Ye,{modelValue:m.value,"onUpdate:modelValue":S[1]||(S[1]=p=>m.value=p),"max-width":"60rem",persistent:""},{default:o(()=>[a(H,{class:"process-list-card"},{default:o(()=>[a(qe,{class:"d-flex align-center justify-space-between pa-6 pb-4"},{default:o(()=>[n("div",Ta,[a($,{icon:"tabler-stack-2",class:"me-3",color:"primary",size:"28"}),Ma]),n("div",La,[a(ve,{color:_(),size:"large",variant:"elevated"},{default:o(()=>[a($,{start:"",icon:"tabler-files"}),T(" "+b(t(e).allProcesses.value.length)+" proceso"+b(t(e).allProcesses.value.length!==1?"s":""),1)]),_:1},8,["color"]),t(e).completedProcesses.value.length>0?(d(),k(F,{key:0,variant:"outlined",color:"warning",size:"small",onClick:c},{default:o(()=>[a($,{start:"",icon:"tabler-trash"}),T(" Limpiar ("+b(t(e).completedProcesses.value.length)+") ",1)]),_:1})):I("",!0)])]),_:1}),t(e).activeProcesses.value.length>0?(d(),k(se,{key:0,class:"px-6 py-0"},{default:o(()=>[a(H,{class:"overall-progress-card pa-4 mb-4",color:"grey-50",variant:"tonal"},{default:o(()=>[n("div",za,[n("div",Aa,[a($,{icon:"tabler-chart-line",color:"primary",class:"me-2"}),Ra]),n("span",Ba,b(Math.round(f.value))+"%",1)]),a(pe,{"model-value":f.value,height:"12",rounded:"",color:"primary",class:"mb-3"},null,8,["model-value"]),n("div",Ea,[n("span",null,b(t(e).completedProcesses.value.length)+" de "+b(t(e).allProcesses.value.length)+" procesos completados",1),n("span",null,b(t(e).activeProcesses.value.length)+" activo"+b(t(e).activeProcesses.value.length!==1?"s":""),1)])]),_:1})]),_:1})):I("",!0),a(se,{class:"pa-4"},{default:o(()=>[a(je,{class:"process-list"},{default:o(()=>[(d(!0),R(ee,null,ue(t(e).sortedProcesses.value,p=>(d(),k(Fe,{key:p.batch_id,class:U(["process-item pa-4 ma-2 rounded-lg",{"active-process":p.status==="active","queued-process":p.status==="queued","completed-process":p.status==="completed","error-process":p.status==="failed","completed-with-errors-process":p.status==="completed_with_errors"}])},{default:o(()=>{var P,y,M,V;return[n("div",Da,[n("div",Oa,[a($e,{color:v(p.status),size:"48",class:"me-3"},{default:o(()=>[a($,{icon:x(p.status),color:"white",size:"24",class:U(p.status==="active"?"spin-animation":"")},null,8,["icon","class"])]),_:2},1032,["color"]),n("div",null,[n("h3",Ua,b((P=p.metadata)==null?void 0:P.file_name),1),n("div",Ga,[a(ve,{color:v(p.status),size:"small",class:"me-2"},{default:o(()=>[T(b(l(p)),1)]),_:2},1032,["color"]),(y=p.metadata)!=null&&y.connection_status?(d(),k(ve,{key:0,color:r(p.metadata.connection_status),size:"small",variant:"outlined"},{default:o(()=>[a($,{start:"",icon:w(p.metadata.connection_status),size:"14"},null,8,["icon"]),T(" "+b(p.metadata.connection_status==="polling"?"Sincronizando":p.metadata.connection_status),1)]),_:2},1032,["color"])):I("",!0)])])]),n("div",qa,[n("div",ja,b(Math.round(p.progress))+"%",1),n("div",Fa,b(C(p.started_at)),1)])]),n("div",Ha,[a(pe,{"model-value":p.progress,height:"8",rounded:"",color:v(p.status),class:"mb-2"},null,8,["model-value","color"]),n("div",Wa,[n("span",null,b(p.current_action),1),(M=p.metadata)!=null&&M.processing_speed?(d(),R("span",Ya,b(p.metadata.processing_speed)+" reg/s ",1)):I("",!0)])]),p.metadata?(d(),R("div",Ka,[a(Zt,{class:"metadata-grid"},{default:o(()=>[a(me,{cols:"12",sm:"6",md:"3"},{default:o(()=>[a(H,{class:"metadata-card pa-3",variant:"tonal",color:"info"},{default:o(()=>[n("div",Qa,[a($,{icon:"tabler-database",color:"info",class:"me-2"}),n("div",null,[Ja,n("div",Xa,b(p.metadata.processed_records||0)+" / "+b(p.metadata.total_records||0),1)])])]),_:2},1024)]),_:2},1024),a(me,{cols:"12",sm:"6",md:"3"},{default:o(()=>[a(H,{class:"metadata-card pa-3",variant:"tonal",color:"success"},{default:o(()=>[n("div",Za,[a($,{icon:"tabler-file-spreadsheet",color:"success",class:"me-2"}),n("div",null,[es,n("div",ts,b(p.metadata.current_sheet||1)+" / "+b(p.metadata.total_sheets||1),1)])])]),_:2},1024)]),_:2},1024),a(me,{cols:"12",sm:"6",md:"3"},{default:o(()=>[a(H,{class:"metadata-card pa-3",variant:"tonal",color:(p.metadata.errors_count||0)>0?"error":"grey"},{default:o(()=>[n("div",as,[a($,{icon:(p.metadata.errors_count||0)>0?"tabler-alert-circle":"tabler-check-circle",color:(p.metadata.errors_count||0)>0?"error":"success",class:"me-2"},null,8,["icon","color"]),n("div",null,[ss,n("div",os,b(p.metadata.errors_count||0),1)])])]),_:2},1032,["color"])]),_:2},1024),a(me,{cols:"12",sm:"6",md:"3"},{default:o(()=>[a(H,{class:"metadata-card pa-3",variant:"tonal",color:"warning"},{default:o(()=>[n("div",ns,[a($,{icon:"tabler-clock",color:"warning",class:"me-2"}),n("div",null,[is,n("div",ls,b(A(p.metadata.estimated_time_remaining)),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024)])):I("",!0),n("div",rs,[(p.status==="completed"||p.status==="failed"||p.status==="completed_with_errors")&&((V=p.metadata)==null?void 0:V.errors_count)>0?(d(),k(F,{key:0,icon:"",size:"small",variant:"text",color:"warning",onClick:ae(g=>h.$emit("showDataProcess",p.batch_id),["stop"])},{default:o(()=>[a($,{icon:"tabler-eye"}),a(fe,{activator:"parent",location:"top"},{default:o(()=>[T("Visualizar errores")]),_:1})]),_:2},1032,["onClick"])):I("",!0),p.status==="completed"||p.status==="failed"||p.status==="completed_with_errors"?(d(),k(F,{key:1,icon:"",size:"small",variant:"text",color:"error",onClick:ae(g=>h.$emit("removeProcess",p.batch_id),["stop"])},{default:o(()=>[a($,{icon:"tabler-trash"}),a(fe,{activator:"parent",location:"top"},{default:o(()=>[T("Eliminar proceso")]),_:1})]),_:2},1032,["onClick"])):I("",!0)])]}),_:2},1032,["class"]))),128))]),_:1})]),_:1}),a(Dt,{class:"pa-6 pt-4"},{default:o(()=>[a(Ne),a(F,{variant:"elevated",color:"primary",onClick:S[0]||(S[0]=p=>h.$emit("close"))},{default:o(()=>[a($,{start:"",icon:"tabler-x"}),T(" Cerrar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),us=ne(cs,[["__scopeId","data-v-4a829f97"]]);function ds(s){const u=te(s);let e=-1;function i(){clearInterval(e)}function m(){i(),Ce(()=>u.value=s)}function f(_){const c=_?getComputedStyle(_):{transitionDuration:.2},v=parseFloat(c.transitionDuration)*1e3||200;if(i(),u.value<=0)return;const x=performance.now();e=window.setInterval(()=>{const l=performance.now()-x+v;u.value=Math.max(s-l,0),u.value<=0&&i()},v)}return bt(i),{clear:i,time:u,start:f,reset:m}}const ms=Ue({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ht({location:"bottom"}),...gt(),...ft(),...pt(),...vt(),...mt(_t({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Me=Oe()({name:"VSnackbar",props:ms(),emits:{"update:modelValue":s=>!0},setup(s,u){let{slots:e}=u;const i=at(s,"modelValue"),{positionClasses:m}=st(s),{scopeId:f}=ot(),{themeClasses:_}=nt(s),{colorClasses:c,colorStyles:v,variantClasses:x}=it(s),{roundedClasses:l}=lt(s),r=ds(Number(s.timeout)),w=N(),C=N(),A=te(!1),h=te(0),S=N(),p=Ee(rt,void 0);ct(()=>!!p,()=>{const D=yt();kt(()=>{S.value=D.mainStyles.value})}),W(i,y),W(()=>s.timeout,y),de(()=>{i.value&&y()});let P=-1;function y(){r.reset(),window.clearTimeout(P);const D=Number(s.timeout);if(!i.value||D===-1)return;const J=ut(C.value);r.start(J),P=window.setTimeout(()=>{i.value=!1},D)}function M(){r.reset(),window.clearTimeout(P)}function V(){A.value=!0,M()}function g(){A.value=!1,y()}function G(D){h.value=D.touches[0].clientY}function B(D){Math.abs(h.value-D.changedTouches[0].clientY)>50&&(i.value=!1)}const q=z(()=>s.location.split(" ").reduce((D,J)=>(D[`v-snackbar--${J}`]=!0,D),{}));return Se(()=>{const D=Pe.filterProps(s),J=!!(e.default||e.text||s.text);return a(Pe,E({ref:w,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":s.multiLine&&!s.vertical,"v-snackbar--timer":!!s.timer,"v-snackbar--vertical":s.vertical},q.value,m.value,s.class],style:[S.value,s.style]},D,{modelValue:i.value,"onUpdate:modelValue":X=>i.value=X,contentProps:E({class:["v-snackbar__wrapper",_.value,c.value,l.value,x.value],style:[v.value],onPointerenter:V,onPointerleave:g},D.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:G,onTouchend:B},f),{default:()=>{var X,le;return[wt(!1,"v-snackbar"),s.timer&&!A.value&&a("div",{key:"timer",class:"v-snackbar__timer"},[a(pe,{ref:C,color:typeof s.timer=="string"?s.timer:"info",max:s.timeout,"model-value":r.time.value},null)]),J&&a("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((X=e.text)==null?void 0:X.call(e))??s.text,(le=e.default)==null?void 0:le.call(e)]),e.actions&&a(Pt,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[a("div",{class:"v-snackbar__actions"},[e.actions({isActive:i})])]})]},activator:e.activator})}),dt({},w)}}),vs=s=>(be("data-v-a22d557f"),s=s(),ye(),s),ps={key:1,class:"minimized-overlay"},fs={class:"minimized-info ms-3"},gs={class:"text-caption font-weight-medium"},hs={class:"text-caption text-medium-emphasis"},_s={class:"d-flex align-center"},bs=vs(()=>n("div",null,[n("div",{class:"font-weight-bold"},"ImportaciÃ³n Iniciada"),n("div",{class:"text-caption"},"El proceso continÃºa en segundo plano.")],-1)),ys=j({__name:"GlobalLoadingManager",setup(s){const u=oe(),e=Ve(),i=N(!1),m=N(!1),f=N(),_=P=>{f.value.openModal(P)},c=z(()=>{const P=e.currentProcess.value,y=e.currentProgress.value;return P?y>=100&&P.status==="completed"?"Â¡ImportaciÃ³n Completada!":y===0?"Procesando importaciÃ³n":P.current_action||"Procesando importaciÃ³n":"Sin proceso activo"}),v=z(()=>{const P=e.currentProcess.value,y=e.currentProgress.value;if(!P)return"Sin proceso activo";if(y>=100&&P.status==="completed")return"Â¡El archivo se ha procesado exitosamente!";if(y===0)return"Iniciando proceso de importaciÃ³n...";let M=`${Math.round(y)}% completado - ${P.current_element}`;return e.queuedProcesses.value.length>0&&(M+=` â€¢ ${e.queuedProcesses.value.length} en cola`),M}),x=()=>{},l=()=>{e.minimize()},r=()=>{e.restore(),m.value=!1},w=()=>{e.showProcessListModal()},C=P=>{e.removeProcess(P)},A=P=>{_(P)},h=()=>{e.clearCompletedProcesses()},S=()=>{e.hideProcessListModal()},p=()=>{var P;e.onStarted(y=>{m.value=!0}),e.onCompleted(y=>{var M;(((M=e.currentProcess.value)==null?void 0:M.batch_id)===y||e.isMinimized.value)&&(i.value=!0)}),e.onError((y,M)=>{console.error(`âŒ [MANAGER] Error en batch ${y}:`,M)}),e.onProgressUpdated((y,M)=>{}),(P=u.user)!=null&&P.id?e.getUserProcesses(u.user.id):W(()=>{var y;return(y=u.user)==null?void 0:y.id},y=>{y&&e.getUserProcesses(y)},{immediate:!0})};return de(()=>{p()}),Ct(()=>{e.cleanup()}),(P,y)=>(d(),R(ee,null,[t(e).isLoading.value&&t(e).currentProcess.value&&!t(e).isMinimized.value&&!t(e).showProcessList.value?(d(),k(Na,{key:0,"is-loading":!0,progress:t(e).currentProgress.value,title:c.value,subtitle:v.value,onMinimized:l,onCompleted:x,"show-multiple-button":t(e).hasMultipleProcesses.value,onShowMultiple:w,"debug-data":t(e).debugInfo.value},null,8,["progress","title","subtitle","show-multiple-button","debug-data"])):t(e).isLoading.value&&t(e).currentProcess.value&&t(e).isMinimized.value?(d(),R("div",ps,[a(H,{class:"minimized-card",onClick:r},{default:o(()=>[a(ge,{"model-value":t(e).currentProgress.value,color:"primary",size:"40",width:"3"},{default:o(()=>[T(b(Math.round(t(e).currentProgress.value))+"% ",1)]),_:1},8,["model-value"]),n("div",fs,[n("div",gs,b(t(e).activeProcesses.value.length)+" activo"+b(t(e).activeProcesses.value.length!==1?"s":"")+" "+b(t(e).queuedProcesses.value.length>0?`, ${t(e).queuedProcesses.value.length} en cola`:""),1),n("div",hs,b(Math.round(t(e).currentProgress.value))+"% completado ",1)]),a(F,{icon:"",size:"small",variant:"text",onClick:ae(w,["stop"]),class:"ms-2"},{default:o(()=>[a($,{icon:"tabler-list"})]),_:1}),a($,{class:"minimize-icon ms-2",icon:"tabler-chevron-up",onClick:ae(r,["stop"])})]),_:1})])):I("",!0),t(e).showProcessList.value?(d(),k(us,{key:2,onRemoveProcess:C,onClearCompleted:h,onClose:S,onShowDataProcess:A})):I("",!0),a(Ia,{ref_key:"refModalListErrors",ref:f},null,512),a(Me,{modelValue:m.value,"onUpdate:modelValue":y[1]||(y[1]=M=>m.value=M),timeout:4e3,color:"info",location:"top right",variant:"tonal"},{actions:o(()=>[a(F,{variant:"text",size:"small",onClick:r},{default:o(()=>[T("Ver")]),_:1}),a(F,{icon:"tabler-x",variant:"text",size:"small",onClick:y[0]||(y[0]=M=>m.value=!1)})]),default:o(()=>[n("div",_s,[a($,{start:"",icon:"tabler-loader-2",class:"spin-animation me-2"}),bs])]),_:1},8,["modelValue"]),a(Me,{modelValue:i.value,"onUpdate:modelValue":y[3]||(y[3]=M=>i.value=M),timeout:5e3,color:"success",location:"top"},{actions:o(()=>[a(F,{variant:"text",onClick:y[2]||(y[2]=M=>i.value=!1)},{default:o(()=>[T(" Cerrar ")]),_:1})]),default:o(()=>[a($,{start:"",icon:"tabler-check"}),T(" Â¡ImportaciÃ³n completada exitosamente! ")]),_:1},8,["modelValue"])],64))}}),ks=ne(ys,[["__scopeId","data-v-a22d557f"]]),ws={class:"layout-content-wrapper"},Ps={class:"navbar-content-container"},Cs={class:"layout-page-content"},xs={class:"page-content-container"},Vs=j({__name:"VerticalNavLayout",props:{navItems:{},verticalNavAttrs:{default:()=>({})}},setup(s){const u=oe(),{company:e,user:i}=he(u),m=s,{width:f}=xt(),_=ce(),c=N(!1),v=N(!1),x=Vt(c);St(c,v),W(f,()=>{!_.isLessThanOverlayNavBreakpoint&&v.value&&(v.value=!1)});const l=z(()=>{const r=$t(m,"verticalNavAttrs"),{wrapper:w,wrapperProps:C,...A}=r.value;return{verticalNavWrapper:w,verticalNavWrapperProps:C,additionalVerticalNavAttrs:A}});return(r,w)=>{const C=ks;return d(),R("div",{class:U(["layout-wrapper",t(_)._layoutClasses])},[(d(),k(O(t(l).verticalNavWrapper?t(l).verticalNavWrapper:"div"),E(t(l).verticalNavWrapperProps,{class:"vertical-nav-wrapper"}),{default:o(()=>[a(t(ca),E({"is-overlay-nav-active":t(c),"toggle-is-overlay-nav-active":t(x),"nav-items":m.navItems},{...t(l).additionalVerticalNavAttrs}),{"nav-header":o(()=>[Q(r.$slots,"vertical-nav-header")]),"before-nav-items":o(()=>[Q(r.$slots,"before-vertical-nav-items")]),_:3},16,["is-overlay-nav-active","toggle-is-overlay-nav-active","nav-items"])]),_:3},16)),n("div",ws,[n("header",{class:U(["layout-navbar",[{"navbar-blur":t(_).isNavbarBlurEnabled}]])},[n("div",Ps,[Q(r.$slots,"navbar",{toggleVerticalOverlayNavActive:t(x)})])],2),n("main",Cs,[n("div",xs,[Q(r.$slots,"default")])]),t(i).type_user!="student"?(d(),k(C,{key:0})):I("",!0)]),n("div",{class:U(["layout-overlay",[{visible:t(v)}]]),onClick:w[0]||(w[0]=()=>{v.value=!t(v)})},null,2)],2)}}}),Ke=j({__name:"VerticalNavLink",props:{item:{}},setup(s){const e=ce().isVerticalNavMini();return(i,m)=>t(We)(i.item.action,i.item.subject)?(d(),R("li",{key:0,class:U(["nav-link",{disabled:i.item.disable}])},[(d(),k(O(i.item.to?"RouterLink":"a"),E(t(It)(i.item),{class:{"router-link-active router-link-exact-active":t(Nt)(i.item,i.$router)}}),{default:o(()=>[(d(),k(O(t(L).app.iconRenderer||"div"),E(i.item.icon||t(L).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),a(De,{name:"transition-slide-x"},{default:o(()=>[Y((d(),k(O(t(L).app.i18n.enable?"i18n-t":"span"),E({key:"title",class:"nav-item-title"},t(re)(i.item.title,"span")),{default:o(()=>[T(b(i.item.title),1)]),_:1},16)),[[K,!t(e)]]),i.item.badgeContent?Y((d(),k(O(t(L).app.i18n.enable?"i18n-t":"span"),E({key:"badge",class:["nav-item-badge",i.item.badgeClass]},t(re)(i.item.badgeContent,"span")),{default:o(()=>[T(b(i.item.badgeContent),1)]),_:1},16,["class"])),[[K,!t(e)]]):I("",!0)]),_:1})]),_:1},16,["class"]))],2)):I("",!0)}}),Ss={key:0,class:"nav-section-title"},$s={class:"title-wrapper"},Ns=j({__name:"VerticalNavSectionTitle",props:{item:{}},setup(s){const e=ce().isVerticalNavMini();return(i,m)=>t(We)(i.item.action,i.item.subject)?(d(),R("li",Ss,[n("div",$s,[a(xe,{name:"vertical-nav-section-title",mode:"out-in"},{default:o(()=>[(d(),k(O(t(e)?t(L).app.iconRenderer:t(L).app.i18n.enable?"i18n-t":"span"),E({key:t(e),class:t(e)?"placeholder-icon":"title-text"},{...t(L).icons.sectionTitlePlaceholder,...t(re)(i.item.heading,"span")}),{default:o(()=>[T(b(t(e)?null:i.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):I("",!0)}}),Is=Ue({color:String,direction:{type:String,default:"vertical",validator:s=>["vertical","horizontal"].includes(s)},side:{type:String,default:"end",validator:s=>["start","end","both"].includes(s)},mode:{type:String,default:"intersect",validator:s=>["intersect","manual"].includes(s)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...At(),...zt()},"VInfiniteScroll"),Le=Rt({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootRef:null,rootMargin:String},emits:{intersect:(s,u)=>!0},setup(s,u){let{emit:e}=u;const{intersectionRef:i,isIntersecting:m}=Bt(f=>{},s.rootMargin?{rootMargin:s.rootMargin}:void 0);return W(m,async f=>{e("intersect",s.side,f)}),Se(()=>a("div",{class:"v-infinite-scroll-intersect",ref:i},[T("Â ")])),{}}}),Ts=Oe()({name:"VInfiniteScroll",props:Is(),emits:{load:s=>!0},setup(s,u){let{slots:e,emit:i}=u;const m=N(),f=te("ok"),_=te("ok"),c=z(()=>Tt(s.margin)),v=te(!1);function x(V){if(!m.value)return;const g=s.direction==="vertical"?"scrollTop":"scrollLeft";m.value[g]=V}function l(){if(!m.value)return 0;const V=s.direction==="vertical"?"scrollTop":"scrollLeft";return m.value[V]}function r(){if(!m.value)return 0;const V=s.direction==="vertical"?"scrollHeight":"scrollWidth";return m.value[V]}function w(){if(!m.value)return 0;const V=s.direction==="vertical"?"clientHeight":"clientWidth";return m.value[V]}de(()=>{m.value&&(s.side==="start"?x(r()):s.side==="both"&&x(r()/2-w()/2))});function C(V,g){V==="start"?f.value=g:V==="end"&&(_.value=g)}function A(V){return V==="start"?f.value:_.value}let h=0;function S(V,g){v.value=g,v.value&&p(V)}function p(V){if(s.mode!=="manual"&&!v.value)return;const g=A(V);if(!m.value||["empty","loading"].includes(g))return;h=r(),C(V,"loading");function G(B){C(V,B),Ce(()=>{B==="empty"||B==="error"||(B==="ok"&&V==="start"&&x(r()-h+l()),s.mode!=="manual"&&Ce(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{p(V)})})})}))})}i("load",{side:V,done:G})}const{t:P}=Mt();function y(V,g){var q,D,J,X,le;if(s.side!==V&&s.side!=="both")return;const G=()=>p(V),B={side:V,props:{onClick:G,color:s.color}};return g==="error"?(q=e.error)==null?void 0:q.call(e,B):g==="empty"?((D=e.empty)==null?void 0:D.call(e,B))??a("div",null,[P(s.emptyText)]):s.mode==="manual"?g==="loading"?((J=e.loading)==null?void 0:J.call(e,B))??a(ge,{indeterminate:!0,color:s.color},null):((X=e["load-more"])==null?void 0:X.call(e,B))??a(F,{variant:"outlined",color:s.color,onClick:G},{default:()=>[P(s.loadMoreText)]}):((le=e.loading)==null?void 0:le.call(e,B))??a(ge,{indeterminate:!0,color:s.color},null)}const{dimensionStyles:M}=Lt(s);Se(()=>{const V=s.tag,g=s.side==="start"||s.side==="both",G=s.side==="end"||s.side==="both",B=s.mode==="intersect";return a(V,{ref:m,class:["v-infinite-scroll",`v-infinite-scroll--${s.direction}`,{"v-infinite-scroll--start":g,"v-infinite-scroll--end":G}],style:M.value},{default:()=>{var q;return[a("div",{class:"v-infinite-scroll__side"},[y("start",f.value)]),m.value&&g&&B&&a(Le,{key:"start",side:"start",onIntersect:S,rootRef:m.value,rootMargin:c.value},null),(q=e.default)==null?void 0:q.call(e),m.value&&G&&B&&a(Le,{key:"end",side:"end",onIntersect:S,rootRef:m.value,rootMargin:c.value},null),a("div",{class:"v-infinite-scroll__side"},[y("end",_.value)])]}})})}}),Ms={class:"d-flex align-start gap-3"},Ls={key:2},zs={class:"text-sm font-weight-medium mb-1 text-wrap"},As={class:"text-body-2 mb-2 text-wrap",style:{"line-height":"1.4"}},Rs={class:"text-caption text-disabled mb-0"},Bs={class:"d-flex flex-column align-end"},Es={class:"d-flex justify-center pa-4"},Ds=n("div",{class:"text-center pa-2 text-caption text-disabled"},"No hay mÃ¡s notificaciones",-1),Os={key:1,class:"text-center pa-6 text-medium-emphasis"},Us=n("p",{class:"text-body-2 mb-0"},"Â¡No tienes notificaciones!",-1),Gs=j({__name:"NotificationsList",props:{notifications:{},badgeProps:{default:void 0},location:{default:"bottom end"},loading:{type:Boolean},unreadCount:{default:0},nextPageUrl:{}},emits:["read","unread","remove","click:notification","load-more","click:view-all"],setup(s,{emit:u}){const e=s,i=u,m=z(()=>e.notifications.length>0&&e.notifications.every(c=>c.isSeen)),f=()=>{if(m.value){const c=e.notifications.map(v=>v.id);c.length&&i("unread",c)}else{const c=e.notifications.filter(v=>!v.isSeen).map(v=>v.id);c.length&&i("read",c)}},_=(c,v)=>{c?i("unread",[v]):i("read",[v])};return(c,v)=>{const x=_e("IconBtn");return d(),k(x,{id:"notification-btn"},{default:o(()=>[a(Ge,E({dot:""},e.badgeProps,{"model-value":e.unreadCount>0,content:e.unreadCount,color:"error","offset-x":"2","offset-y":"3"}),{default:o(()=>[a($,{icon:"tabler-bell"})]),_:1},16,["model-value","content"]),a(Ut,{activator:"parent",width:"380px",location:e.location,offset:"12px","close-on-content-click":!1},{default:o(()=>[a(H,{class:"d-flex flex-column"},{default:o(()=>[a(Ot,{class:"notification-section"},{append:o(()=>[e.unreadCount>0?(d(),k(ve,{key:0,size:"small",color:"primary",class:"me-2"},{default:o(()=>[T(b(e.unreadCount)+" Nueva(s) ",1)]),_:1})):I("",!0),Y(a(x,{size:"34",onClick:f},{default:o(()=>[a($,{size:"20",color:"high-emphasis",icon:m.value?"tabler-mail-opened":"tabler-mail"},null,8,["icon"]),a(fe,{activator:"parent",location:"start"},{default:o(()=>[T(b(m.value?"Marcar todo como no leÃ­do":"Marcar todo como leÃ­do"),1)]),_:1})]),_:1},512),[[K,e.notifications.length]])]),default:o(()=>[a(qe,{class:"text-h6"},{default:o(()=>[T("Notificaciones")]),_:1})]),_:1}),a(we),a(je,{class:"notification-list rounded-0 py-0",style:{"max-height":"400px","overflow-y":"auto"}},{default:o(()=>[e.notifications.length?(d(),k(Ts,{key:0,mode:"manual",items:e.notifications,onLoad:v[0]||(v[0]=l=>c.$emit("load-more",l)),style:{"overflow-y":"hidden"}},{loading:o(()=>[n("div",Es,[a(ge,{indeterminate:"",color:"primary",size:"24"})])]),empty:o(()=>[Ds]),"load-more":o(({props:l})=>[a(F,E(l,{variant:"text",size:"small",block:"",loading:l.loading}),{default:o(()=>[T("Cargar mÃ¡s")]),_:2},1040,["loading"])]),default:o(()=>[(d(!0),R(ee,null,ue(e.notifications,(l,r)=>(d(),R(ee,{key:l.id},[r>0?(d(),k(we,{key:0})):I("",!0),a(Fe,{link:"",lines:"one","min-height":"66px",class:"list-item-hover-class",onClick:w=>c.$emit("click:notification",l)},{default:o(()=>[n("div",Ms,[a($e,{color:l.color&&!l.img?l.color:void 0,variant:l.img?void 0:"tonal"},{default:o(()=>[l.img?(d(),k(He,{key:0,src:("storageBack"in c?c.storageBack:t(ze))(l.img)},null,8,["src"])):l.icon?(d(),k($,{key:1,icon:l.icon},null,8,["icon"])):(d(),R("span",Ls,b(("avatarText"in c?c.avatarText:t(Qe))(l.title)),1))]),_:2},1032,["color","variant"]),n("div",null,[n("p",zs,b(l.title),1),n("p",As,b(l.subtitle),1),n("p",Rs,b(l.time),1)]),a(Ne),n("div",Bs,[a($,{size:"10",icon:"tabler-circle-filled",color:l.isSeen?"disabled":"primary",class:U([l.isSeen?"visible-in-hover":"","mb-2"]),title:"Marcar leÃ­do/no leÃ­do",onClick:ae(w=>_(l.isSeen,l.id),["stop"])},null,8,["color","class","onClick"]),l.isSeen?(d(),k($,{key:0,size:"18",icon:"tabler-x",class:"visible-in-hover text-medium-emphasis",title:"Eliminar",onClick:ae(w=>c.$emit("remove",l.id),["stop"])},null,8,["onClick"])):I("",!0)])])]),_:2},1032,["onClick"])],64))),128))]),_:1},8,["items"])):(d(),R("div",Os,[a($,{icon:"tabler-bell-off",size:"40",class:"mb-2 text-disabled"}),Us]))]),_:1}),a(we),a(se,{class:"pa-2 text-center"},{default:o(()=>[a(F,{variant:"text",size:"x-small",color:"primary",block:"",onClick:v[1]||(v[1]=l=>c.$emit("click:view-all"))},{default:o(()=>[T(" Ver todas ")]),_:1})]),_:1})]),_:1})]),_:1},8,["location"])]),_:1})}}}),qs=j({__name:"NavBarNotificationBell",setup(s){const u=Be(),e=Gt(),i=N(!1);de(async()=>{e.notifications.length===0&&(i.value=!0,await e.fetchNotifications(),i.value=!1),e.initializeListener()});const m=async({done:l})=>{if(!e.nextPageUrl){l("empty");return}try{await e.fetchNotifications(e.nextPageUrl),l("ok")}catch{l("error")}},f=()=>{u.push({name:"Notifications-Index"})},_=l=>e.remove(l),c=l=>e.markAsRead(l),v=async l=>{await Et("/notification/markMultipleAsUnread").post({notification_ids:l});const r=e.notifications.find(w=>w.id===l[0]);r&&(r.isSeen=!1,e.unreadCount++)},x=l=>{l.isSeen||e.markAsRead([l.id]),l.action_url};return(l,r)=>{const w=Gs;return d(),k(w,{notifications:t(e).notifications,unreadCount:t(e).unreadCount,loading:i.value,nextPageUrl:t(e).nextPageUrl,onRemove:_,onRead:c,onUnread:v,"onClick:notification":x,onLoadMore:m,"onClick:viewAll":f},null,8,["notifications","unreadCount","loading","nextPageUrl"])}}}),js={class:"text-capitalize"},Fs=j({__name:"BtnShowAllLoading",setup(s){const u=Ve(),e=z(()=>u.activeProcesses.value.length>0||u.queuedProcesses.value.length>0),i=z(()=>e.value?"tabler-blend-mode":u.completedProcesses.value.length>0?"tabler-history":"tabler-stack-3"),m=z(()=>u.activeProcesses.value.length>0?"rgb(var(--v-theme-primary))":u.queuedProcesses.value.length>0?"rgb(var(--v-theme-warning))":u.completedProcesses.value.length>0?"rgb(var(--v-theme-success))":"rgba(var(--v-theme-on-surface), var(--v-high-emphasis-opacity))"),f=z(()=>{const c=u.allProcesses.value.length,v=u.activeProcesses.value.length,x=u.queuedProcesses.value.length,l=u.completedProcesses.value.length;if(c===0)return"No hay procesos";let r=`Ver Todas (${c})`;return v>0&&(r+=` â€¢ ${v} activo${v!==1?"s":""}`),x>0&&(r+=` â€¢ ${x} en cola`),l>0&&(r+=` â€¢ ${l} completado${l!==1?"s":""}`),r});z(()=>u.allProcesses.value.length>0);const _=z(()=>{const c=["loading-icon"];return e.value&&c.push("spin-animation"),c.join(" ")});return(c,v)=>{const x=_e("IconBtn");return d(),R("div",null,[a(x,{color:m.value,onClick:v[0]||(v[0]=l=>t(u).showProcessListModal()),class:U(["loading-btn",{"loading-btn--animated":e.value,"loading-btn--active":t(u).activeProcesses.value.length>0,"loading-btn--queued":t(u).queuedProcesses.value.length>0,"loading-btn--completed":t(u).completedProcesses.value.length>0&&t(u).activeProcesses.value.length===0}])},{default:o(()=>[a(fe,{activator:"parent",location:"bottom"},{default:o(()=>[n("span",js,b(f.value),1)]),_:1}),a($,{icon:i.value,class:U(_.value),size:"20"},null,8,["icon","class"]),t(u).allProcesses.value.length>0?(d(),k(Ge,{key:0,content:t(u).allProcesses.value.length,color:t(u).activeProcesses.value.length>0?"primary":t(u).queuedProcesses.value.length>0?"warning":"success",class:U(["loading-badge",{"loading-badge--pulse":e.value}])},null,8,["content","color","class"])):I("",!0)]),_:1},8,["color","class"])])}}}),Hs=ne(Fs,[["__scopeId","data-v-8f9322c2"]]),{getMenuData:Ws}=he(oe()),Ys={class:"d-flex h-100 align-center"},qo=j({__name:"DefaultLayoutWithVerticalNav",setup(s){const u=oe(),{company:e,user:i}=he(u);return(m,f)=>{const _=_e("IconBtn"),c=Hs,v=qs;return d(),k(t(Vs),{"nav-items":t(Ws)},{navbar:o(({toggleVerticalOverlayNavActive:x})=>{var l;return[n("div",Ys,[a(_,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:r=>x(!0)},{default:o(()=>[a($,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),a(jt),a(Ne),t(i).type_user!="student"?(d(),k(c,{key:0})):I("",!0),t(ke).app.i18n.enable&&((l=t(ke).app.i18n.langConfig)!=null&&l.length)?(d(),k(Wt,{key:1,languages:t(ke).app.i18n.langConfig},null,8,["languages"])):I("",!0),a(v,{class:"me-1"}),a(Ft)])]}),footer:o(()=>[a(qt)]),default:o(()=>[Q(m.$slots,"default")]),_:3},8,["nav-items"])}}});export{qo as default};

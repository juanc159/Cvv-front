import{_ as $}from"./AppSelect.vue_vue_type_script_setup_true_lang-BC5XkvOm.js";import{_ as x}from"./AppTextField.vue_vue_type_script_setup_true_lang-B39xe8cM.js";import{d as A,Y as b,r as o,w as B,N as M,h as N,o as P,c1 as j,q,f as n,b as p,aJ as w,I as C,n as E,k as O}from"./index-BjO4aHmb.js";import{i as U}from"./helpers-BbbmGk_m.js";import{a as I,b as H}from"./VList-EH5Q84wI.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z=A({__name:"AppSelectRemote",props:{url:{type:String,required:!0},modelValue:{type:[Array,Object,String,Number],default:()=>[]},params:{type:[Object],default:()=>{}},multiple:{type:Boolean,default:!1},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},searchParam:{type:String,default:"searchQueryInfinite"},arrayInfo:{type:String,required:!0}},emits:["update:modelValue"],setup(i,{emit:T}){const r=i,S=T,y=b({get:()=>r.modelValue,set:t=>S("update:modelValue",t)}),u=o([]),a=o(""),d=o(1),s=o(!1),v=o(!0),m=o("");let _;const f=async(t=!1)=>{if(m.value="",!s.value){s.value=!0;try{t&&(d.value=1,u.value=[],v.value=!0);const{data:e}=await w(r.url).post({[r.searchParam]:a.value,page:d.value,...r.params}),c=r.arrayInfo+"_arrayInfo",g=r.arrayInfo+"_countLinks";e.value.data?(u.value=t?e.value.data:[...u.value,...e.value.data],v.value=e.value.current_page<e.value.last_page):(u.value=t?e.value[c]:[...u.value,...e.value[c]],v.value=e.value[g].length>1),d.value++}catch(e){m.value="Error al buscar datos."+e}finally{s.value=!1}}};B(a,t=>{clearTimeout(_),_=setTimeout(()=>f(!0),500)}),M(()=>{f()});const h=b(()=>s.value?"Buscando informaci√≥n...":m.value?m.value:U(a.value)?"Escribe algo para buscar...":`No se encontraron resultados para "<strong>${a.value}</strong>".`),L=()=>{a.value=""};return(t,e)=>{const c=x,g=$;return P(),N(g,{onBlur:L,returnObject:"",modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l),items:u.value,"item-title":i.itemTitle,"item-value":i.itemValue,multiple:i.multiple,search:a.value,loading:s.value,"onUpdate:search":e[3]||(e[3]=l=>a.value=l),clearable:""},j({"prepend-item":n(()=>[p(I,null,{default:n(()=>[p(c,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l),placeholder:"Teclee para buscar...",variant:"outlined",density:"compact","hide-details":"",clearable:"","onClick:clear":e[1]||(e[1]=l=>f(!0))},null,8,["modelValue"])]),_:1})]),"no-data":n(()=>[p(I,null,{default:n(()=>[p(H,{class:"text-center",innerHTML:h.value},null,8,["innerHTML"])]),_:1})]),_:2},[q(t.$slots,(l,V)=>({name:V,fn:n(k=>[C(t.$slots,V,E(O(k||{})),void 0,!0)])}))]),1032,["modelValue","items","item-title","item-value","multiple","search","loading"])}}}),K=R(z,[["__scopeId","data-v-e8e56f34"]]);export{K as _};

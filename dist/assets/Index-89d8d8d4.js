import{d as A,R as E,Q as R,r as x,ab as N,w as Q,aB as q,L,a as M,o as U,c as F,b as t,f as e,B as O,k as l,aC as j,e as i,a9 as C,a6 as m,C as _,ac as u,ae as h,O as G,P as H,q as J}from"./index-cfa8a22c.js";import{u as K}from"./useCrudCompanyStore-92bf7e6f.js";import{b as W,V as X}from"./VCard-63ab82ca.js";import{V as w}from"./VCardText-741574de.js";import{V as b}from"./VContainer-31665772.js";import{V as Y}from"./VSelect-9934eb6d.js";import{V as Z}from"./VSpacer-e41d9fee.js";import{V as tt}from"./VChip-26398a9e.js";import{V as at}from"./VRow-62005efb.js";import{V as et}from"./VPagination-2c307b37.js";import{V as ot}from"./VDataTable-ca55bffc.js";import"./VAvatar-35c3a62a.js";import"./VImg-d28801c8.js";/* empty css              */import"./VTextField-729a4146.js";import"./VField-d89d15f7.js";import"./VList-f8998f81.js";import"./ssrBoot-1b9e8071.js";import"./VDivider-59106c60.js";import"./dialog-transition-8bb7e5a0.js";import"./VMenu-671ca350.js";const st={class:"me-3",style:{"inline-size":"80px"}},nt={colspan:"4"},lt={style:{"inline-size":"100"},class:"d-flex justify-center"},rt={class:"text-sm text-disabled"},Tt=A({__name:"Index",setup(it){const p=K(),f=E(),v=J(),{currentPage:n,totalPage:y,lastPage:k,totalData:S,companies:d,loading:P}=R(p),z=[{title:"Nombre",key:"name"},{title:"Eslogan",key:"slogan"},{title:"Estado",key:"state"},{title:"Acciones",key:"actions"}],r=x(10),I=x(),T=N(()=>{const s=d.value.length?(n.value-1)*y.value+1:0,a=d.value.length+(n.value-1)*y.value;return`Mostrando ${s} a ${a} de ${S.value} registros`});Q(r,async()=>{n.value=1}),q([n,I,r],async()=>{await V()});const V=async(s=[])=>{await p.fetchAll({company_id:f.company.id,perPage:r.value,page:n.value,searchQuery:s})};L(async()=>{await V()});const B=async(s="create",a)=>{v.push({name:"Company-Form",params:{action:s,id:a}})},D=async(s,a)=>{const c=!s[a];(await p.changeState({id:s.id,value:c,field:a})).code==200&&(s.state=c)},$=s=>{f.company=s,v.push({name:"root"})};return(s,a)=>{const c=M("PreloadInterno");return U(),F("div",null,[t(X,null,{default:e(()=>[t(W,{"primary-title":""},{default:e(()=>a[2]||(a[2]=[O("Listado de compaÃ±ias")])),_:1}),t(w,null,{default:e(()=>[t(l(ot),{headers:z,items:l(d),"items-per-page":l(r)},j({top:e(()=>[t(b,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:e(()=>[i("div",st,[t(Y,{modelValue:l(r),"onUpdate:modelValue":a[0]||(a[0]=o=>C(r)?r.value=o:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(Z),a[3]||(a[3]=i("div",{class:"app-Company-search-filter d-flex align-center flex-wrap gap-4"},null,-1))]),_:1})]),"item.state":e(({item:o})=>[t(tt,{color:o.state==1?"success":"error",onClick:g=>D(o,"state")},{default:e(()=>[t(m,{start:"",size:"16",icon:o.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),i("span",null,_(o.state==1?"Activo":"Inactivo"),1),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":e(({item:o})=>[t(h,{icon:"",size:"x-small",color:"default",variant:"text",onClick:g=>B("edit",o.id)},{default:e(()=>[t(m,{size:"22",icon:"tabler-edit"}),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),G(t(h,{size:"x-small",color:"default",icon:"",variant:"text",onClick:g=>$(o)},{default:e(()=>[t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Ingresar"}),t(m,{size:"22",icon:"tabler-square-rounded-arrow-right"})]),_:2},1032,["onClick"]),[[H,o.state==1]])]),bottom:e(()=>[t(w,{class:"pt-2"},{default:e(()=>[t(at,null,{default:e(()=>[t(b,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:e(()=>[i("span",rt,_(l(T)),1),t(et,{modelValue:l(n),"onUpdate:modelValue":a[1]||(a[1]=o=>C(n)?n.value=o:null),size:"small","total-visible":5,length:l(k)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[l(P).table?{name:"body",fn:e(()=>[i("tr",null,[i("td",nt,[i("div",lt,[t(c)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]),_:1})]),_:1})])}}});export{Tt as default};

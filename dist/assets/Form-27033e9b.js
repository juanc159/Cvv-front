import{V as I,r as p}from"./VForm-95149a78.js";import{_ as A}from"./AppTextField.vue_vue_type_script_setup_true_lang-85b30cd8.js";import{_ as N}from"./AppSelect.vue_vue_type_script_setup_true_lang-2133480e.js";import{d as j,r as _,R as z,Q as D,L as E,ab as R,o as k,c as x,b as o,f as t,k as e,g as G,B as C,e as F,ae as K,p as P,ay as H,az as L,aA as M}from"./index-f784e2e5.js";import{u as Q}from"./useImageUpload-f0cfb422.js";import{u as J}from"./useCrudStudentStore-7a9ea203.js";import{V as O}from"./VCardText-84067ccb.js";import{V}from"./VRow-a27719bc.js";import{V as n}from"./VCol-b24f2e49.js";import{V as W}from"./VFileInput-ff5bd6f8.js";import{V as X}from"./VImg-c3c6e0bb.js";import{V as Y}from"./VCard-943ebea4.js";import"./helpers-53221d8d.js";import"./VField-77dd2a42.js";import"./VTextField-96433714.js";import"./VSelect-5d66f8cb.js";import"./VList-31a16285.js";import"./ssrBoot-7771cfeb.js";import"./VAvatar-83403294.js";import"./VDivider-a08e6f03.js";import"./dialog-transition-10246ca8.js";import"./VMenu-b7257285.js";import"./VChip-794e8e6a.js";import"./sweetalert2.esm.all-562d67d8.js";/* empty css              */const Z={style:{"block-size":"200px","inline-size":"200px"}},qe=j({__name:"Form",setup(h){const v=P(),{toast:S}=M(),g=_(),f=J(),q=z(),{form:r,loading:m,typeEducations:b,sections:w}=D(f),u=_({}),d=_(Q()),B=["jpg","jpeg","png"];d.value.allowedExtensions=B;const $=async()=>{var a,c;r.value.company_id=q.company.id;const l=await((a=g.value)==null?void 0:a.validate());if(l!=null&&l.valid){const s=await f.fetchSave();(s==null?void 0:s.code)===200&&(u.value={},d.value.clearData(),await((c=g.value)==null?void 0:c.resetValidation()),H.push({name:"Student-Index"})),(s==null?void 0:s.code)===422&&(u.value=s.errors??{})}else S("Faltan Campos Por Diligenciar","","danger")},T=l=>{m.value.form=!0,d.value.handleImageSelected(l),setTimeout(()=>{r.value.photo=d.value.imageFile,m.value.form=!1},1e3)};E(async()=>{f.clearForm(),await f.fetchDataForm(Number(v.params.id),v.params.action)});const U=R(()=>r.value.type_education_id?b.value.find(l=>l.value==r.value.type_education_id).grades:[]);return(l,a)=>{const c=L,s=N,y=A;return k(),x("div",null,[o(Y,{loading:e(m).form,disabled:e(m).form},{default:t(()=>[o(O,null,{default:t(()=>[o(V,null,{default:t(()=>[o(n,null,{default:t(()=>[o(c,{"sub-title":"Formulario Student",action:String(l.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:l.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),o(e(I),{ref_key:"formValidation",ref:g,"lazy-validation":""},{default:t(()=>[o(V,null,{default:t(()=>[o(n,{cols:"12",sm:"3"},{default:t(()=>[o(s,{items:e(b),clearable:"",rules:["requiredValidator"in l?l.requiredValidator:e(p)],modelValue:e(r).type_education_id,"onUpdate:modelValue":a[0]||(a[0]=i=>e(r).type_education_id=i),label:"Tipo de educación"},null,8,["items","rules","modelValue"])]),_:1}),o(n,{cols:"12",sm:"3"},{default:t(()=>[o(s,{clearable:"",items:e(U),rules:["requiredValidator"in l?l.requiredValidator:e(p)],modelValue:e(r).grade_id,"onUpdate:modelValue":a[1]||(a[1]=i=>e(r).grade_id=i),label:"Grados y niveles"},null,8,["items","rules","modelValue"])]),_:1}),o(n,{cols:"12",sm:"3"},{default:t(()=>[o(s,{clearable:"",items:e(w),rules:["requiredValidator"in l?l.requiredValidator:e(p)],modelValue:e(r).section_id,"onUpdate:modelValue":a[2]||(a[2]=i=>e(r).section_id=i),label:"Secciones"},null,8,["items","rules","modelValue"])]),_:1}),o(n,{cols:"12",sm:"3"},{default:t(()=>[o(y,{clearable:"",modelValue:e(r).identity_document,"onUpdate:modelValue":a[3]||(a[3]=i=>e(r).identity_document=i),rules:["requiredValidator"in l?l.requiredValidator:e(p)],"error-messages":e(u).identity_document,label:"Cédula de identidad",onKeypress:a[4]||(a[4]=i=>e(u).identity_document=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),o(n,{cols:"12",sm:"6"},{default:t(()=>[o(y,{clearable:"",modelValue:e(r).full_name,"onUpdate:modelValue":a[5]||(a[5]=i=>e(r).full_name=i),rules:["requiredValidator"in l?l.requiredValidator:e(p)],"error-messages":e(u).full_name,label:"Nombre completo",onKeypress:a[6]||(a[6]=i=>e(u).full_name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),o(n,{cols:"12",sm:"3"},{default:t(()=>[(k(),G(W,{accept:"image/*",key:e(d).key,onChange:a[7]||(a[7]=i=>T(i)),"onClick:clear":e(d).clearData},{label:t(()=>a[9]||(a[9]=[C(" Foto "),F("b",{class:"text-warning"},"*",-1)])),_:1},8,["onClick:clear"]))]),_:1})]),_:1}),o(V,null,{default:t(()=>[o(n,{cols:"12",class:"d-flex justify-center"},{default:t(()=>[F("div",Z,[o(X,{src:e(d).imageUrl??e(r).photo},null,8,["src"])])]),_:1})]),_:1})]),_:1},512),o(V,null,{default:t(()=>[o(n,{cols:"12",class:"d-flex justify-center"},{default:t(()=>[o(K,{loading:e(m).form,color:"primary",onClick:a[8]||(a[8]=i=>$())},{default:t(()=>a[10]||(a[10]=[C(" Guardar ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading","disabled"])])}}});export{qe as default};

import{s as F,b as S}from"./helpers-B_m2l3ye.js";import{a as $}from"./formatters-D7qh_Elz.js";import{_ as A}from"./ModalQuestion.vue_vue_type_script_setup_true_lang-COJL4HAh.js";import{_ as D}from"./TableFull.vue_vue_type_script_setup_true_lang-D61Bqt1R.js";import{d as N,U as P,r as p,ax as I,o as d,c as k,b as a,f as o,af as g,e as i,ad as v,C as b,k as m,E as M,g as Q,D as G,a8 as u,al as f}from"./index-DIyPu2n-.js";import{V as j,b as L}from"./VCard-B7mzswJk.js";import{V as O}from"./VGrid-BcXXTAEE.js";import{V as R}from"./VAvatar-CM2QcUUV.js";import{V as z}from"./VImg-BpKv5MOY.js";import{a as _}from"./VList-CMTaG0P-.js";import"./constants-2GBt7OCP.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-CR80wrXm.js";import"./VDialog-CZ35sKAN.js";import"./VOverlay-Ccbj0hdB.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-DtVn6ULP.js";import"./VInput-BwqZ5sdn.js";import"./VTooltip-DJp5BLXe.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-xnxF--Pg.js";import"./VSelect-BuS0nwkg.js";import"./VTextField-DQo78I90.js";import"./VMenu-BpruL3NV.js";import"./VCheckboxBtn-wG_U6moa.js";import"./VSelectionControl-DdNTnAZP.js";import"./VChip-DFTErpd2.js";import"./VDivider-CG8nLZlY.js";import"./VRow-CI_zrIUd.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-C0MivaU_.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VAlert-BIx2v0D_.js";import"./createUrl-Dy28hLgW.js";import"./index-0F-JFElI.js";import"./VCheckbox-IRgQgG3P.js";import"./VContainer-BblhRk3i.js";import"./VDataTable-DDygFyNj.js";import"./VSkeletonLoader-B7COZoZa.js";import"./ssrBoot-Bm2AJ9kZ.js";const U=i("span",null," Docentes ",-1),q={class:"d-flex justify-end gap-3 flex-wrap"},H={key:1},J=i("span",null,"Descargar Nómina",-1),K=i("span",null,"Resetear contraseña",-1),W=i("span",null,"Planificación",-1),Pe=N({__name:"List",setup(X){const w=P(),s=(e={action:"create",id:null})=>{if(e.action=="order")return f.push({name:"Teacher-Order"}),!1;if(e.action=="planning")return f.push({name:"Teacher-Planning",params:{id:e.id}}),!1;f.push({name:"Teacher-Form",params:{action:e.action,id:e.id}})},C=p(),V={url:"/teacher/list",params:{company_id:w.company.id},headers:[{title:"Acciones",key:"actions",sortable:!1,width:50},{title:"Estado",key:"is_active",sortable:!1},{title:"Foto",key:"photo",sortable:!1},{title:"Tipo de educación",key:"type_education_name",sortable:!1},{title:"Cargo",key:"job_position_name",sortable:!1},{title:"Nombre(s)",key:"name",sortable:!1},{title:"Apellido(s)",key:"last_name",sortable:!1},{title:"Correo",key:"email",sortable:!1},{title:"Telefono",key:"phone",sortable:!1}],actions:{changeStatus:{url:"/teacher/changeStatus"},view:{show:!1},delete:{url:"/teacher/delete"}}},x=p({inputGeneral:{relationsGeneral:{all:["name","last_name","email","phone"],typeEducation:["name"],jobPosition:["name"]}},dialog:{width:500,inputs:[{input_type:"selectInfinite",title:"Tipo de educación",key:"typeEducation",relation:"typeEducation",relation_key:"type_education_id",multiple:!0,api:"selectInifiniteTypeEducation"}]}}),h=I({excel:!1}),T=async e=>{var r;h.excel=!0;const{data:n,response:c}=await g("/teacher-downloadConsolidated/"+e.id).get();if(h.excel=!1,(r=c.value)!=null&&r.ok&&n.value){const t="Nómina "+e.name+" "+e.last_name;S(n.value.excel,t)}},l=p(),B=e=>{l.value.componentData.title="¿Seguro desea reiniciar la contraseña al registro?",l.value.openModal(e)},E=async e=>{await g("/teacher-resetPassword/"+e).get()};return(e,n)=>{const c=D,r=A;return d(),k("div",null,[a(j,null,{default:o(()=>[a(L,{class:"d-flex justify-space-between"},{default:o(()=>[U,i("div",q,[a(v,{color:"primary",onClick:n[0]||(n[0]=t=>s({action:"order",id:null}))},{default:o(()=>[b(" Ordenar Docentes ")]),_:1}),a(v,{onClick:n[1]||(n[1]=t=>s())},{default:o(()=>[b(" Agregar docente ")]),_:1})])]),_:1}),a(O,{class:"mt-2"},{default:o(()=>[a(c,{ref_key:"tableFull",ref:C,optionsTable:V,optionsFilter:m(x),onGoView:s},{"item.photo":o(({item:t})=>[a(R,{color:t.photo?"":"primary",class:M(t.photo?null:"v-avatar-light-bg primary--text"),variant:t.photo?void 0:"tonal"},{default:o(()=>[t.photo?(d(),Q(z,{key:0,style:{width:"80px"},src:("storageBack"in e?e.storageBack:m(F))(t.photo)},null,8,["src"])):(d(),k("span",H,G(("avatarText"in e?e.avatarText:m($))(t.name+" "+t.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.actions2":o(({item:t})=>[a(_,{onClick:y=>T(t)},{prepend:o(()=>[a(u,{icon:"tabler-file-download"})]),default:o(()=>[J]),_:2},1032,["onClick"]),a(_,{onClick:y=>B(t.id)},{prepend:o(()=>[a(u,{icon:"tabler-lock-open"})]),default:o(()=>[K]),_:2},1032,["onClick"]),a(_,{onClick:y=>s({action:"planning",id:t.id})},{prepend:o(()=>[a(u,{icon:"tabler-file"})]),default:o(()=>[W]),_:2},1032,["onClick"])]),_:1},8,["optionsFilter"])]),_:1})]),_:1}),a(r,{ref_key:"refModalQuestion",ref:l,onSuccess:E},null,512)])}}});export{Pe as default};

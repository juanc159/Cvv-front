import{V as S,r as f}from"./VForm-47a2101d.js";import{_ as w}from"./AppTextField.vue_vue_type_script_setup_true_lang-dc2bc2f0.js";import{_ as j}from"./AppSelect.vue_vue_type_script_setup_true_lang-f8cd3cda.js";import{d as B,p as $,r as V,R as T,Q as N,L as A,o as G,c as R,b as o,f as r,k as t,ag as E,B as U,aA as D,aB as J}from"./index-a70c310d.js";import{u as M}from"./useCrudGradeStore-30157594.js";import{V as O}from"./VCardText-a04b16cb.js";import{V as _}from"./VRow-4f083af2.js";import{V as m}from"./VCol-e195c0cc.js";import{V as z}from"./VCard-d61c3423.js";import"./helpers-3edea678.js";import"./VField-2ed8a089.js";import"./VTextField-8ddf2a14.js";import"./VImg-b4a62fd2.js";import"./VSelect-0806c770.js";import"./VList-4ee0ffd8.js";import"./ssrBoot-7b1f0168.js";import"./VAvatar-22f50111.js";import"./VDivider-1ec40492.js";import"./dialog-transition-3794d2d4.js";import"./VMenu-40ddb4d3.js";import"./VChip-9a337289.js";/* empty css              */const de=B({__name:"Form",setup(H){const b=$(),{toast:g}=J(),p=V(),d=M(),C=T(),{form:l,loading:F,typeEducations:v}=N(d),n=V({}),k=async()=>{var e,u;l.value.company_id=C.company.id;const a=await((e=p.value)==null?void 0:e.validate());if(a!=null&&a.valid){const i=await d.fetchSave();(i==null?void 0:i.code)===200&&(n.value={},await((u=p.value)==null?void 0:u.resetValidation())),(i==null?void 0:i.code)===422&&(n.value=i.errors??{})}else g("Faltan Campos Por Diligenciar","","danger")};A(async()=>{d.clearForm(),await d.fetchDataForm(Number(b.params.id),b.params.action);const a=JSON.parse(JSON.stringify(l.value));await y(a.type_education_id),l.value.subjects=a.subjects});const c=V([]),y=async a=>{if(c.value=[],l.value.subjects=[],a){const e=await v.value.find(u=>u.value==a);c.value=e.subjects}};return(a,e)=>{const u=D,i=j,q=w;return G(),R("div",null,[o(z,null,{default:r(()=>[o(O,null,{default:r(()=>[o(_,null,{default:r(()=>[o(m,null,{default:r(()=>[o(u,{"sub-title":"Formulario Grado",action:String(a.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:a.$router.back},null,8,["action","onChangeScreenBack"])]),_:1})]),_:1}),o(t(S),{ref_key:"formValidation",ref:p,"lazy-validation":""},{default:r(()=>[o(_,null,{default:r(()=>[o(m,{cols:"12",sm:"3"},{default:r(()=>[o(i,{clearable:"",modelValue:t(l).type_education_id,"onUpdate:modelValue":[e[0]||(e[0]=s=>t(l).type_education_id=s),e[2]||(e[2]=s=>y(s))],rules:["requiredValidator"in a?a.requiredValidator:t(f)],"error-messages":t(n).type_education_id,label:"Tipo",onChange:e[1]||(e[1]=s=>t(n).type_education_id=""),requiredField:!0,items:t(v)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),o(m,{cols:"12",sm:"3"},{default:r(()=>[o(q,{clearable:"",modelValue:t(l).name,"onUpdate:modelValue":e[3]||(e[3]=s=>t(l).name=s),rules:["requiredValidator"in a?a.requiredValidator:t(f)],"error-messages":t(n).name,label:"Nombre",onKeypress:e[4]||(e[4]=s=>t(n).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),o(m,{cols:"12",sm:"3"},{default:r(()=>[o(i,{clearable:"",modelValue:t(l).subjects,"onUpdate:modelValue":e[5]||(e[5]=s=>t(l).subjects=s),"item-value":"id","item-title":"name",label:"Materias",multiple:"",requiredField:!0,items:t(c),rules:["requiredValidator"in a?a.requiredValidator:t(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},512),o(_,null,{default:r(()=>[o(m,{cols:"12",class:"d-flex justify-center"},{default:r(()=>[o(E,{loading:t(F).form,color:"primary",onClick:e[6]||(e[6]=s=>k())},{default:r(()=>[U(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{de as default};

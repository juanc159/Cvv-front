import{u as A}from"./useCrudServiceStore-63eda616.js";import{d as E,R,Q as N,r as L,L as M,w as x,aB as Q,ab as U,a as q,o as F,c as j,b as e,f as a,B as _,k as n,aC as G,e as l,a9 as C,ae as f,a6 as v,C as h,ac as y,q as H}from"./index-03358c0e.js";import{S as J}from"./sweetalert2.esm.all-562d67d8.js";import{b as K,V as O}from"./VCard-08607af2.js";import{V as w}from"./VCardText-c85c529a.js";import{V as S}from"./VContainer-b8965feb.js";import{V as W}from"./VSelect-b8bb770c.js";import{V as X}from"./VSpacer-5d2d7e65.js";import{V as Y}from"./VImg-ea85bada.js";import{V as Z}from"./VChip-22b4b494.js";import{V as ee}from"./VRow-9771f256.js";import{V as te}from"./VPagination-fc7d7b1b.js";import{V as ae}from"./VDataTable-e5f3c572.js";import"./VAvatar-ecf4fe79.js";/* empty css              */import"./VTextField-2da00703.js";import"./VField-2ba68a14.js";import"./VList-8ab409ad.js";import"./ssrBoot-c80a6998.js";import"./VDivider-2a5375c9.js";import"./dialog-transition-31f7b9d6.js";import"./VMenu-1fcec5f2.js";const oe={class:"me-3",style:{"inline-size":"80px"}},se={class:"app-banner-search-filter d-flex align-center flex-wrap gap-4"},ie={class:"d-flex align-center py-2",style:{"inline-size":"10rem"}},ne={colspan:"4"},le={style:{"inline-size":"100"},class:"d-flex justify-center"},re={class:"text-sm text-disabled"},Pe=E({__name:"Index",setup(ce){const c=A(),b=R(),k=H(),{currentPage:i,totalPage:d,lastPage:B,totalData:D,services:u,loading:T}=N(c),r=L(10),p=async(s=[])=>{await c.fetchAll({company_id:b.company.id,perPage:r.value,page:i.value,searchQuery:s})};M(async()=>{await p()}),x(i,async()=>{i.value>d.value&&(i.value=d.value)}),x(r,async()=>{i.value=1}),Q([i,r],async()=>{await p()});const z=U(()=>{const s=u.value.length?(i.value-1)*d.value+1:0,t=u.value.length+(i.value-1)*d.value;return`Mostrando ${s} a ${t} de ${D.value} registros`}),V=async(s="create",t)=>{k.push({name:"Service-Form",params:{action:s,id:t}})},I=async(s,t)=>{const m=!s[t];(await c.changeState({id:s.id,value:m,field:t})).code==200&&(s.state=m)},P=async s=>{J.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await c.fetchDelete(s),await p()):t.isDenied})},$=[{title:"Título",key:"title"},{title:"Imagen",key:"image"},{title:"Estado",key:"state"},{title:"Acciones",key:"actions"}];return(s,t)=>{const m=q("PreloadInterno");return F(),j("div",null,[e(O,null,{default:a(()=>[e(K,{"primary-title":""},{default:a(()=>t[3]||(t[3]=[_("Listado de servicios")])),_:1}),e(w,null,{default:a(()=>[e(n(ae),{headers:$,items:n(u),"items-per-page":n(r)},G({top:a(()=>[e(S,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[l("div",oe,[e(W,{modelValue:n(r),"onUpdate:modelValue":t[0]||(t[0]=o=>C(r)?r.value=o:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(X),l("div",se,[e(f,{color:"primary",onClick:t[1]||(t[1]=o=>V())},{default:a(()=>t[4]||(t[4]=[_(" Crear Service ")])),_:1})])]),_:1})]),"item.image":a(({item:o})=>[l("div",ie,[e(Y,{src:o.image,class:"rounded"},null,8,["src"])])]),"item.state":a(({item:o})=>[e(Z,{color:o.state==1?"success":"error",onClick:g=>I(o,"state")},{default:a(()=>[e(v,{start:"",size:"16",icon:o.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),l("span",null,h(o.state==1?"Activo":"Inactivo"),1),e(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":a(({item:o})=>[e(f,{icon:"",size:"x-small",color:"error",variant:"text",onClick:g=>P(o.id)},{default:a(()=>[e(v,{size:"22",icon:"tabler-trash"}),e(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"]),e(f,{icon:"",size:"x-small",color:"default",variant:"text",onClick:g=>V("edit",o.id)},{default:a(()=>[e(v,{size:"22",icon:"tabler-edit"}),e(y,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"])]),bottom:a(()=>[e(w,{class:"pt-2"},{default:a(()=>[e(ee,null,{default:a(()=>[e(S,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[l("span",re,h(n(z)),1),e(te,{modelValue:n(i),"onUpdate:modelValue":t[2]||(t[2]=o=>C(i)?i.value=o:null),size:"small","total-visible":5,length:n(B)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[n(T).table?{name:"body",fn:a(()=>[l("tr",null,[l("td",ne,[l("div",le,[e(m)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]),_:1})]),_:1})])}}});export{Pe as default};

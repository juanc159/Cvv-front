import{d as A,a0 as B,k as N,$ as R,r as _,a6 as M,w as Q,ay as U,E as q,a as F,o as J,c as L,b as t,f as a,t as j,n as l,az as G,e as i,a4 as h,a1 as m,v as x,a7 as u,a9 as C,I as H,J as K}from"./index-d7cd4679.js";import{u as O}from"./useCrudCompanyStore-4e2daf7c.js";import{b as W,V as X}from"./VCard-e3db9ab7.js";import{V as w}from"./VCardText-7ded879f.js";import{V as b}from"./VContainer-5c76528a.js";import{V as Y}from"./VSelect-77da1a23.js";import{V as Z}from"./VSpacer-00e2e263.js";import{V as tt}from"./VChip-000d3afd.js";import{V as at}from"./VRow-6f2922fc.js";import{V as et}from"./VPagination-14eba739.js";import{V as ot}from"./VDataTable-98eca19a.js";import"./VAvatar-a7a3edab.js";import"./VImg-6fa5e3fc.js";/* empty css              */import"./VTextField-7aa7290a.js";import"./VField-72ba6fec.js";import"./VList-0ccd67c2.js";import"./ssrBoot-1fa108f3.js";import"./VDivider-c727d838.js";import"./dialog-transition-e366f808.js";import"./VMenu-fbbddea5.js";const st={class:"me-3",style:{"inline-size":"80px"}},nt=i("div",{class:"app-Company-search-filter d-flex align-center flex-wrap gap-4"},null,-1),lt={colspan:"4"},rt={style:{"inline-size":"100"},class:"d-flex justify-center"},it={class:"text-sm text-disabled"},$t=A({__name:"Index",setup(ct){const p=O(),f=B(),v=N(),{currentPage:n,totalPage:y,lastPage:k,totalData:S,companies:d,loading:z}=R(p),I=[{title:"Nombre",key:"name"},{title:"Eslogan",key:"slogan"},{title:"Estado",key:"state"},{title:"Acciones",key:"actions"}],r=_(10),P=_(),T=M(()=>{const o=d.value.length?(n.value-1)*y.value+1:0,s=d.value.length+(n.value-1)*y.value;return`Mostrando ${o} a ${s} de ${S.value} registros`});Q(r,async()=>{n.value=1}),U([n,P,r],async()=>{await V()});const V=async(o=[])=>{await p.fetchAll({company_id:f.company.id,perPage:r.value,page:n.value,searchQuery:o})};q(async()=>{await V()});const $=async(o="create",s)=>{v.push({name:"Company-Form",params:{action:o,id:s}})},D=async(o,s)=>{const c=!o[s];(await p.changeState({id:o.id,value:c,field:s})).code==200&&(o.state=c)},E=o=>{f.company=o,v.push({name:"root"})};return(o,s)=>{const c=F("PreloadInterno");return J(),L("div",null,[t(X,null,{default:a(()=>[t(W,{"primary-title":""},{default:a(()=>[j("Listado de compaÃ±ias")]),_:1}),t(w,null,{default:a(()=>[t(l(ot),{headers:I,items:l(d),"items-per-page":l(r)},G({top:a(()=>[t(b,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[i("div",st,[t(Y,{modelValue:l(r),"onUpdate:modelValue":s[0]||(s[0]=e=>h(r)?r.value=e:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(Z),nt]),_:1})]),"item.state":a(({item:e})=>[t(tt,{color:e.state==1?"success":"error",onClick:g=>D(e,"state")},{default:a(()=>[t(m,{start:"",size:"16",icon:e.state==1?"tabler-bell":"tabler-alert-circle"},null,8,["icon"]),i("span",null,x(e.state==1?"Activo":"Inactivo"),1),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Cambiar Estado"})]),_:2},1032,["color","onClick"])]),"item.actions":a(({item:e})=>[t(C,{icon:"",size:"x-small",color:"default",variant:"text",onClick:g=>$("edit",e.id)},{default:a(()=>[t(m,{size:"22",icon:"tabler-edit"}),t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Editar"})]),_:2},1032,["onClick"]),H(t(C,{size:"x-small",color:"default",icon:"",variant:"text",onClick:g=>E(e)},{default:a(()=>[t(u,{location:"top",transition:"scale-transition",activator:"parent",text:"Ingresar"}),t(m,{size:"22",icon:"tabler-square-rounded-arrow-right"})]),_:2},1032,["onClick"]),[[K,e.state==1]])]),bottom:a(()=>[t(w,{class:"pt-2"},{default:a(()=>[t(at,null,{default:a(()=>[t(b,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[i("span",it,x(l(T)),1),t(et,{modelValue:l(n),"onUpdate:modelValue":s[1]||(s[1]=e=>h(n)?n.value=e:null),size:"small","total-visible":5,length:l(k)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[l(z).table?{name:"body",fn:a(()=>[i("tr",null,[i("td",lt,[i("div",rt,[t(c)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]),_:1})]),_:1})])}}});export{$t as default};

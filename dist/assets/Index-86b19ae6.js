import{V as F,r as _}from"./VForm-47a2101d.js";import{_ as h}from"./AppSelect.vue_vue_type_script_setup_true_lang-f8cd3cda.js";import{d as w,R as x,aF as B,r as m,L as q,ah as v,o as g,c as T,b as a,f as r,B as u,k as e,g as A,ag as D,e as E,aB as I}from"./index-a70c310d.js";import{u as N}from"./useImageUpload-77d7b627.js";import{b as S,V as $}from"./VCard-d61c3423.js";import{V as L}from"./VCardText-a04b16cb.js";import{V as y}from"./VRow-4f083af2.js";import{V as p}from"./VCol-e195c0cc.js";import{V as R}from"./VField-2ed8a089.js";import{V as U}from"./VFileInput-85e9f98a.js";import"./helpers-3edea678.js";import"./VSelect-0806c770.js";import"./VTextField-8ddf2a14.js";import"./VImg-b4a62fd2.js";import"./VList-4ee0ffd8.js";import"./ssrBoot-7b1f0168.js";import"./VAvatar-22f50111.js";import"./VDivider-1ec40492.js";import"./dialog-transition-3794d2d4.js";import"./VMenu-40ddb4d3.js";import"./VChip-9a337289.js";import"./sweetalert2.all-e795d634.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */const j=E("b",{class:"text-warning"},"*",-1),pe=w({__name:"Index",setup(z){const C=x(),{toast:k}=I(),l=B({form:!1}),s=m({company_id:null,type_education_id:null,archive:null}),c=m({}),f=m(),V=m([]),d=m(N());d.value.allowedExtensions=["xls","xlsx"],q(async()=>{var i;l.form=!0;const{data:o,response:t}=await v("note-dataForm").get();l.form=!1,(i=t.value)!=null&&i.ok&&o.value&&(V.value=o.value.typeEducations)});const b=async()=>{var t;s.value.archive=d.value.imageFile,s.value.company_id=C.company.id;const o=await((t=f.value)==null?void 0:t.validate());if(o!=null&&o.valid){const i=new FormData;for(const n in s.value)i.append(n,s.value[n]);l.form=!0,await v("note-store").post(i),l.form=!1}else k("Faltan Campos Por Diligenciar","","danger")};return(o,t)=>{const i=h;return g(),T("div",null,[a($,{disabled:e(l).form,loading:e(l).form},{default:r(()=>[a(S,{"primary-title":""},{default:r(()=>[u("Cargar Notas")]),_:1}),a(L,null,{default:r(()=>[a(e(F),{ref_key:"formValidation",ref:f,"lazy-validation":""},{default:r(()=>[a(y,null,{default:r(()=>[a(p,{cols:"12",sm:"4"},{default:r(()=>[a(i,{clearable:"",modelValue:e(s).type_education_id,"onUpdate:modelValue":t[0]||(t[0]=n=>e(s).type_education_id=n),rules:["requiredValidator"in o?o.requiredValidator:e(_)],"error-messages":e(c).type_education_id,label:"Tipo",onChange:t[1]||(t[1]=n=>e(c).type_education_id=""),requiredField:!0,items:e(V)},null,8,["modelValue","rules","error-messages","items"])]),_:1}),a(p,{cols:"12",sm:"4"},{default:r(()=>[a(R,null,{default:r(()=>[u("ArchivoÂ "),j]),_:1}),(g(),A(U,{key:e(d).key,onChange:e(d).handleImageSelected,"onClick:clear":e(d).clearData,rules:["requiredValidator"in o?o.requiredValidator:e(_)]},null,8,["onChange","onClick:clear","rules"]))]),_:1})]),_:1}),a(y,null,{default:r(()=>[a(p,{cols:"12",class:"d-flex justify-center"},{default:r(()=>[a(D,{loading:e(l).form,color:"primary",onClick:t[2]||(t[2]=n=>b())},{default:r(()=>[u(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["disabled","loading"])])}}});export{pe as default};

import{r as A}from"./validators-C2W4JLKh.js";import{d as H,U as J,r as s,c as P,o as p,b as e,f as i,a8 as d,az as K,e as u,F as O,p as W,E as X,D as q,g as w,x as k,ad as C,C as v,ac as B,k as T,Y as ee,Z as ae}from"./index-DGwLTG7y.js";import{_ as ie}from"./AppSelect.vue_vue_type_script_setup_true_lang-CkAHpG8R.js";import{_ as te}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-CDxiJw-a.js";import{u as le}from"./useAxios-Dvg6aL0V.js";import{o as oe}from"./helpers-DwTae8Vr.js";import{b as $,V as x}from"./VCard-B9EhiGn2.js";import{V as y}from"./VCardText-Dmphpwd1.js";import{V as S,a as E}from"./VRow-Xte8JFyh.js";import{V as D}from"./VDivider-QSx7DlWx.js";import{V as F}from"./VForm-mCchx-qh.js";import{V as re}from"./VSpacer-2N7O7Eon.js";import{V as ne}from"./VDialog-D2GGbiG7.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VTooltip-B15W4Tjj.js";import"./VOverlay-CNNg-6AI.js";import"./VImg--0-jo666.js";import"./forwardRefs-C-GTDzx5.js";import"./VInput-BgQCon_g.js";import"./VSelect-EKLp2Do1.js";import"./VTextField-CQRneivX.js";/* empty css                   */import"./VCounter-CFKbFaHM.js";import"./VList-wmt1cssJ.js";import"./ssrBoot-80LRmI8v.js";import"./VAvatar-CMndsomI.js";import"./dialog-transition-D5-b5KYT.js";import"./VMenu-C9guvoAV.js";import"./VCheckboxBtn-CYB9O97d.js";import"./VSelectionControl-BvU7KPO7.js";import"./VChip-Cb5sgnvF.js";import"./constants-2GBt7OCP.js";/* empty css              */const U=_=>(ee("data-v-0235a406"),_=_(),ae(),_),de=U(()=>u("span",{class:"text-white text-h5"},"Generador de constancias masivas",-1)),ue={class:"certificates-section"},ce=U(()=>u("h3",{class:"text-h6 mb-4"},"Seleccione el tipo de constancia",-1)),me={class:"d-flex align-center mb-3"},fe={class:"text-h6"},pe={class:"text-body-2 text-grey-darken-1"},ve=H({__name:"Masive",setup(_){const M=J(),z=s(""),c=s(!1),o=s(null),V=s(!0),b=s(null),m=s(!1),j=(t=!1)=>{m.value=t,t||N()},f=s({grade_id:null}),L=[{value:1,title:"Primer Nivel"},{value:2,title:"Segundo Nivel"}],Y=[{value:4,title:"1er Grado"},{value:5,title:"2do Grado"},{value:6,title:"3er Grado"},{value:7,title:"4to Grado"},{value:8,title:"5to Grado"},{value:9,title:"6to Grado"}],h=async t=>{try{const{data:a,response:I}=await le(t).get({params:{additionalInfo:"",grade_id:f.value.grade_id,company_id:M.company.id}});if(I.status===200&&(a!=null&&a.pdf))oe(a.pdf);else throw new Error("Invalid response format")}catch(a){console.error(`Error downloading certificate from ${t}:`,a)}},Q=[{id:1,title:"Constancia de Prosecución - Educación Inicial (Primer y Segundo Nivel)",icon:"tabler-school",description:"Certificado para estudiantes del Nivel de Educación Inicial que cursan Primer o Segundo Nivel.",requiresAdditionalInfo:!0,handler:()=>h("/documents/prosecutionInitialEducation")},{id:2,title:"Certificado de Educación Inicial (Tercer Nivel)",icon:"tabler-school",description:"Certificado para estudiantes del Nivel de Educación Inicial que cursan Tercer Nivel.",requiresAdditionalInfo:!1,handler:()=>h("/documents/certificateInitialEducation")},{id:3,title:"Constancia de Prosecución - Educación Primaria",icon:"tabler-school",description:"Certificado para estudiantes del Nivel de Educación Primaria que cursan desde 1er hasta 6to grado.",requiresAdditionalInfo:!0,handler:()=>h("/documents/prosecutionPrimaryEducation")}],R=async()=>{const t=b.value;if(!t)return!1;const{valid:a}=await t.validate();return a},Z=t=>{o.value=t,t.requiresAdditionalInfo&&(m.value=!0)},g=async(t=!0)=>{if(o.value&&!(t&&!await R())){c.value=!0;try{await o.value.handler()}catch(a){console.error("Error al generar certificado:",a)}finally{c.value=!1}}},N=()=>{o.value=null,z.value=""};return(t,a)=>{const I=te,G=ie;return p(),P("div",null,[e(x,{class:"elevation-3",loading:c.value},{default:i(()=>[e($,{class:"d-flex align-center pa-4 bg-primary"},{default:i(()=>[e(d,{icon:"tabler-certificate",class:"me-2",color:"white"}),de]),_:1}),e(y,{class:"pa-6"},{default:i(()=>[e(K,null,{default:i(()=>[u("div",ue,[ce,e(S,null,{default:i(()=>[(p(),P(O,null,W(Q,l=>e(E,{key:l.id,cols:"12",sm:"6",md:"4"},{default:i(()=>{var n;return[e(x,{class:X(["certificate-card pa-4 cursor-pointer",{selected:((n=o.value)==null?void 0:n.id)===l.id}]),onClick:r=>Z(l),elevation:"2",hover:""},{default:i(()=>{var r;return[u("div",me,[e(d,{icon:l.icon,size:"32",class:"me-3",color:((r=o.value)==null?void 0:r.id)===l.id?"primary":"grey"},null,8,["icon","color"]),u("h4",fe,q(l.title),1)]),u("p",pe,q(l.description),1)]}),_:2},1032,["class","onClick"])]}),_:2},1024)),64))]),_:1})])]),_:1})]),_:1}),e(D),e(y,{class:"d-flex justify-end gap-3 flex-wrap mt-5"},{default:i(()=>[e(C,{color:"error",variant:"outlined",onClick:N},{default:i(()=>[e(d,{icon:"tabler-x",class:"me-2"}),v(" Cancelar ")]),_:1}),o.value&&!o.value.requiresAdditionalInfo?(p(),w(C,{key:0,color:"primary",onClick:a[0]||(a[0]=l=>g(!1)),disabled:!o.value,loading:c.value},{default:i(()=>[e(d,{icon:"tabler-printer",class:"me-2"}),v(" Generar Constancia ")]),_:1},8,["disabled","loading"])):k("",!0)]),_:1})]),_:1},8,["loading"]),e(ne,{modelValue:m.value,"onUpdate:modelValue":a[7]||(a[7]=l=>m.value=l),width:"600",persistent:""},{default:i(()=>[e(I,{onClick:a[1]||(a[1]=l=>j())}),e(x,null,{default:i(()=>[e($,{class:"bg-primary text-white pa-4"},{default:i(()=>{var l,n;return[e(d,{icon:(l=o.value)==null?void 0:l.icon,class:"me-2",color:"white"},null,8,["icon"]),v(" "+q((n=o.value)==null?void 0:n.title),1)]}),_:1}),e(y,{class:"pa-6"},{default:i(()=>{var l,n;return[((l=o.value)==null?void 0:l.id)===1?(p(),w(F,{key:0,onSubmit:B(g,["prevent"]),modelValue:V.value,"onUpdate:modelValue":a[3]||(a[3]=r=>V.value=r),ref_key:"form",ref:b},{default:i(()=>[e(S,null,{default:i(()=>[e(E,null,{default:i(()=>[e(G,{rules:["requiredValidator"in t?t.requiredValidator:T(A)],clearable:"",requiredField:!0,modelValue:f.value.grade_id,"onUpdate:modelValue":a[2]||(a[2]=r=>f.value.grade_id=r),items:L,label:"Seleccione el grado que desea generar",required:""},null,8,["rules","modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):k("",!0),((n=o.value)==null?void 0:n.id)===3?(p(),w(F,{key:1,onSubmit:B(g,["prevent"]),modelValue:V.value,"onUpdate:modelValue":a[5]||(a[5]=r=>V.value=r),ref_key:"form",ref:b},{default:i(()=>[e(S,null,{default:i(()=>[e(E,null,{default:i(()=>[e(G,{rules:["requiredValidator"in t?t.requiredValidator:T(A)],clearable:"",requiredField:!0,modelValue:f.value.grade_id,"onUpdate:modelValue":a[4]||(a[4]=r=>f.value.grade_id=r),items:Y,label:"Seleccione el grado que desea generar",required:""},null,8,["rules","modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):k("",!0)]}),_:1}),e(D),e(y,{class:"d-flex align-center justify-center gap-4"},{default:i(()=>[e(re),e(C,{color:"error",variant:"outlined",onClick:a[6]||(a[6]=l=>m.value=!1)},{default:i(()=>[e(d,{icon:"tabler-x",class:"me-2"}),v(" Cancelar ")]),_:1}),e(C,{color:"primary",onClick:g,loading:c.value,disabled:!o.value},{default:i(()=>[e(d,{icon:"tabler-printer",class:"me-2"}),v(" Generar Constancia ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Je=se(ve,[["__scopeId","data-v-0235a406"]]);export{Je as default};

import{V as j,r as p}from"./VForm-09f36129.js";import{_ as z}from"./AppSelect.vue_vue_type_script_setup_true_lang-7937537d.js";import{_ as K}from"./AppTextField.vue_vue_type_script_setup_true_lang-668364af.js";import{d as L,r as _,p as P,Q as H,L as Q,ad as h,w as J,o as g,c as w,b as e,f as a,B as v,k as r,g as D,e as q,ag as F,F as O,m as W,aB as X,aC as Y,a8 as Z,ae as x}from"./index-a73ef7a4.js";import{u as ee}from"./useCrudCompanyStore-8c72f963.js";import{u as ae}from"./useImageUpload-1a3a20dc.js";import{b as B,V as k}from"./VCard-3c846ebb.js";import{V as $}from"./VCardText-f167dd9c.js";import{V as c}from"./VRow-be98792f.js";import{V as s}from"./VCol-38ed283b.js";import{V as le}from"./VFileInput-2f0c9cb7.js";import{V as re}from"./VImg-92b32f5d.js";import"./helpers-3edea678.js";import"./VField-c03f9512.js";import"./VSelect-b998c46f.js";import"./VTextField-cd57f2d2.js";import"./VList-572a06e0.js";import"./ssrBoot-b167cbc0.js";import"./VAvatar-c8033367.js";import"./VDivider-3bf501b7.js";import"./dialog-transition-20d407fc.js";import"./VMenu-8ce68b31.js";import"./VChip-eb33449f.js";import"./sweetalert2.all-e795d634.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */const oe=q("b",{class:"text-warning"},"*",-1),te={class:"d-flex justify-space-between"},ie=q("span",null,"Información de adicional",-1),Ae=L({__name:"Form",setup(ne){const u=_(ae()),b=P(),{toast:I}=Y(),y=_(),f=ee(),{form:i,loading:T,typeDetails:S}=H(f),m=_({}),C=_([]),N=async()=>{var o,V;const l=await((o=y.value)==null?void 0:o.validate());if(l!=null&&l.valid){const n=await f.fetchSave();(n==null?void 0:n.code)===200&&(C.value=[],m.value={},u.value.clearData(),await((V=y.value)==null?void 0:V.resetValidation())),(n==null?void 0:n.code)===422&&(m.value=n.errors??{})}else I("Faltan Campos Por Diligenciar","","danger")};Q(async()=>{f.clearForm(),b.params.id&&await f.fetchDataForm(Number(b.params.id),b.params.action)});const A=h(()=>i.value.arrayDetails.filter(l=>l.delete!=1)),G=()=>{i.value.arrayDetails.push({type_detail_id:null,icon:null,color:null,content:null,delete:0})},M=l=>{i.value.arrayDetails[l].id?i.value.arrayDetails[l].delete=1:i.value.arrayDetails.splice(l,1)};J(i,(l,o)=>{l.id?C.value.image_principal=[]:C.value.image_principal=[p(u.value.imageUrl)]},{deep:!0});const E=l=>{u.value.handleImageSelected(l),setTimeout(()=>{i.value.image_principal=u.value.imageFile},1e3)};return(l,o)=>{const V=X,n=K,R=z;return g(),w("div",null,[e(V,{"sub-title":"Formulario de compañia",action:String(l.$route.params.action),"btn-action":"list","validate-crud":!0,"btn-back":!0,onChangeScreenBack:l.$router.back},null,8,["action","onChangeScreenBack"]),e(k,null,{default:a(()=>[e(B,{"primary-title":""},{default:a(()=>[v("Información principal")]),_:1}),e($,null,{default:a(()=>[e(c,null,{default:a(()=>[e(s)]),_:1}),e(r(j),{ref_key:"formValidation",ref:y,"lazy-validation":""},{default:a(()=>[e(c,null,{default:a(()=>[e(s,{cols:"12",md:"4"},{default:a(()=>[e(n,{clearable:"",modelValue:r(i).name,"onUpdate:modelValue":o[0]||(o[0]=t=>r(i).name=t),rules:["requiredValidator"in l?l.requiredValidator:r(p)],"error-messages":r(m).name,label:"Nombre",onKeypress:o[1]||(o[1]=t=>r(m).name=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),e(s,{cols:"12",md:"4"},{default:a(()=>[e(n,{clearable:"",modelValue:r(i).slogan,"onUpdate:modelValue":o[2]||(o[2]=t=>r(i).slogan=t),rules:["requiredValidator"in l?l.requiredValidator:r(p)],"error-messages":r(m).slogan,label:"Eslogan",onKeypress:o[3]||(o[3]=t=>r(m).slogan=""),requiredField:!0},null,8,["modelValue","rules","error-messages"])]),_:1}),e(s,{cols:"12",md:"4"},{default:a(()=>[e(n,{clearable:"",modelValue:r(i).iframeGoogleMap,"onUpdate:modelValue":o[4]||(o[4]=t=>r(i).iframeGoogleMap=t),label:"iframeGoogleMap",requiredField:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(s,{cols:"12",sm:"3"},{default:a(()=>[(g(),D(le,{accept:"image/*",key:r(u).key,onChange:o[5]||(o[5]=t=>E(t)),"onClick:clear":r(u).clearData},{label:a(()=>[v(" Imagen Principal "),oe]),_:1},8,["onClick:clear"]))]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(k,{width:"400"},{default:a(()=>[e(re,{src:r(u).imageUrl??r(i).image_principal},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}),e(k,{class:"mt-5"},{default:a(()=>[e(B,{"primary-title":""},{default:a(()=>[q("div",te,[ie,e(F,{color:"success",onClick:o[6]||(o[6]=t=>G())},{default:a(()=>[v("Agregar")]),_:1})])]),_:1}),e($,null,{default:a(()=>[(g(!0),w(O,null,W(r(A),(t,U)=>(g(),D(c,{key:U},{default:a(()=>[e(s,{cols:"12",md:"2"},{default:a(()=>[e(R,{items:r(S),modelValue:t.type_detail_id,"onUpdate:modelValue":d=>t.type_detail_id=d,label:"Tipo",requiredField:!0},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{cols:"12",md:"2"},{default:a(()=>[e(n,{clearable:"",modelValue:t.icon,"onUpdate:modelValue":d=>t.icon=d,rules:["requiredValidator"in l?l.requiredValidator:r(p)],label:"Icono",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"2"},{default:a(()=>[e(n,{clearable:"",modelValue:t.color,"onUpdate:modelValue":d=>t.color=d,rules:["requiredValidator"in l?l.requiredValidator:r(p)],label:"Color",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"5"},{default:a(()=>[e(n,{clearable:"",modelValue:t.content,"onUpdate:modelValue":d=>t.content=d,rules:["requiredValidator"in l?l.requiredValidator:r(p)],label:"Contenido",requiredField:!0},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(s,{cols:"12",md:"1"},{default:a(()=>[e(F,{icon:"",size:"x-small",color:"error",variant:"text",class:"mt-6",onClick:d=>M(U)},{default:a(()=>[e(Z,{icon:"tabler-trash"}),e(x,{location:"top",transition:"scale-transition",activator:"parent",text:"Eliminar"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(c,{class:"mt-5"},{default:a(()=>[e(s,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[e(F,{loading:r(T).form,color:"primary",onClick:o[7]||(o[7]=t=>N())},{default:a(()=>[v(" Guardar ")]),_:1},8,["loading"])]),_:1})]),_:1})])}}});export{Ae as default};

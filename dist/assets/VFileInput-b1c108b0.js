import{S as M}from"./sweetalert2.all-ae952bba.js";import{r as u,w as L,ae as Y,b6 as Z,ah as ee,aq as le,aU as te,a6 as d,b7 as U,ai as ne,b8 as ae,b9 as oe,b as o,q as S,F as w,b2 as ue,ba as ie}from"./index-43b494b0.js";import{m as se,a as re,u as ce,b as E,f as de,c as fe,d as ve}from"./VField-5f0834de.js";import{V as me}from"./VChip-e8f0c416.js";function ke(){const e=u(null),i=u(null),k=u(1),p=u(null),t=u([]),g=u(10240),n=u(!1);function f(){var y;var m=parseInt(event.target.files[0].size/1024);if(m>g.value)return M.fire({icon:"error",title:"Oops...",text:"Debe registrar máximo 10MB",customClass:{container:"my-swal"}}),v(),!1;const s=(y=event.target.files[0].name.split(".").pop())==null?void 0:y.toLowerCase();return t.value.length>0&&!t.value.includes(s)?(M.fire({icon:"error",title:"Oops...",text:`Solo se admite archivos con extensiónes: ${t.value.join(", ")}`,customClass:{container:"my-swal"}}),v(),!1):event.target.files.length===0?(v(),!1):(console.log("event.target.files[0]",event.target.files[0]),e.value=event.target.files[0],!0)}L(e,m=>{if(!(m instanceof File))return;const s=new FileReader;s.readAsDataURL(m),n.value=!0,s.addEventListener("load",()=>{i.value=s.result,n.value=!1})});function v(){e.value=null,i.value=null,p.value=null,k.value++,n.value=!1}return{imageFile:e,imageUrl:i,handleImageSelected:f,key:k,allowedExtensions:t,clearData:v,name:p,allowedSizeFile:g,loading:n}}const pe=Y({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...se({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>Z(e).every(i=>i!=null&&typeof i=="object")},...re({clearable:!0})},"VFileInput"),Ie=ee()({name:"VFileInput",inheritAttrs:!1,props:pe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{attrs:k,emit:p,slots:t}=i;const{t:g}=le(),n=te(e,"modelValue"),{isFocused:f,focus:v,blur:m}=ce(e),s=d(()=>typeof e.showSize!="boolean"?e.showSize:void 0),y=d(()=>(n.value??[]).reduce((l,a)=>{let{size:h=0}=a;return l+h},0)),z=d(()=>U(y.value,s.value)),V=d(()=>(n.value??[]).map(l=>{const{name:a="",size:h=0}=l;return e.showSize?`${a} (${U(h,s.value)})`:a})),N=d(()=>{var a;const l=((a=n.value)==null?void 0:a.length)??0;return e.showSize?g(e.counterSizeString,l,z.value):g(e.counterString,l)}),P=u(),R=u(),c=u(),j=d(()=>f.value||e.active),A=d(()=>["plain","underlined"].includes(e.variant));function F(){var l;c.value!==document.activeElement&&((l=c.value)==null||l.focus()),f.value||v()}function O(l){B(l)}function q(l){p("mousedown:control",l)}function B(l){var a;(a=c.value)==null||a.click(),p("click:control",l)}function T(l){l.stopPropagation(),F(),ue(()=>{n.value=[],ie(e["onClick:clear"],l)})}return L(n,l=>{(!Array.isArray(l)||!l.length)&&c.value&&(c.value.value="")}),ne(()=>{const l=!!(t.counter||e.counter),a=!!(l||t.details),[h,_]=oe(k),[{modelValue:ge,...G}]=E.filterProps(e),[H]=de(e);return o(E,S({ref:P,modelValue:n.value,"onUpdate:modelValue":C=>n.value=C,class:["v-file-input",{"v-text-field--plain-underlined":A.value},e.class],style:e.style,"onClick:prepend":O},h,G,{centerAffix:!A.value,focused:f.value}),{...t,default:C=>{let{id:I,isDisabled:b,isDirty:x,isReadonly:D,isValid:J}=C;return o(fe,S({ref:R,"prepend-icon":e.prependIcon,onMousedown:q,onClick:B,"onClick:clear":T,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},H,{id:I.value,active:j.value||x.value,dirty:x.value,disabled:b.value,focused:f.value,error:J.value===!1}),{...t,default:K=>{var $;let{props:{class:Q,...W}}=K;return o(w,null,[o("input",S({ref:c,type:"file",readonly:D.value,disabled:b.value,multiple:e.multiple,name:e.name,onClick:r=>{r.stopPropagation(),D.value&&r.preventDefault(),F()},onChange:r=>{if(!r.target)return;const X=r.target;n.value=[...X.files??[]]},onFocus:F,onBlur:m},W,_),null),o("div",{class:Q},[!!(($=n.value)!=null&&$.length)&&(t.selection?t.selection({fileNames:V.value,totalBytes:y.value,totalBytesReadable:z.value}):e.chips?V.value.map(r=>o(me,{key:r,size:"small",color:e.color},{default:()=>[r]})):V.value.join(", "))])])}})},details:a?C=>{var I,b;return o(w,null,[(I=t.details)==null?void 0:I.call(t,C),l&&o(w,null,[o("span",null,null),o(ve,{active:!!((b=n.value)!=null&&b.length),value:N.value},t.counter)])])}:void 0})}),ae({},P,R,c)}});export{Ie as V,ke as u};

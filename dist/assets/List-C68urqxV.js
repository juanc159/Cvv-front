import{h as L,s as G,b as O}from"./helpers-C8MsW8og.js";import{a as U}from"./formatters-DYNumAhF.js";import{_ as j}from"./ModalQuestion.vue_vue_type_script_setup_true_lang-C-5vR2Gz.js";import{_ as q,a as z}from"./FilterDialogNew-CLo-5cNL.js";import{d as J,V as H,r,aU as K,c as V,o as u,b as a,f as t,e as l,h as P,y as W,l as i,a8 as y,D as g,a6 as k,G as X,E as Y,aJ as v,aM as f}from"./index-mvzwxEo2.js";import{a as Z,V as ee}from"./VCard-BlICgAcM.js";import{V as x}from"./VCardText-Dy9zdiAL.js";import{a as b}from"./VList-7mMXiqPn.js";import{V as ae}from"./VAvatar-bt-xxFiX.js";import{V as te}from"./VImg-Efa80a7U.js";import"./constants-2GBt7OCP.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-Bcs1pP7S.js";import"./VDialog-xdaJofTS.js";import"./VOverlay-BZ5Hql6K.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-C8KsD5rC.js";import"./useAxios-FLAc6fRj.js";import"./VDataTable-DpQ53fdb.js";import"./VSelect-Bj4psRQk.js";import"./VTextField-Cv7ztyvR.js";/* empty css                   */import"./VCounter-Dx5dUwSy.js";import"./VInput-HLYlbxdO.js";import"./VMenu-Dxx1MIS3.js";import"./VCheckboxBtn-DHQWhpj-.js";import"./VSelectionControl-CxUPeOpY.js";import"./VChip-BvMhyBrq.js";import"./VTable-DUwyqrhH.js";import"./filter-DqiFRg-p.js";import"./VDivider-BkALpE3b.js";import"./VSkeletonLoader-BuGDxxqd.js";import"./VRow-D3mFhOOE.js";/* empty css              */import"./VTooltip-Bkn8d0Pg.js";import"./AppDateTimePicker.vue_vue_type_style_index_0_lang-Z3d2mMvw.js";import"./AppSelectRemote-hKn4Nc0E.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-wh7DHzB9.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-BF0ad7SX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VToolbar-C4wfZz1q.js";import"./ssrBoot-BifDCAH4.js";const oe=l("span",null," Docentes ",-1),ne={class:"d-flex justify-end gap-3 flex-wrap"},ie={key:1},se=l("span",null,"Descargar Nómina",-1),re=l("span",null,"Resetear contraseña",-1),le=l("span",null,"Planificación",-1),Xe=J({__name:"List",setup(ce){const w=H(),_=r(),S={url:"/teacher/list",paramsGlobal:{company_id:w.company.id},headers:[{title:"Acciones",key:"actions",sortable:!1,width:50},{title:"Foto",key:"photo",sortable:!1},{title:"Estado",key:"is_active"},{title:"Tipo de educación",key:"type_education_name"},{title:"Cargo",key:"job_position_name"},{title:"Nombre(s)",key:"name"},{title:"Apellido(s)",key:"last_name"},{title:"Correo",key:"email"},{title:"Telefono",key:"phone"}],actions:{changeStatus:{url:"/teacher/changeStatus"},view:{show:!1},delete:{url:"/teacher/delete"}}},B=r({dialog:{width:400,inputs:[{type:"selectApi",label:"Tipo de educación",name:"type_education_id",arrayInfo:"typeEducation",multiple:!0,url:"selectInifiniteTypeEducation"}]},filterLabels:{inputGeneral:"Buscar en todo",is_active:"Estado"}}),s=K({excel:!1,resetPlanifications:!1}),D=async e=>{var d;s.excel=!0;const{data:n,response:p}=await v("/teacher-downloadConsolidated/"+e.id).get();if(s.excel=!1,(d=p.value)!=null&&d.ok&&n.value){const m="Nómina "+e.name+" "+e.last_name;O(n.value.excel,m)}},h=r(),E=e=>{h.value.componentData.title="¿Seguro desea reiniciar la contraseña al registro?",h.value.openModal(e)},M=async e=>{const{data:n,response:p}=await v("/teacher-resetPassword/"+e).get()},c=r(),F=()=>{c.value.componentData.title="¿Seguro desea reiniciar las planificaciones de todos los profesores?",c.value.componentData.subTitle="Se eliminarán todas las planificaciones. Tenga en cuenta que esta acción no se puede deshacer.",c.value.openModal()},N=async()=>{s.resetPlanifications=!0;const{data:e,response:n}=await v("/teacher-resetPlanifications").delete({company_id:w.company.id});s.resetPlanifications=!1},A=e=>{f.push({name:"Teacher-Form",params:{action:"edit",id:e.id}})},Q=()=>{f.push({name:"Teacher-Form",params:{action:"create"}})},$=()=>{f.push({name:"Teacher-Order"})},R=e=>{f.push({name:"Teacher-Planning",params:{id:e}})},T=r(!1),I=()=>{_.value&&_.value.fetchTableData(null,!1,!0)};return(e,n)=>{const p=q,d=z,m=j;return u(),V("div",null,[a(ee,null,{default:t(()=>[a(Z,{class:"d-flex justify-space-between"},{default:t(()=>[oe,l("div",ne,[("hasPermission"in e?e.hasPermission:i(L))("teacher.reset_planifications")?(u(),P(y,{key:0,loading:i(s).resetPlanifications,disabled:i(s).resetPlanifications,color:"primary",onClick:F},{default:t(()=>[g(" Reiniciar Planificaciones ")]),_:1},8,["loading","disabled"])):W("",!0),a(y,{color:"primary",onClick:n[0]||(n[0]=o=>$())},{default:t(()=>[g(" Ordenar Docentes ")]),_:1}),a(y,{onClick:n[1]||(n[1]=o=>Q())},{default:t(()=>[g(" Agregar docente ")]),_:1})])]),_:1}),a(x,null,{default:t(()=>[a(p,{"options-filter":i(B),onForceSearch:I,"table-loading":i(T)},null,8,["options-filter","table-loading"])]),_:1}),a(x,{class:"mt-2"},{default:t(()=>[a(d,{ref_key:"refTableFull",ref:_,options:S,onEdit:A,"onUpdate:loading":n[2]||(n[2]=o=>T.value=o)},{"item.photo":t(({item:o})=>[a(ae,{color:o.photo?"":"primary",class:X(o.photo?null:"v-avatar-light-bg primary--text"),variant:o.photo?void 0:"tonal"},{default:t(()=>[o.photo?(u(),P(te,{key:0,style:{width:"80px"},src:("storageBack"in e?e.storageBack:i(G))(o.photo)},null,8,["src"])):(u(),V("span",ie,Y(("avatarText"in e?e.avatarText:i(U))(o.name+" "+o.last_name)),1))]),_:2},1032,["color","class","variant"])]),"item.actions2":t(({item:o})=>[a(b,{onClick:C=>D(o)},{prepend:t(()=>[a(k,{icon:"tabler-file-download"})]),default:t(()=>[se]),_:2},1032,["onClick"]),a(b,{onClick:C=>E(o.id)},{prepend:t(()=>[a(k,{icon:"tabler-lock-open"})]),default:t(()=>[re]),_:2},1032,["onClick"]),a(b,{onClick:C=>R(o.id)},{prepend:t(()=>[a(k,{icon:"tabler-file"})]),default:t(()=>[le]),_:2},1032,["onClick"])]),_:1},512)]),_:1})]),_:1}),a(m,{ref_key:"refModalQuestion",ref:h,onSuccess:M},null,512),a(m,{ref_key:"refModalQuestionResetPlanifications",ref:c,onSuccess:N},null,512)])}}});export{Xe as default};
